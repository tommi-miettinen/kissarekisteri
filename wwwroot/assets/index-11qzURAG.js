var Yp=(xt,De,Lt)=>{if(!De.has(xt))throw TypeError("Cannot "+Lt)};var R=(xt,De,Lt)=>(Yp(xt,De,"read from private field"),Lt?Lt.call(xt):De.get(xt)),Ee=(xt,De,Lt)=>{if(De.has(xt))throw TypeError("Cannot add the same private member more than once");De instanceof WeakSet?De.add(xt):De.set(xt,Lt)},de=(xt,De,Lt,pn)=>(Yp(xt,De,"write to private field"),pn?pn.call(xt,Lt):De.set(xt,Lt),Lt);var gu=(xt,De,Lt,pn)=>({set _(yu){de(xt,De,yu,Lt)},get _(){return R(xt,De,pn)}}),Ke=(xt,De,Lt)=>(Yp(xt,De,"access private method"),Lt);(async()=>{var Di,Vr,Fs,ww,Hs,Yr,qs,Ew,Ui,Tw,Bs,Ks,eo,Qr,to,Xt,uc,Fi,js,mu,Co,cr,Sw,Ho,kw,qo,hc,Hn,$s,Bo,oi,Aw,no,dc,Hi,Iw,Gt,Jr,Xr,zs,Ws,Zr,Gs,Vs,Rw,Nn,_t,Ys,hn,qi,Qs,Ko,pc,Js,Xs,Bi,Ki,ei,ji,$i,Tc,fc,Qp,gc,Jp,mc,Xp,vc,Zp,yc,ef,_c,tf,bc,nf,uu,Mw,Ow,ti,yn,oo,sr,Zs,vu,Cc,of,Nw;(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();function xt(t,e){const n=Object.create(null),o=t.split(",");for(let r=0;r<o.length;r++)n[o[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const De={},Lt=[],pn=()=>{},yu=()=>!1,Lw=/^on[^a-z]/,ta=t=>Lw.test(t),_u=t=>t.startsWith("onUpdate:"),St=Object.assign,bu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Dw=Object.prototype.hasOwnProperty,st=(t,e)=>Dw.call(t,e),Ce=Array.isArray,Wi=t=>Vi(t)==="[object Map]",ri=t=>Vi(t)==="[object Set]",rf=t=>Vi(t)==="[object Date]",Uw=t=>Vi(t)==="[object RegExp]",Me=t=>typeof t=="function",kt=t=>typeof t=="string",Gi=t=>typeof t=="symbol",ft=t=>t!==null&&typeof t=="object",Cu=t=>(ft(t)||Me(t))&&Me(t.then)&&Me(t.catch),sf=Object.prototype.toString,Vi=t=>sf.call(t),Fw=t=>Vi(t).slice(8,-1),af=t=>Vi(t)==="[object Object]",wu=t=>kt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,na=xt(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Hw=/-(\w)/g,bn=Sc(t=>t.replace(Hw,(e,n)=>n?n.toUpperCase():"")),qw=/\B([A-Z])/g,Kn=Sc(t=>t.replace(qw,"-$1").toLowerCase()),oa=Sc(t=>t.charAt(0).toUpperCase()+t.slice(1)),ra=Sc(t=>t?`on${oa(t)}`:""),lr=(t,e)=>!Object.is(t,e),Yi=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},kc=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Ac=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Ic=t=>{const e=kt(t)?Number(t):NaN;return isNaN(e)?t:e};let cf;const Eu=()=>cf||(cf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Bw="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",Kw=xt(Bw);function so(t){if(Ce(t)){const e={};for(let n=0;n<t.length;n++){const o=t[n],r=kt(o)?Ww(o):so(o);if(r)for(const i in r)e[i]=r[i]}return e}else if(kt(t)||ft(t))return t}const jw=/;(?![^(]*\))/g,$w=/:([^]+)/,zw=/\/\*[^]*?\*\//g;function Ww(t){const e={};return t.replace(zw,"").split(jw).forEach(n=>{if(n){const o=n.split($w);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e}function ao(t){let e="";if(kt(t))e=t;else if(Ce(t))for(let n=0;n<t.length;n++){const o=ao(t[n]);o&&(e+=o+" ")}else if(ft(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Gw(t){if(!t)return null;let{class:e,style:n}=t;return e&&!kt(e)&&(t.class=ao(e)),n&&(t.style=so(n)),t}const Vw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Yw=xt(Vw);function lf(t){return!!t||t===""}function Qw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let o=0;n&&o<t.length;o++)n=ur(t[o],e[o]);return n}function ur(t,e){if(t===e)return!0;let n=rf(t),o=rf(e);if(n||o)return n&&o?t.getTime()===e.getTime():!1;if(n=Gi(t),o=Gi(e),n||o)return t===e;if(n=Ce(t),o=Ce(e),n||o)return n&&o?Qw(t,e):!1;if(n=ft(t),o=ft(e),n||o){if(!n||!o)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const s in t){const a=t.hasOwnProperty(s),c=e.hasOwnProperty(s);if(a&&!c||!a&&c||!ur(t[s],e[s]))return!1}}return String(t)===String(e)}function Rc(t,e){return t.findIndex(n=>ur(n,e))}const Se=t=>kt(t)?t:t==null?"":Ce(t)||ft(t)&&(t.toString===sf||!Me(t.toString))?JSON.stringify(t,uf,2):String(t),uf=(t,e)=>e&&e.__v_isRef?uf(t,e.value):Wi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[o,r])=>(n[`${o} =>`]=r,n),{})}:ri(e)?{[`Set(${e.size})`]:[...e.values()]}:ft(e)&&!Ce(e)&&!af(e)?String(e):e;let Pn;class Tu{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Pn,!e&&Pn&&(this.index=(Pn.scopes||(Pn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Pn;try{return Pn=this,e()}finally{Pn=n}}}on(){Pn=this}off(){Pn=this.parent}stop(e){if(this._active){let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function hf(t){return new Tu(t)}function df(t,e=Pn){e&&e.active&&e.effects.push(t)}function pf(){return Pn}function Su(t){Pn&&Pn.cleanups.push(t)}const ku=t=>{const e=new Set(t);return e.w=0,e.n=0,e},ff=t=>(t.w&hr)>0,gf=t=>(t.n&hr)>0,Jw=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=hr},Xw=t=>{const{deps:e}=t;if(e.length){let n=0;for(let o=0;o<e.length;o++){const r=e[o];ff(r)&&!gf(r)?r.delete(t):e[n++]=r,r.w&=~hr,r.n&=~hr}e.length=n}},Oc=new WeakMap;let ia=0,hr=1;const Au=30;let co;const ii=Symbol(""),Iu=Symbol("");class Qi{constructor(e,n=null,o){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,df(this,o)}run(){if(!this.active)return this.fn();let e=co,n=dr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=co,co=this,dr=!0,hr=1<<++ia,ia<=Au?Jw(this):mf(this),this.fn()}finally{ia<=Au&&Xw(this),hr=1<<--ia,co=this.parent,dr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){co===this?this.deferStop=!0:this.active&&(mf(this),this.onStop&&this.onStop(),this.active=!1)}}function mf(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function Zw(t,e){t.effect instanceof Qi&&(t=t.effect.fn);const n=new Qi(t);e&&(St(n,e),e.scope&&df(n,e.scope)),(!e||!e.lazy)&&n.run();const o=n.run.bind(n);return o.effect=n,o}function e0(t){t.effect.stop()}let dr=!0;const vf=[];function Ji(){vf.push(dr),dr=!1}function Xi(){const t=vf.pop();dr=t===void 0?!0:t}function Cn(t,e,n){if(dr&&co){let o=Oc.get(t);o||Oc.set(t,o=new Map);let r=o.get(n);r||o.set(n,r=ku()),yf(r)}}function yf(t,e){let n=!1;ia<=Au?gf(t)||(t.n|=hr,n=!ff(t)):n=!t.has(co),n&&(t.add(co),co.deps.push(t))}function jo(t,e,n,o,r,i){const s=Oc.get(t);if(!s)return;let a=[];if(e==="clear")a=[...s.values()];else if(n==="length"&&Ce(t)){const c=Number(o);s.forEach((l,u)=>{(u==="length"||!Gi(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(s.get(n)),e){case"add":Ce(t)?wu(n)&&a.push(s.get("length")):(a.push(s.get(ii)),Wi(t)&&a.push(s.get(Iu)));break;case"delete":Ce(t)||(a.push(s.get(ii)),Wi(t)&&a.push(s.get(Iu)));break;case"set":Wi(t)&&a.push(s.get(ii));break}if(a.length===1)a[0]&&Ru(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);Ru(ku(c))}}function Ru(t,e){const n=Ce(t)?t:[...t];for(const o of n)o.computed&&_f(o);for(const o of n)o.computed||_f(o)}function _f(t,e){(t!==co||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function t0(t,e){var n;return(n=Oc.get(t))==null?void 0:n.get(e)}const n0=xt("__proto__,__v_isRef,__isVue"),bf=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gi)),Cf=o0();function o0(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const o=ot(this);for(let i=0,s=this.length;i<s;i++)Cn(o,"get",i+"");const r=o[e](...n);return r===-1||r===!1?o[e](...n.map(ot)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Ji();const o=ot(this)[e].apply(this,n);return Xi(),o}}),t}function r0(t){const e=ot(this);return Cn(e,"has",t),e.hasOwnProperty(t)}class wf{constructor(e=!1,n=!1){this._isReadonly=e,this._shallow=n}get(e,n,o){const r=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw"&&o===(r?i?xf:Nf:i?Of:Rf).get(e))return e;const s=Ce(e);if(!r){if(s&&st(Cf,n))return Reflect.get(Cf,n,o);if(n==="hasOwnProperty")return r0}const a=Reflect.get(e,n,o);return(Gi(n)?bf.has(n):n0(n))||(r||Cn(e,"get",n),i)?a:Mt(a)?s&&wu(n)?a:a.value:ft(a)?r?sa(a):fr(a):a}}class Ef extends wf{constructor(e=!1){super(!1,e)}set(e,n,o,r){let i=e[n];if(ai(i)&&Mt(i)&&!Mt(o))return!1;if(!this._shallow&&(!aa(o)&&!ai(o)&&(i=ot(i),o=ot(o)),!Ce(e)&&Mt(i)&&!Mt(o)))return i.value=o,!0;const s=Ce(e)&&wu(n)?Number(n)<e.length:st(e,n),a=Reflect.set(e,n,o,r);return e===ot(r)&&(s?lr(o,i)&&jo(e,"set",n,o):jo(e,"add",n,o)),a}deleteProperty(e,n){const o=st(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&o&&jo(e,"delete",n,void 0),r}has(e,n){const o=Reflect.has(e,n);return(!Gi(n)||!bf.has(n))&&Cn(e,"has",n),o}ownKeys(e){return Cn(e,"iterate",Ce(e)?"length":ii),Reflect.ownKeys(e)}}class Tf extends wf{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const i0=new Ef,s0=new Tf,a0=new Ef(!0),c0=new Tf(!0),Ou=t=>t,Nc=t=>Reflect.getPrototypeOf(t);function xc(t,e,n=!1,o=!1){t=t.__v_raw;const r=ot(t),i=ot(e);n||(lr(e,i)&&Cn(r,"get",e),Cn(r,"get",i));const{has:s}=Nc(r),a=o?Ou:n?Mu:ca;if(s.call(r,e))return a(t.get(e));if(s.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function Pc(t,e=!1){const n=this.__v_raw,o=ot(n),r=ot(t);return e||(lr(t,r)&&Cn(o,"has",t),Cn(o,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function Mc(t,e=!1){return t=t.__v_raw,!e&&Cn(ot(t),"iterate",ii),Reflect.get(t,"size",t)}function Sf(t){t=ot(t);const e=ot(this);return Nc(e).has.call(e,t)||(e.add(t),jo(e,"add",t,t)),this}function kf(t,e){e=ot(e);const n=ot(this),{has:o,get:r}=Nc(n);let i=o.call(n,t);i||(t=ot(t),i=o.call(n,t));const s=r.call(n,t);return n.set(t,e),i?lr(e,s)&&jo(n,"set",t,e):jo(n,"add",t,e),this}function Af(t){const e=ot(this),{has:n,get:o}=Nc(e);let r=n.call(e,t);r||(t=ot(t),r=n.call(e,t)),o&&o.call(e,t);const i=e.delete(t);return r&&jo(e,"delete",t,void 0),i}function If(){const t=ot(this),e=t.size!==0,n=t.clear();return e&&jo(t,"clear",void 0,void 0),n}function Lc(t,e){return function(n,o){const r=this,i=r.__v_raw,s=ot(i),a=e?Ou:t?Mu:ca;return!t&&Cn(s,"iterate",ii),i.forEach((c,l)=>n.call(o,a(c),a(l),r))}}function Dc(t,e,n){return function(...o){const r=this.__v_raw,i=ot(r),s=Wi(i),a=t==="entries"||t===Symbol.iterator&&s,c=t==="keys"&&s,l=r[t](...o),u=n?Ou:e?Mu:ca;return!e&&Cn(i,"iterate",c?Iu:ii),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function pr(t){return function(...e){return t==="delete"?!1:this}}function l0(){const t={get(r){return xc(this,r)},get size(){return Mc(this)},has:Pc,add:Sf,set:kf,delete:Af,clear:If,forEach:Lc(!1,!1)},e={get(r){return xc(this,r,!1,!0)},get size(){return Mc(this)},has:Pc,add:Sf,set:kf,delete:Af,clear:If,forEach:Lc(!1,!0)},n={get(r){return xc(this,r,!0)},get size(){return Mc(this,!0)},has(r){return Pc.call(this,r,!0)},add:pr("add"),set:pr("set"),delete:pr("delete"),clear:pr("clear"),forEach:Lc(!0,!1)},o={get(r){return xc(this,r,!0,!0)},get size(){return Mc(this,!0)},has(r){return Pc.call(this,r,!0)},add:pr("add"),set:pr("set"),delete:pr("delete"),clear:pr("clear"),forEach:Lc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Dc(r,!1,!1),n[r]=Dc(r,!0,!1),e[r]=Dc(r,!1,!0),o[r]=Dc(r,!0,!0)}),[t,n,e,o]}const[u0,h0,d0,p0]=l0();function Uc(t,e){const n=e?t?p0:d0:t?h0:u0;return(o,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?o:Reflect.get(st(n,r)&&r in o?n:o,r,i)}const f0={get:Uc(!1,!1)},g0={get:Uc(!1,!0)},m0={get:Uc(!0,!1)},v0={get:Uc(!0,!0)},Rf=new WeakMap,Of=new WeakMap,Nf=new WeakMap,xf=new WeakMap;function y0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _0(t){return t.__v_skip||!Object.isExtensible(t)?0:y0(Fw(t))}function fr(t){return ai(t)?t:Fc(t,!1,i0,f0,Rf)}function Nu(t){return Fc(t,!1,a0,g0,Of)}function sa(t){return Fc(t,!0,s0,m0,Nf)}function b0(t){return Fc(t,!0,c0,v0,xf)}function Fc(t,e,n,o,r){if(!ft(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const s=_0(t);if(s===0)return t;const a=new Proxy(t,s===2?o:n);return r.set(t,a),a}function si(t){return ai(t)?si(t.__v_raw):!!(t&&t.__v_isReactive)}function ai(t){return!!(t&&t.__v_isReadonly)}function aa(t){return!!(t&&t.__v_isShallow)}function xu(t){return si(t)||ai(t)}function ot(t){const e=t&&t.__v_raw;return e?ot(e):t}function Pu(t){return kc(t,"__v_skip",!0),t}const ca=t=>ft(t)?fr(t):t,Mu=t=>ft(t)?sa(t):t;function Lu(t){dr&&co&&(t=ot(t),yf(t.dep||(t.dep=ku())))}function Hc(t,e){t=ot(t);const n=t.dep;n&&Ru(n)}function Mt(t){return!!(t&&t.__v_isRef===!0)}function ye(t){return Pf(t,!1)}function Du(t){return Pf(t,!0)}function Pf(t,e){return Mt(t)?t:new C0(t,e)}class C0{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:ot(e),this._value=n?e:ca(e)}get value(){return Lu(this),this._value}set value(e){const n=this.__v_isShallow||aa(e)||ai(e);e=n?e:ot(e),lr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ca(e),Hc(this))}}function w0(t){Hc(t)}function X(t){return Mt(t)?t.value:t}function E0(t){return Me(t)?t():X(t)}const T0={get:(t,e,n)=>X(Reflect.get(t,e,n)),set:(t,e,n,o)=>{const r=t[e];return Mt(r)&&!Mt(n)?(r.value=n,!0):Reflect.set(t,e,n,o)}};function Uu(t){return si(t)?t:new Proxy(t,T0)}class S0{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:o}=e(()=>Lu(this),()=>Hc(this));this._get=n,this._set=o}get value(){return this._get()}set value(e){this._set(e)}}function k0(t){return new S0(t)}function Fu(t){const e=Ce(t)?new Array(t.length):{};for(const n in t)e[n]=Mf(t,n);return e}class A0{constructor(e,n,o){this._object=e,this._key=n,this._defaultValue=o,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return t0(ot(this._object),this._key)}}class I0{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function R0(t,e,n){return Mt(t)?t:Me(t)?new I0(t):ft(t)&&arguments.length>1?Mf(t,e,n):ye(t)}function Mf(t,e,n){const o=t[e];return Mt(o)?o:new A0(t,e,n)}class O0{constructor(e,n,o,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Qi(e,()=>{this._dirty||(this._dirty=!0,Hc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=o}get value(){const e=ot(this);return Lu(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function N0(t,e,n=!1){let o,r;const i=Me(t);return i?(o=t,r=pn):(o=t.get,r=t.set),new O0(o,r,i||!r,n)}function x0(t,...e){}function P0(t,e){}function $o(t,e,n,o){let r;try{r=o?t(...o):t()}catch(i){ci(i,e,n)}return r}function Mn(t,e,n,o){if(Me(t)){const i=$o(t,e,n,o);return i&&Cu(i)&&i.catch(s=>{ci(s,e,n)}),i}const r=[];for(let i=0;i<t.length;i++)r.push(Mn(t[i],e,n,o));return r}function ci(t,e,n,o=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const s=e.proxy,a=n;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,s,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){$o(c,null,10,[t,s,a]);return}}M0(t,n,r,o)}function M0(t,e,n,o=!0){console.error(t)}let la=!1,Hu=!1;const rn=[];let Eo=0;const Zi=[];let zo=null,li=0;const Lf=Promise.resolve();let qu=null;function ui(t){const e=qu||Lf;return t?e.then(this?t.bind(this):t):e}function L0(t){let e=Eo+1,n=rn.length;for(;e<n;){const o=e+n>>>1,r=rn[o],i=ua(r);i<t||i===t&&r.pre?e=o+1:n=o}return e}function qc(t){(!rn.length||!rn.includes(t,la&&t.allowRecurse?Eo+1:Eo))&&(t.id==null?rn.push(t):rn.splice(L0(t.id),0,t),Df())}function Df(){!la&&!Hu&&(Hu=!0,qu=Lf.then(Ff))}function D0(t){const e=rn.indexOf(t);e>Eo&&rn.splice(e,1)}function Bc(t){Ce(t)?Zi.push(...t):(!zo||!zo.includes(t,t.allowRecurse?li+1:li))&&Zi.push(t),Df()}function Uf(t,e=la?Eo+1:0){for(;e<rn.length;e++){const n=rn[e];n&&n.pre&&(rn.splice(e,1),e--,n())}}function Kc(t){if(Zi.length){const e=[...new Set(Zi)];if(Zi.length=0,zo){zo.push(...e);return}for(zo=e,zo.sort((n,o)=>ua(n)-ua(o)),li=0;li<zo.length;li++)zo[li]();zo=null,li=0}}const ua=t=>t.id==null?1/0:t.id,U0=(t,e)=>{const n=ua(t)-ua(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Ff(t){Hu=!1,la=!0,rn.sort(U0);try{for(Eo=0;Eo<rn.length;Eo++){const e=rn[Eo];e&&e.active!==!1&&$o(e,null,14)}}finally{Eo=0,rn.length=0,Kc(),la=!1,qu=null,(rn.length||Zi.length)&&Ff()}}let es,jc=[];function Hf(t,e){var n,o;es=t,es?(es.enabled=!0,jc.forEach(({event:r,args:i})=>es.emit(r,...i)),jc=[]):typeof window<"u"&&window.HTMLElement&&!((o=(n=window.navigator)==null?void 0:n.userAgent)!=null&&o.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(r=>{Hf(r,e)}),setTimeout(()=>{es||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,jc=[])},3e3)):jc=[]}function F0(t,e,...n){if(t.isUnmounted)return;const o=t.vnode.props||De;let r=n;const i=e.startsWith("update:"),s=i&&e.slice(7);if(s&&s in o){const u=`${s==="modelValue"?"model":s}Modifiers`,{number:h,trim:d}=o[u]||De;d&&(r=n.map(p=>kt(p)?p.trim():p)),h&&(r=n.map(Ac))}let a,c=o[a=ra(e)]||o[a=ra(bn(e))];!c&&i&&(c=o[a=ra(Kn(e))]),c&&Mn(c,t,6,r);const l=o[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Mn(l,t,6,r)}}function qf(t,e,n=!1){const o=e.emitsCache,r=o.get(t);if(r!==void 0)return r;const i=t.emits;let s={},a=!1;if(!Me(t)){const c=l=>{const u=qf(l,e,!0);u&&(a=!0,St(s,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(ft(t)&&o.set(t,null),null):(Ce(i)?i.forEach(c=>s[c]=null):St(s,i),ft(t)&&o.set(t,s),s)}function $c(t,e){return!t||!ta(e)?!1:(e=e.slice(2).replace(/Once$/,""),st(t,e[0].toLowerCase()+e.slice(1))||st(t,Kn(e))||st(t,e))}let Vt=null,zc=null;function ha(t){const e=Vt;return Vt=t,zc=t&&t.type.__scopeId||null,e}function H0(t){zc=t}function q0(){zc=null}const B0=t=>wt;function wt(t,e=Vt,n){if(!e||t._n)return t;const o=(...r)=>{o._d&&lh(-1);const i=ha(e);let s;try{s=t(...r)}finally{ha(i),o._d&&lh(1)}return s};return o._n=!0,o._c=!0,o._d=!0,o}function Wc(t){const{type:e,vnode:n,proxy:o,withProxy:r,props:i,propsOptions:[s],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:p,ctx:m,inheritAttrs:_}=t;let T,b;const C=ha(t);try{if(n.shapeFlag&4){const v=r||o;T=Dn(u.call(v,v,h,i,p,d,m)),b=c}else{const v=e;T=Dn(v.length>1?v(i,{attrs:c,slots:a,emit:l}):v(i,null)),b=e.props?c:j0(c)}}catch(v){Ea.length=0,ci(v,t,1),T=Oe(an)}let y=T;if(b&&_!==!1){const v=Object.keys(b),{shapeFlag:w}=y;v.length&&w&7&&(s&&v.some(_u)&&(b=$0(b,s)),y=So(y,b))}return n.dirs&&(y=So(y),y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),T=y,ha(C),T}function K0(t){let e;for(let n=0;n<t.length;n++){const o=t[n];if(_r(o)){if(o.type!==an||o.children==="v-if"){if(e)return;e=o}}else return}return e}const j0=t=>{let e;for(const n in t)(n==="class"||n==="style"||ta(n))&&((e||(e={}))[n]=t[n]);return e},$0=(t,e)=>{const n={};for(const o in t)(!_u(o)||!(o.slice(9)in e))&&(n[o]=t[o]);return n};function z0(t,e,n){const{props:o,children:r,component:i}=t,{props:s,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return o?Bf(o,s,l):!!s;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(s[d]!==o[d]&&!$c(l,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:o===s?!1:o?s?Bf(o,s,l):!0:!!s;return!1}function Bf(t,e,n){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let r=0;r<o.length;r++){const i=o[r];if(e[i]!==t[i]&&!$c(n,i))return!0}return!1}function Bu({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Ku="components",W0="directives";function ju(t,e){return $u(Ku,t,!0,e)||t}const Kf=Symbol.for("v-ndc");function jf(t){return kt(t)?$u(Ku,t,!1)||t:t||Kf}function G0(t){return $u(W0,t)}function $u(t,e,n=!0,o=!1){const r=Vt||Ft;if(r){const i=r.type;if(t===Ku){const a=fh(i,!1);if(a&&(a===e||a===bn(e)||a===oa(bn(e))))return i}const s=$f(r[t]||i[t],e)||$f(r.appContext[t],e);return!s&&o?i:s}}function $f(t,e){return t&&(t[e]||t[bn(e)]||t[oa(bn(e))])}const zf=t=>t.__isSuspense,V0={name:"Suspense",__isSuspense:!0,process(t,e,n,o,r,i,s,a,c,l){t==null?Q0(e,n,o,r,i,s,a,c,l):J0(t,e,n,o,r,s,a,c,l)},hydrate:X0,create:zu,normalize:Z0},Y0=V0;function da(t,e){const n=t.props&&t.props[e];Me(n)&&n()}function Q0(t,e,n,o,r,i,s,a,c){const{p:l,o:{createElement:u}}=c,h=u("div"),d=t.suspense=zu(t,r,o,e,h,n,i,s,a,c);l(null,d.pendingBranch=t.ssContent,h,null,o,d,i,s),d.deps>0?(da(t,"onPending"),da(t,"onFallback"),l(null,t.ssFallback,e,n,o,null,i,s),ts(d,t.ssFallback)):d.resolve(!1,!0)}function J0(t,e,n,o,r,i,s,a,{p:c,um:l,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,p=e.ssFallback,{activeBranch:m,pendingBranch:_,isInFallback:T,isHydrating:b}=h;if(_)h.pendingBranch=d,uo(d,_)?(c(_,d,h.hiddenContainer,null,r,h,i,s,a),h.deps<=0?h.resolve():T&&(c(m,p,n,o,r,null,i,s,a),ts(h,p))):(h.pendingId++,b?(h.isHydrating=!1,h.activeBranch=_):l(_,r,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),T?(c(null,d,h.hiddenContainer,null,r,h,i,s,a),h.deps<=0?h.resolve():(c(m,p,n,o,r,null,i,s,a),ts(h,p))):m&&uo(d,m)?(c(m,d,n,o,r,h,i,s,a),h.resolve(!0)):(c(null,d,h.hiddenContainer,null,r,h,i,s,a),h.deps<=0&&h.resolve()));else if(m&&uo(d,m))c(m,d,n,o,r,h,i,s,a),ts(h,d);else if(da(e,"onPending"),h.pendingBranch=d,h.pendingId++,c(null,d,h.hiddenContainer,null,r,h,i,s,a),h.deps<=0)h.resolve();else{const{timeout:C,pendingId:y}=h;C>0?setTimeout(()=>{h.pendingId===y&&h.fallback(p)},C):C===0&&h.fallback(p)}}function zu(t,e,n,o,r,i,s,a,c,l,u=!1){const{p:h,m:d,um:p,n:m,o:{parentNode:_,remove:T}}=l;let b;const C=eE(t);C&&(e!=null&&e.pendingBranch)&&(b=e.pendingId,e.deps++);const y=t.props?Ic(t.props.timeout):void 0,v={vnode:t,parent:e,parentComponent:n,isSVG:s,container:o,hiddenContainer:r,anchor:i,deps:0,pendingId:0,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:u,isUnmounted:!1,effects:[],resolve(w=!1,A=!1){const{vnode:S,activeBranch:E,pendingBranch:O,pendingId:L,effects:z,parentComponent:x,container:j}=v;let ae=!1;if(v.isHydrating)v.isHydrating=!1;else if(!w){ae=E&&O.transition&&O.transition.mode==="out-in",ae&&(E.transition.afterLeave=()=>{L===v.pendingId&&(d(O,j,fe,0),Bc(z))});let{anchor:fe}=v;E&&(fe=m(E),p(E,x,v,!0)),ae||d(O,j,fe,0)}ts(v,O),v.pendingBranch=null,v.isInFallback=!1;let ie=v.parent,G=!1;for(;ie;){if(ie.pendingBranch){ie.effects.push(...z),G=!0;break}ie=ie.parent}!G&&!ae&&Bc(z),v.effects=[],C&&e&&e.pendingBranch&&b===e.pendingId&&(e.deps--,e.deps===0&&!A&&e.resolve()),da(S,"onResolve")},fallback(w){if(!v.pendingBranch)return;const{vnode:A,activeBranch:S,parentComponent:E,container:O,isSVG:L}=v;da(A,"onFallback");const z=m(S),x=()=>{v.isInFallback&&(h(null,w,O,z,E,null,L,a,c),ts(v,w))},j=w.transition&&w.transition.mode==="out-in";j&&(S.transition.afterLeave=x),v.isInFallback=!0,p(S,E,null,!0),j||x()},move(w,A,S){v.activeBranch&&d(v.activeBranch,w,A,S),v.container=w},next(){return v.activeBranch&&m(v.activeBranch)},registerDep(w,A){const S=!!v.pendingBranch;S&&v.deps++;const E=w.vnode.el;w.asyncDep.catch(O=>{ci(O,w,0)}).then(O=>{if(w.isUnmounted||v.isUnmounted||v.pendingId!==w.suspenseId)return;w.asyncResolved=!0;const{vnode:L}=w;dh(w,O,!1),E&&(L.el=E);const z=!E&&w.subTree.el;A(w,L,_(E||w.subTree.el),E?null:m(w.subTree),v,s,c),z&&T(z),Bu(w,L.el),S&&--v.deps===0&&v.resolve()})},unmount(w,A){v.isUnmounted=!0,v.activeBranch&&p(v.activeBranch,n,w,A),v.pendingBranch&&p(v.pendingBranch,n,w,A)}};return v}function X0(t,e,n,o,r,i,s,a,c){const l=e.suspense=zu(e,o,n,t.parentNode,document.createElement("div"),null,r,i,s,a,!0),u=c(t,l.pendingBranch=e.ssContent,n,l,i,s);return l.deps===0&&l.resolve(!1,!0),u}function Z0(t){const{shapeFlag:e,children:n}=t,o=e&32;t.ssContent=Wf(o?n.default:n),t.ssFallback=o?Wf(n.fallback):Oe(an)}function Wf(t){let e;if(Me(t)){const n=vi&&t._c;n&&(t._d=!1,Z()),t=t(),n&&(t._d=!0,e=Tn,Ng())}return Ce(t)&&(t=K0(t)),t=Dn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Gf(t,e){e&&e.pendingBranch?Ce(t)?e.effects.push(...t):e.effects.push(t):Bc(t)}function ts(t,e){t.activeBranch=e;const{vnode:n,parentComponent:o}=t,r=n.el=e.el;o&&o.subTree===n&&(o.vnode.el=r,Bu(o,r))}function eE(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}function lo(t,e){return pa(t,null,e)}function Vf(t,e){return pa(t,null,{flush:"post"})}function tE(t,e){return pa(t,null,{flush:"sync"})}const Gc={};function Pt(t,e,n){return pa(t,e,n)}function pa(t,e,{immediate:n,deep:o,flush:r,onTrack:i,onTrigger:s}=De){var a;const c=pf()===((a=Ft)==null?void 0:a.scope)?Ft:null;let l,u=!1,h=!1;if(Mt(t)?(l=()=>t.value,u=aa(t)):si(t)?(l=()=>t,o=!0):Ce(t)?(h=!0,u=t.some(v=>si(v)||aa(v)),l=()=>t.map(v=>{if(Mt(v))return v.value;if(si(v))return hi(v);if(Me(v))return $o(v,c,2)})):Me(t)?e?l=()=>$o(t,c,2):l=()=>{if(!(c&&c.isUnmounted))return d&&d(),Mn(t,c,3,[p])}:l=pn,e&&o){const v=l;l=()=>hi(v())}let d,p=v=>{d=C.onStop=()=>{$o(v,c,4)}},m;if(rs)if(p=pn,e?n&&Mn(e,c,3,[l(),h?[]:void 0,p]):l(),r==="sync"){const v=jg();m=v.__watcherHandles||(v.__watcherHandles=[])}else return pn;let _=h?new Array(t.length).fill(Gc):Gc;const T=()=>{if(C.active)if(e){const v=C.run();(o||u||(h?v.some((w,A)=>lr(w,_[A])):lr(v,_)))&&(d&&d(),Mn(e,c,3,[v,_===Gc?void 0:h&&_[0]===Gc?[]:_,p]),_=v)}else C.run()};T.allowRecurse=!!e;let b;r==="sync"?b=T:r==="post"?b=()=>Zt(T,c&&c.suspense):(T.pre=!0,c&&(T.id=c.uid),b=()=>qc(T));const C=new Qi(l,b);e?n?T():_=C.run():r==="post"?Zt(C.run.bind(C),c&&c.suspense):C.run();const y=()=>{C.stop(),c&&c.scope&&bu(c.scope.effects,C)};return m&&m.push(y),y}function nE(t,e,n){const o=this.proxy,r=kt(t)?t.includes(".")?Yf(o,t):()=>o[t]:t.bind(o,o);let i;Me(e)?i=e:(i=e.handler,n=e);const s=Ft;Cr(this);const a=pa(r,i.bind(o),n);return s?Cr(s):wr(),a}function Yf(t,e){const n=e.split(".");return()=>{let o=t;for(let r=0;r<n.length&&o;r++)o=o[n[r]];return o}}function hi(t,e){if(!ft(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Mt(t))hi(t.value,e);else if(Ce(t))for(let n=0;n<t.length;n++)hi(t[n],e);else if(ri(t)||Wi(t))t.forEach(n=>{hi(n,e)});else if(af(t))for(const n in t)hi(t[n],e);return t}function wn(t,e){const n=Vt;if(n===null)return t;const o=al(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,c,l=De]=e[i];s&&(Me(s)&&(s={mounted:s,updated:s}),s.deep&&hi(a),r.push({dir:s,instance:o,value:a,oldValue:void 0,arg:c,modifiers:l}))}return t}function To(t,e,n,o){const r=t.dirs,i=e&&e.dirs;for(let s=0;s<r.length;s++){const a=r[s];i&&(a.oldValue=i[s].value);let c=a.dir[o];c&&(Ji(),Mn(c,n,8,[t.el,a,t,e]),Xi())}}const gr=Symbol("_leaveCb"),Vc=Symbol("_enterCb");function Wu(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ln(()=>{t.isMounted=!0}),ma(()=>{t.isUnmounting=!0}),t}const jn=[Function,Array],Gu={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jn,onEnter:jn,onAfterEnter:jn,onEnterCancelled:jn,onBeforeLeave:jn,onLeave:jn,onAfterLeave:jn,onLeaveCancelled:jn,onBeforeAppear:jn,onAppear:jn,onAfterAppear:jn,onAppearCancelled:jn},oE={name:"BaseTransition",props:Gu,setup(t,{slots:e}){const n=kn(),o=Wu();let r;return()=>{const i=e.default&&Yc(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const _ of i)if(_.type!==an){s=_;break}}const a=ot(t),{mode:c}=a;if(o.isLeaving)return Vu(s);const l=Xf(s);if(!l)return Vu(s);const u=ns(l,a,o,n);di(l,u);const h=n.subTree,d=h&&Xf(h);let p=!1;const{getTransitionKey:m}=l.type;if(m){const _=m();r===void 0?r=_:_!==r&&(r=_,p=!0)}if(d&&d.type!==an&&(!uo(l,d)||p)){const _=ns(d,a,o,n);if(di(d,_),c==="out-in")return o.isLeaving=!0,_.afterLeave=()=>{o.isLeaving=!1,n.update.active!==!1&&n.update()},Vu(s);c==="in-out"&&l.type!==an&&(_.delayLeave=(T,b,C)=>{const y=Jf(o,d);y[String(d.key)]=d,T[gr]=()=>{b(),T[gr]=void 0,delete u.delayedLeave},u.delayedLeave=C})}return s}}},Qf=oE;function Jf(t,e){const{leavingVNodes:n}=t;let o=n.get(e.type);return o||(o=Object.create(null),n.set(e.type,o)),o}function ns(t,e,n,o){const{appear:r,mode:i,persisted:s=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:_,onAppear:T,onAfterAppear:b,onAppearCancelled:C}=e,y=String(t.key),v=Jf(n,t),w=(E,O)=>{E&&Mn(E,o,9,O)},A=(E,O)=>{const L=O[1];w(E,O),Ce(E)?E.every(z=>z.length<=1)&&L():E.length<=1&&L()},S={mode:i,persisted:s,beforeEnter(E){let O=a;if(!n.isMounted)if(r)O=_||a;else return;E[gr]&&E[gr](!0);const L=v[y];L&&uo(t,L)&&L.el[gr]&&L.el[gr](),w(O,[E])},enter(E){let O=c,L=l,z=u;if(!n.isMounted)if(r)O=T||c,L=b||l,z=C||u;else return;let x=!1;const j=E[Vc]=ae=>{x||(x=!0,ae?w(z,[E]):w(L,[E]),S.delayedLeave&&S.delayedLeave(),E[Vc]=void 0)};O?A(O,[E,j]):j()},leave(E,O){const L=String(t.key);if(E[Vc]&&E[Vc](!0),n.isUnmounting)return O();w(h,[E]);let z=!1;const x=E[gr]=j=>{z||(z=!0,O(),j?w(m,[E]):w(p,[E]),E[gr]=void 0,v[L]===t&&delete v[L])};v[L]=t,d?A(d,[E,x]):x()},clone(E){return ns(E,e,n,o)}};return S}function Vu(t){if(fa(t))return t=So(t),t.children=null,t}function Xf(t){return fa(t)?t.children?t.children[0]:void 0:t}function di(t,e){t.shapeFlag&6&&t.component?di(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Yc(t,e=!1,n){let o=[],r=0;for(let i=0;i<t.length;i++){let s=t[i];const a=n==null?s.key:String(n)+String(s.key!=null?s.key:i);s.type===ze?(s.patchFlag&128&&r++,o=o.concat(Yc(s.children,e,a))):(e||s.type!==an)&&o.push(a!=null?So(s,{key:a}):s)}if(r>1)for(let i=0;i<o.length;i++)o[i].patchFlag=-2;return o}function vt(t,e){return Me(t)?St({name:t.name},e,{setup:t}):t}const pi=t=>!!t.type.__asyncLoader;function rE(t){Me(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:o,delay:r=200,timeout:i,suspensible:s=!0,onError:a}=t;let c=null,l,u=0;const h=()=>(u++,c=null,d()),d=()=>{let p;return c||(p=c=e().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),a)return new Promise((_,T)=>{a(m,()=>_(h()),()=>T(m),u+1)});throw m}).then(m=>p!==c&&c?c:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),l=m,m)))};return vt({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return l},setup(){const p=Ft;if(l)return()=>Yu(l,p);const m=C=>{c=null,ci(C,p,13,!o)};if(s&&p.suspense||rs)return d().then(C=>()=>Yu(C,p)).catch(C=>(m(C),()=>o?Oe(o,{error:C}):null));const _=ye(!1),T=ye(),b=ye(!!r);return r&&setTimeout(()=>{b.value=!1},r),i!=null&&setTimeout(()=>{if(!_.value&&!T.value){const C=new Error(`Async component timed out after ${i}ms.`);m(C),T.value=C}},i),d().then(()=>{_.value=!0,p.parent&&fa(p.parent.vnode)&&qc(p.parent.update)}).catch(C=>{m(C),T.value=C}),()=>{if(_.value&&l)return Yu(l,p);if(T.value&&o)return Oe(o,{error:T.value});if(n&&!b.value)return Oe(n)}}})}function Yu(t,e){const{ref:n,props:o,children:r,ce:i}=e.vnode,s=Oe(t,o,r);return s.ref=n,s.ce=i,delete e.vnode.ce,s}const fa=t=>t.type.__isKeepAlive,iE={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=kn(),o=n.ctx;if(!o.renderer)return()=>{const C=e.default&&e.default();return C&&C.length===1?C[0]:C};const r=new Map,i=new Set;let s=null;const a=n.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:h}}}=o,d=h("div");o.activate=(C,y,v,w,A)=>{const S=C.component;l(C,y,v,0,a),c(S.vnode,C,y,v,S,a,w,C.slotScopeIds,A),Zt(()=>{S.isDeactivated=!1,S.a&&Yi(S.a);const E=C.props&&C.props.onVnodeMounted;E&&Sn(E,S.parent,C)},a)},o.deactivate=C=>{const y=C.component;l(C,d,null,1,a),Zt(()=>{y.da&&Yi(y.da);const v=C.props&&C.props.onVnodeUnmounted;v&&Sn(v,y.parent,C),y.isDeactivated=!0},a)};function p(C){Qu(C),u(C,n,a,!0)}function m(C){r.forEach((y,v)=>{const w=fh(y.type);w&&(!C||!C(w))&&_(v)})}function _(C){const y=r.get(C);!s||!uo(y,s)?p(y):s&&Qu(s),r.delete(C),i.delete(C)}Pt(()=>[t.include,t.exclude],([C,y])=>{C&&m(v=>ga(C,v)),y&&m(v=>!ga(y,v))},{flush:"post",deep:!0});let T=null;const b=()=>{T!=null&&r.set(T,Ju(n.subTree))};return Ln(b),Jc(b),ma(()=>{r.forEach(C=>{const{subTree:y,suspense:v}=n,w=Ju(y);if(C.type===w.type&&C.key===w.key){Qu(w);const A=w.component.da;A&&Zt(A,v);return}p(C)})}),()=>{if(T=null,!e.default)return null;const C=e.default(),y=C[0];if(C.length>1)return s=null,C;if(!_r(y)||!(y.shapeFlag&4)&&!(y.shapeFlag&128))return s=null,y;let v=Ju(y);const w=v.type,A=fh(pi(v)?v.type.__asyncResolved||{}:w),{include:S,exclude:E,max:O}=t;if(S&&(!A||!ga(S,A))||E&&A&&ga(E,A))return s=v,y;const L=v.key==null?w:v.key,z=r.get(L);return v.el&&(v=So(v),y.shapeFlag&128&&(y.ssContent=v)),T=L,z?(v.el=z.el,v.component=z.component,v.transition&&di(v,v.transition),v.shapeFlag|=512,i.delete(L),i.add(L)):(i.add(L),O&&i.size>parseInt(O,10)&&_(i.values().next().value)),v.shapeFlag|=256,s=v,zf(y.type)?y:v}}},sE=iE;function ga(t,e){return Ce(t)?t.some(n=>ga(n,e)):kt(t)?t.split(",").includes(e):Uw(t)?t.test(e):!1}function Zf(t,e){tg(t,"a",e)}function eg(t,e){tg(t,"da",e)}function tg(t,e,n=Ft){const o=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Qc(e,o,n),n){let r=n.parent;for(;r&&r.parent;)fa(r.parent.vnode)&&aE(o,e,n,r),r=r.parent}}function aE(t,e,n,o){const r=Qc(e,t,o,!0);fi(()=>{bu(o[e],r)},n)}function Qu(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Ju(t){return t.shapeFlag&128?t.ssContent:t}function Qc(t,e,n=Ft,o=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...s)=>{if(n.isUnmounted)return;Ji(),Cr(n);const a=Mn(e,n,t,s);return wr(),Xi(),a});return o?r.unshift(i):r.push(i),i}}const Wo=t=>(e,n=Ft)=>(!rs||t==="sp")&&Qc(t,(...o)=>e(...o),n),Xu=Wo("bm"),Ln=Wo("m"),ng=Wo("bu"),Jc=Wo("u"),ma=Wo("bum"),fi=Wo("um"),og=Wo("sp"),rg=Wo("rtg"),ig=Wo("rtc");function sg(t,e=Ft){Qc("ec",t,e)}function sn(t,e,n,o){let r;const i=n&&n[o];if(Ce(t)||kt(t)){r=new Array(t.length);for(let s=0,a=t.length;s<a;s++)r[s]=e(t[s],s,void 0,i&&i[s])}else if(typeof t=="number"){r=new Array(t);for(let s=0;s<t;s++)r[s]=e(s+1,s,void 0,i&&i[s])}else if(ft(t))if(t[Symbol.iterator])r=Array.from(t,(s,a)=>e(s,a,void 0,i&&i[a]));else{const s=Object.keys(t);r=new Array(s.length);for(let a=0,c=s.length;a<c;a++){const l=s[a];r[a]=e(t[l],l,a,i&&i[a])}}else r=[];return n&&(n[o]=r),r}function Xc(t,e){for(let n=0;n<e.length;n++){const o=e[n];if(Ce(o))for(let r=0;r<o.length;r++)t[o[r].name]=o[r].fn;else o&&(t[o.name]=o.key?(...r)=>{const i=o.fn(...r);return i&&(i.key=o.key),i}:o.fn)}return t}function mr(t,e,n={},o,r){if(Vt.isCE||Vt.parent&&pi(Vt.parent)&&Vt.parent.isCE)return e!=="default"&&(n.name=e),Oe("slot",n,o&&o());let i=t[e];i&&i._c&&(i._d=!1),Z();const s=i&&ag(i(n)),a=Ut(ze,{key:n.key||s&&s.key||`_${e}`},s||(o?o():[]),s&&t._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function ag(t){return t.some(e=>_r(e)?!(e.type===an||e.type===ze&&!ag(e.children)):!0)?t:null}function cE(t,e){const n={};for(const o in t)n[e&&/[A-Z]/.test(o)?`on:${o}`:ra(o)]=t[o];return n}const Zu=t=>t?Fg(t)?al(t)||t.proxy:Zu(t.parent):null,va=St(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zu(t.parent),$root:t=>Zu(t.root),$emit:t=>t.emit,$options:t=>oh(t),$forceUpdate:t=>t.f||(t.f=()=>qc(t.update)),$nextTick:t=>t.n||(t.n=ui.bind(t.proxy)),$watch:t=>nE.bind(t)}),eh=(t,e)=>t!==De&&!t.__isScriptSetup&&st(t,e),th={get({_:t},e){const{ctx:n,setupState:o,data:r,props:i,accessCache:s,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const p=s[e];if(p!==void 0)switch(p){case 1:return o[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(eh(o,e))return s[e]=1,o[e];if(r!==De&&st(r,e))return s[e]=2,r[e];if((l=t.propsOptions[0])&&st(l,e))return s[e]=3,i[e];if(n!==De&&st(n,e))return s[e]=4,n[e];nh&&(s[e]=0)}}const u=va[e];let h,d;if(u)return e==="$attrs"&&Cn(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==De&&st(n,e))return s[e]=4,n[e];if(d=c.config.globalProperties,st(d,e))return d[e]},set({_:t},e,n){const{data:o,setupState:r,ctx:i}=t;return eh(r,e)?(r[e]=n,!0):o!==De&&st(o,e)?(o[e]=n,!0):st(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:o,appContext:r,propsOptions:i}},s){let a;return!!n[s]||t!==De&&st(t,s)||eh(e,s)||(a=i[0])&&st(a,s)||st(o,s)||st(va,s)||st(r.config.globalProperties,s)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:st(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},lE=St({},th,{get(t,e){if(e!==Symbol.unscopables)return th.get(t,e,t)},has(t,e){return e[0]!=="_"&&!Kw(e)}});function uE(){return null}function hE(){return null}function dE(t){}function pE(t){}function fE(){return null}function gE(){}function mE(t,e){return null}function vE(){return lg().slots}function cg(){return lg().attrs}function yE(t,e,n){const o=kn();if(n&&n.local){const r=ye(t[e]);return Pt(()=>t[e],i=>r.value=i),Pt(r,i=>{i!==t[e]&&o.emit(`update:${e}`,i)}),r}else return{__v_isRef:!0,get value(){return t[e]},set value(r){o.emit(`update:${e}`,r)}}}function lg(){const t=kn();return t.setupContext||(t.setupContext=Bg(t))}function ya(t){return Ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function _E(t,e){const n=ya(t);for(const o in e){if(o.startsWith("__skip"))continue;let r=n[o];r?Ce(r)||Me(r)?r=n[o]={type:r,default:e[o]}:r.default=e[o]:r===null&&(r=n[o]={default:e[o]}),r&&e[`__skip_${o}`]&&(r.skipFactory=!0)}return n}function bE(t,e){return!t||!e?t||e:Ce(t)&&Ce(e)?t.concat(e):St({},ya(t),ya(e))}function CE(t,e){const n={};for(const o in t)e.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>t[o]});return n}function wE(t){const e=kn();let n=t();return wr(),Cu(n)&&(n=n.catch(o=>{throw Cr(e),o})),[n,()=>Cr(e)]}let nh=!0;function EE(t){const e=oh(t),n=t.proxy,o=t.ctx;nh=!1,e.beforeCreate&&ug(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:s,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:p,updated:m,activated:_,deactivated:T,beforeDestroy:b,beforeUnmount:C,destroyed:y,unmounted:v,render:w,renderTracked:A,renderTriggered:S,errorCaptured:E,serverPrefetch:O,expose:L,inheritAttrs:z,components:x,directives:j,filters:ae}=e;if(l&&TE(l,o,null),s)for(const G in s){const fe=s[G];Me(fe)&&(o[G]=fe.bind(n))}if(r){const G=r.call(n,n);ft(G)&&(t.data=fr(G))}if(nh=!0,i)for(const G in i){const fe=i[G],he=Me(fe)?fe.bind(n,n):Me(fe.get)?fe.get.bind(n,n):pn,Ye=!Me(fe)&&Me(fe.set)?fe.set.bind(n):pn,ke=Re({get:he,set:Ye});Object.defineProperty(o,G,{enumerable:!0,configurable:!0,get:()=>ke.value,set:Be=>ke.value=Be})}if(a)for(const G in a)hg(a[G],o,n,G);if(c){const G=Me(c)?c.call(n):c;Reflect.ownKeys(G).forEach(fe=>{Ca(fe,G[fe])})}u&&ug(u,t,"c");function ie(G,fe){Ce(fe)?fe.forEach(he=>G(he.bind(n))):fe&&G(fe.bind(n))}if(ie(Xu,h),ie(Ln,d),ie(ng,p),ie(Jc,m),ie(Zf,_),ie(eg,T),ie(sg,E),ie(ig,A),ie(rg,S),ie(ma,C),ie(fi,v),ie(og,O),Ce(L))if(L.length){const G=t.exposed||(t.exposed={});L.forEach(fe=>{Object.defineProperty(G,fe,{get:()=>n[fe],set:he=>n[fe]=he})})}else t.exposed||(t.exposed={});w&&t.render===pn&&(t.render=w),z!=null&&(t.inheritAttrs=z),x&&(t.components=x),j&&(t.directives=j)}function TE(t,e,n=pn){Ce(t)&&(t=rh(t));for(const o in t){const r=t[o];let i;ft(r)?"default"in r?i=En(r.from||o,r.default,!0):i=En(r.from||o):i=En(r),Mt(i)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:s=>i.value=s}):e[o]=i}}function ug(t,e,n){Mn(Ce(t)?t.map(o=>o.bind(e.proxy)):t.bind(e.proxy),e,n)}function hg(t,e,n,o){const r=o.includes(".")?Yf(n,o):()=>n[o];if(kt(t)){const i=e[t];Me(i)&&Pt(r,i)}else if(Me(t))Pt(r,t.bind(n));else if(ft(t))if(Ce(t))t.forEach(i=>hg(i,e,n,o));else{const i=Me(t.handler)?t.handler.bind(n):e[t.handler];Me(i)&&Pt(r,i,t)}}function oh(t){const e=t.type,{mixins:n,extends:o}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:s}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!n&&!o?c=e:(c={},r.length&&r.forEach(l=>Zc(c,l,s,!0)),Zc(c,e,s)),ft(e)&&i.set(e,c),c}function Zc(t,e,n,o=!1){const{mixins:r,extends:i}=e;i&&Zc(t,i,n,!0),r&&r.forEach(s=>Zc(t,s,n,!0));for(const s in e)if(!(o&&s==="expose")){const a=SE[s]||n&&n[s];t[s]=a?a(t[s],e[s]):e[s]}return t}const SE={data:dg,props:pg,emits:pg,methods:_a,computed:_a,beforeCreate:fn,created:fn,beforeMount:fn,mounted:fn,beforeUpdate:fn,updated:fn,beforeDestroy:fn,beforeUnmount:fn,destroyed:fn,unmounted:fn,activated:fn,deactivated:fn,errorCaptured:fn,serverPrefetch:fn,components:_a,directives:_a,watch:AE,provide:dg,inject:kE};function dg(t,e){return e?t?function(){return St(Me(t)?t.call(this,this):t,Me(e)?e.call(this,this):e)}:e:t}function kE(t,e){return _a(rh(t),rh(e))}function rh(t){if(Ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function fn(t,e){return t?[...new Set([].concat(t,e))]:e}function _a(t,e){return t?St(Object.create(null),t,e):e}function pg(t,e){return t?Ce(t)&&Ce(e)?[...new Set([...t,...e])]:St(Object.create(null),ya(t),ya(e??{})):e}function AE(t,e){if(!t)return e;if(!e)return t;const n=St(Object.create(null),t);for(const o in e)n[o]=fn(t[o],e[o]);return n}function fg(){return{app:null,config:{isNativeTag:yu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let IE=0;function RE(t,e){return function(n,o=null){Me(n)||(n=St({},n)),o!=null&&!ft(o)&&(o=null);const r=fg(),i=new WeakSet;let s=!1;const a=r.app={_uid:IE++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:zg,get config(){return r.config},set config(c){},use(c,...l){return i.has(c)||(c&&Me(c.install)?(i.add(c),c.install(a,...l)):Me(c)&&(i.add(c),c(a,...l))),a},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),a},component(c,l){return l?(r.components[c]=l,a):r.components[c]},directive(c,l){return l?(r.directives[c]=l,a):r.directives[c]},mount(c,l,u){if(!s){const h=Oe(n,o);return h.appContext=r,l&&e?e(h,c):t(h,c,u),s=!0,a._container=c,c.__vue_app__=a,al(h.component)||h.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide(c,l){return r.provides[c]=l,a},runWithContext(c){ba=a;try{return c()}finally{ba=null}}};return a}}let ba=null;function Ca(t,e){if(Ft){let n=Ft.provides;const o=Ft.parent&&Ft.parent.provides;o===n&&(n=Ft.provides=Object.create(o)),n[t]=e}}function En(t,e,n=!1){const o=Ft||Vt;if(o||ba){const r=o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:ba._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Me(e)?e.call(o&&o.proxy):e}}function gg(){return!!(Ft||Vt||ba)}function OE(t,e,n,o=!1){const r={},i={};kc(i,rl,1),t.propsDefaults=Object.create(null),mg(t,e,r,i);for(const s in t.propsOptions[0])s in r||(r[s]=void 0);n?t.props=o?r:Nu(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function NE(t,e,n,o){const{props:r,attrs:i,vnode:{patchFlag:s}}=t,a=ot(r),[c]=t.propsOptions;let l=!1;if((o||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if($c(t.emitsOptions,d))continue;const p=e[d];if(c)if(st(i,d))p!==i[d]&&(i[d]=p,l=!0);else{const m=bn(d);r[m]=ih(c,a,m,p,t,!1)}else p!==i[d]&&(i[d]=p,l=!0)}}}else{mg(t,e,r,i)&&(l=!0);let u;for(const h in a)(!e||!st(e,h)&&((u=Kn(h))===h||!st(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=ih(c,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!st(e,h))&&(delete i[h],l=!0)}l&&jo(t,"set","$attrs")}function mg(t,e,n,o){const[r,i]=t.propsOptions;let s=!1,a;if(e)for(let c in e){if(na(c))continue;const l=e[c];let u;r&&st(r,u=bn(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:$c(t.emitsOptions,c)||(!(c in o)||l!==o[c])&&(o[c]=l,s=!0)}if(i){const c=ot(n),l=a||De;for(let u=0;u<i.length;u++){const h=i[u];n[h]=ih(r,c,h,l[h],t,!st(l,h))}}return s}function ih(t,e,n,o,r,i){const s=t[n];if(s!=null){const a=st(s,"default");if(a&&o===void 0){const c=s.default;if(s.type!==Function&&!s.skipFactory&&Me(c)){const{propsDefaults:l}=r;n in l?o=l[n]:(Cr(r),o=l[n]=c.call(null,e),wr())}else o=c}s[0]&&(i&&!a?o=!1:s[1]&&(o===""||o===Kn(n))&&(o=!0))}return o}function vg(t,e,n=!1){const o=e.propsCache,r=o.get(t);if(r)return r;const i=t.props,s={},a=[];let c=!1;if(!Me(t)){const u=h=>{c=!0;const[d,p]=vg(h,e,!0);St(s,d),p&&a.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return ft(t)&&o.set(t,Lt),Lt;if(Ce(i))for(let u=0;u<i.length;u++){const h=bn(i[u]);yg(h)&&(s[h]=De)}else if(i)for(const u in i){const h=bn(u);if(yg(h)){const d=i[u],p=s[h]=Ce(d)||Me(d)?{type:d}:St({},d);if(p){const m=Cg(Boolean,p.type),_=Cg(String,p.type);p[0]=m>-1,p[1]=_<0||m<_,(m>-1||st(p,"default"))&&a.push(h)}}}const l=[s,a];return ft(t)&&o.set(t,l),l}function yg(t){return t[0]!=="$"}function _g(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function bg(t,e){return _g(t)===_g(e)}function Cg(t,e){return Ce(e)?e.findIndex(n=>bg(n,t)):Me(e)&&bg(e,t)?0:-1}const wg=t=>t[0]==="_"||t==="$stable",sh=t=>Ce(t)?t.map(Dn):[Dn(t)],xE=(t,e,n)=>{if(e._n)return e;const o=wt((...r)=>sh(e(...r)),n);return o._c=!1,o},Eg=(t,e,n)=>{const o=t._ctx;for(const r in t){if(wg(r))continue;const i=t[r];if(Me(i))e[r]=xE(r,i,o);else if(i!=null){const s=sh(i);e[r]=()=>s}}},Tg=(t,e)=>{const n=sh(e);t.slots.default=()=>n},PE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=ot(e),kc(e,"_",n)):Eg(e,t.slots={})}else t.slots={},e&&Tg(t,e);kc(t.slots,rl,1)},ME=(t,e,n)=>{const{vnode:o,slots:r}=t;let i=!0,s=De;if(o.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(St(r,e),!n&&a===1&&delete r._):(i=!e.$stable,Eg(e,r)),s=e}else e&&(Tg(t,e),s={default:1});if(i)for(const a in r)!wg(a)&&s[a]==null&&delete r[a]};function el(t,e,n,o,r=!1){if(Ce(t)){t.forEach((d,p)=>el(d,e&&(Ce(e)?e[p]:e),n,o,r));return}if(pi(o)&&!r)return;const i=o.shapeFlag&4?al(o.component)||o.component.proxy:o.el,s=r?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===De?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(kt(l)?(u[l]=null,st(h,l)&&(h[l]=null)):Mt(l)&&(l.value=null)),Me(c))$o(c,a,12,[s,u]);else{const d=kt(c),p=Mt(c);if(d||p){const m=()=>{if(t.f){const _=d?st(h,c)?h[c]:u[c]:c.value;r?Ce(_)&&bu(_,i):Ce(_)?_.includes(i)||_.push(i):d?(u[c]=[i],st(h,c)&&(h[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else d?(u[c]=s,st(h,c)&&(h[c]=s)):p&&(c.value=s,t.k&&(u[t.k]=s))};s?(m.id=-1,Zt(m,n)):m()}}}let vr=!1;const tl=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",nl=t=>t.nodeType===8;function LE(t){const{mt:e,p:n,o:{patchProp:o,createText:r,nextSibling:i,parentNode:s,remove:a,insert:c,createComment:l}}=t,u=(y,v)=>{if(!v.hasChildNodes()){n(null,y,v),Kc(),v._vnode=y;return}vr=!1,h(v.firstChild,y,null,null,null),Kc(),v._vnode=y,vr&&console.error("Hydration completed but contains mismatches.")},h=(y,v,w,A,S,E=!1)=>{const O=nl(y)&&y.data==="[",L=()=>_(y,v,w,A,S,O),{type:z,ref:x,shapeFlag:j,patchFlag:ae}=v;let ie=y.nodeType;v.el=y,ae===-2&&(E=!1,v.dynamicChildren=null);let G=null;switch(z){case yr:ie!==3?v.children===""?(c(v.el=r(""),s(y),y),G=y):G=L():(y.data!==v.children&&(vr=!0,y.data=v.children),G=i(y));break;case an:C(y)?(G=i(y),b(v.el=y.content.firstChild,y,w)):ie!==8||O?G=L():G=i(y);break;case mi:if(O&&(y=i(y),ie=y.nodeType),ie===1||ie===3){G=y;const fe=!v.children.length;for(let he=0;he<v.staticCount;he++)fe&&(v.children+=G.nodeType===1?G.outerHTML:G.data),he===v.staticCount-1&&(v.anchor=G),G=i(G);return O?i(G):G}else L();break;case ze:O?G=m(y,v,w,A,S,E):G=L();break;default:if(j&1)(ie!==1||v.type.toLowerCase()!==y.tagName.toLowerCase())&&!C(y)?G=L():G=d(y,v,w,A,S,E);else if(j&6){v.slotScopeIds=S;const fe=s(y);if(O?G=T(y):nl(y)&&y.data==="teleport start"?G=T(y,y.data,"teleport end"):G=i(y),e(v,fe,null,w,A,tl(fe),E),pi(v)){let he;O?(he=Oe(ze),he.anchor=G?G.previousSibling:fe.lastChild):he=y.nodeType===3?$n(""):Oe("div"),he.el=y,v.component.subTree=he}}else j&64?ie!==8?G=L():G=v.type.hydrate(y,v,w,A,S,E,t,p):j&128&&(G=v.type.hydrate(y,v,w,A,tl(s(y)),S,E,t,h))}return x!=null&&el(x,null,A,v),G},d=(y,v,w,A,S,E)=>{E=E||!!v.dynamicChildren;const{type:O,props:L,patchFlag:z,shapeFlag:x,dirs:j,transition:ae}=v,ie=O==="input"&&j||O==="option";if(ie||z!==-1){if(j&&To(v,null,w,"created"),L)if(ie||!E||z&48)for(const he in L)(ie&&he.endsWith("value")||ta(he)&&!na(he))&&o(y,he,null,L[he],!1,void 0,w);else L.onClick&&o(y,"onClick",null,L.onClick,!1,void 0,w);let G;(G=L&&L.onVnodeBeforeMount)&&Sn(G,w,v);let fe=!1;if(C(y)){fe=Ig(A,ae)&&w&&w.vnode.props&&w.vnode.props.appear;const he=y.content.firstChild;fe&&ae.beforeEnter(he),b(he,y,w),v.el=y=he}if(j&&To(v,null,w,"beforeMount"),((G=L&&L.onVnodeMounted)||j||fe)&&Gf(()=>{G&&Sn(G,w,v),fe&&ae.enter(y),j&&To(v,null,w,"mounted")},A),x&16&&!(L&&(L.innerHTML||L.textContent))){let he=p(y.firstChild,v,y,w,A,S,E);for(;he;){vr=!0;const Ye=he;he=he.nextSibling,a(Ye)}}else x&8&&y.textContent!==v.children&&(vr=!0,y.textContent=v.children)}return y.nextSibling},p=(y,v,w,A,S,E,O)=>{O=O||!!v.dynamicChildren;const L=v.children,z=L.length;for(let x=0;x<z;x++){const j=O?L[x]:L[x]=Dn(L[x]);if(y)y=h(y,j,A,S,E,O);else{if(j.type===yr&&!j.children)continue;vr=!0,n(null,j,w,null,A,S,tl(w),E)}}return y},m=(y,v,w,A,S,E)=>{const{slotScopeIds:O}=v;O&&(S=S?S.concat(O):O);const L=s(y),z=p(i(y),v,L,w,A,S,E);return z&&nl(z)&&z.data==="]"?i(v.anchor=z):(vr=!0,c(v.anchor=l("]"),L,z),z)},_=(y,v,w,A,S,E)=>{if(vr=!0,v.el=null,E){const z=T(y);for(;;){const x=i(y);if(x&&x!==z)a(x);else break}}const O=i(y),L=s(y);return a(y),n(null,v,L,O,w,A,tl(L),S),O},T=(y,v="[",w="]")=>{let A=0;for(;y;)if(y=i(y),y&&nl(y)&&(y.data===v&&A++,y.data===w)){if(A===0)return i(y);A--}return y},b=(y,v,w)=>{const A=v.parentNode;A&&A.replaceChild(y,v);let S=w;for(;S;)S.vnode.el===v&&(S.vnode.el=S.subTree.el=y),S=S.parent},C=y=>y.nodeType===1&&y.tagName.toLowerCase()==="template";return[u,h]}const Zt=Gf;function Sg(t){return Ag(t)}function kg(t){return Ag(t,LE)}function Ag(t,e){const n=Eu();n.__VUE__=!0;const{insert:o,remove:r,patchProp:i,createElement:s,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:p=pn,insertStaticContent:m}=t,_=(I,f,g,k=null,U=null,H=null,Y=!1,ne=null,re=!!f.dynamicChildren)=>{if(I===f)return;I&&!uo(I,f)&&(k=$(I),nt(I,U,H,!0),I=null),f.patchFlag===-2&&(re=!1,f.dynamicChildren=null);const{type:Q,ref:P,shapeFlag:q}=f;switch(Q){case yr:T(I,f,g,k);break;case an:b(I,f,g,k);break;case mi:I==null&&C(f,g,k,Y);break;case ze:x(I,f,g,k,U,H,Y,ne,re);break;default:q&1?w(I,f,g,k,U,H,Y,ne,re):q&6?j(I,f,g,k,U,H,Y,ne,re):(q&64||q&128)&&Q.process(I,f,g,k,U,H,Y,ne,re,se)}P!=null&&U&&el(P,I&&I.ref,H,f||I,!f)},T=(I,f,g,k)=>{if(I==null)o(f.el=a(f.children),g,k);else{const U=f.el=I.el;f.children!==I.children&&l(U,f.children)}},b=(I,f,g,k)=>{I==null?o(f.el=c(f.children||""),g,k):f.el=I.el},C=(I,f,g,k)=>{[I.el,I.anchor]=m(I.children,f,g,k,I.el,I.anchor)},y=({el:I,anchor:f},g,k)=>{let U;for(;I&&I!==f;)U=d(I),o(I,g,k),I=U;o(f,g,k)},v=({el:I,anchor:f})=>{let g;for(;I&&I!==f;)g=d(I),r(I),I=g;r(f)},w=(I,f,g,k,U,H,Y,ne,re)=>{Y=Y||f.type==="svg",I==null?A(f,g,k,U,H,Y,ne,re):O(I,f,U,H,Y,ne,re)},A=(I,f,g,k,U,H,Y,ne)=>{let re,Q;const{type:P,props:q,shapeFlag:ce,transition:be,dirs:Ue}=I;if(re=I.el=s(I.type,H,q&&q.is,q),ce&8?u(re,I.children):ce&16&&E(I.children,re,null,k,U,H&&P!=="foreignObject",Y,ne),Ue&&To(I,null,k,"created"),S(re,I,I.scopeId,Y,k),q){for(const Je in q)Je!=="value"&&!na(Je)&&i(re,Je,null,q[Je],H,I.children,k,U,ct);"value"in q&&i(re,"value",null,q.value),(Q=q.onVnodeBeforeMount)&&Sn(Q,k,I)}Ue&&To(I,null,k,"beforeMount");const ht=Ig(U,be);ht&&be.beforeEnter(re),o(re,f,g),((Q=q&&q.onVnodeMounted)||ht||Ue)&&Zt(()=>{Q&&Sn(Q,k,I),ht&&be.enter(re),Ue&&To(I,null,k,"mounted")},U)},S=(I,f,g,k,U)=>{if(g&&p(I,g),k)for(let H=0;H<k.length;H++)p(I,k[H]);if(U){let H=U.subTree;if(f===H){const Y=U.vnode;S(I,Y,Y.scopeId,Y.slotScopeIds,U.parent)}}},E=(I,f,g,k,U,H,Y,ne,re=0)=>{for(let Q=re;Q<I.length;Q++){const P=I[Q]=ne?br(I[Q]):Dn(I[Q]);_(null,P,f,g,k,U,H,Y,ne)}},O=(I,f,g,k,U,H,Y)=>{const ne=f.el=I.el;let{patchFlag:re,dynamicChildren:Q,dirs:P}=f;re|=I.patchFlag&16;const q=I.props||De,ce=f.props||De;let be;g&&gi(g,!1),(be=ce.onVnodeBeforeUpdate)&&Sn(be,g,f,I),P&&To(f,I,g,"beforeUpdate"),g&&gi(g,!0);const Ue=U&&f.type!=="foreignObject";if(Q?L(I.dynamicChildren,Q,ne,g,k,Ue,H):Y||he(I,f,ne,null,g,k,Ue,H,!1),re>0){if(re&16)z(ne,f,q,ce,g,k,U);else if(re&2&&q.class!==ce.class&&i(ne,"class",null,ce.class,U),re&4&&i(ne,"style",q.style,ce.style,U),re&8){const ht=f.dynamicProps;for(let Je=0;Je<ht.length;Je++){const Nt=ht[Je],xn=q[Nt],ni=ce[Nt];(ni!==xn||Nt==="value")&&i(ne,Nt,xn,ni,U,I.children,g,k,ct)}}re&1&&I.children!==f.children&&u(ne,f.children)}else!Y&&Q==null&&z(ne,f,q,ce,g,k,U);((be=ce.onVnodeUpdated)||P)&&Zt(()=>{be&&Sn(be,g,f,I),P&&To(f,I,g,"updated")},k)},L=(I,f,g,k,U,H,Y)=>{for(let ne=0;ne<f.length;ne++){const re=I[ne],Q=f[ne],P=re.el&&(re.type===ze||!uo(re,Q)||re.shapeFlag&70)?h(re.el):g;_(re,Q,P,null,k,U,H,Y,!0)}},z=(I,f,g,k,U,H,Y)=>{if(g!==k){if(g!==De)for(const ne in g)!na(ne)&&!(ne in k)&&i(I,ne,g[ne],null,Y,f.children,U,H,ct);for(const ne in k){if(na(ne))continue;const re=k[ne],Q=g[ne];re!==Q&&ne!=="value"&&i(I,ne,Q,re,Y,f.children,U,H,ct)}"value"in k&&i(I,"value",g.value,k.value)}},x=(I,f,g,k,U,H,Y,ne,re)=>{const Q=f.el=I?I.el:a(""),P=f.anchor=I?I.anchor:a("");let{patchFlag:q,dynamicChildren:ce,slotScopeIds:be}=f;be&&(ne=ne?ne.concat(be):be),I==null?(o(Q,g,k),o(P,g,k),E(f.children,g,P,U,H,Y,ne,re)):q>0&&q&64&&ce&&I.dynamicChildren?(L(I.dynamicChildren,ce,g,U,H,Y,ne),(f.key!=null||U&&f===U.subTree)&&ah(I,f,!0)):he(I,f,g,P,U,H,Y,ne,re)},j=(I,f,g,k,U,H,Y,ne,re)=>{f.slotScopeIds=ne,I==null?f.shapeFlag&512?U.ctx.activate(f,g,k,Y,re):ae(f,g,k,U,H,Y,re):ie(I,f,re)},ae=(I,f,g,k,U,H,Y)=>{const ne=I.component=Dg(I,k,U);if(fa(I)&&(ne.ctx.renderer=se),Hg(ne),ne.asyncDep){if(U&&U.registerDep(ne,G),!I.el){const re=ne.subTree=Oe(an);b(null,re,f,g)}return}G(ne,I,f,g,U,H,Y)},ie=(I,f,g)=>{const k=f.component=I.component;if(z0(I,f,g))if(k.asyncDep&&!k.asyncResolved){fe(k,f,g);return}else k.next=f,D0(k.update),k.update();else f.el=I.el,k.vnode=f},G=(I,f,g,k,U,H,Y)=>{const ne=()=>{if(I.isMounted){let{next:P,bu:q,u:ce,parent:be,vnode:Ue}=I,ht=P,Je;gi(I,!1),P?(P.el=Ue.el,fe(I,P,Y)):P=Ue,q&&Yi(q),(Je=P.props&&P.props.onVnodeBeforeUpdate)&&Sn(Je,be,P,Ue),gi(I,!0);const Nt=Wc(I),xn=I.subTree;I.subTree=Nt,_(xn,Nt,h(xn.el),$(xn),I,U,H),P.el=Nt.el,ht===null&&Bu(I,Nt.el),ce&&Zt(ce,U),(Je=P.props&&P.props.onVnodeUpdated)&&Zt(()=>Sn(Je,be,P,Ue),U)}else{let P;const{el:q,props:ce}=f,{bm:be,m:Ue,parent:ht}=I,Je=pi(f);if(gi(I,!1),be&&Yi(be),!Je&&(P=ce&&ce.onVnodeBeforeMount)&&Sn(P,ht,f),gi(I,!0),q&&We){const Nt=()=>{I.subTree=Wc(I),We(q,I.subTree,I,U,null)};Je?f.type.__asyncLoader().then(()=>!I.isUnmounted&&Nt()):Nt()}else{const Nt=I.subTree=Wc(I);_(null,Nt,g,k,I,U,H),f.el=Nt.el}if(Ue&&Zt(Ue,U),!Je&&(P=ce&&ce.onVnodeMounted)){const Nt=f;Zt(()=>Sn(P,ht,Nt),U)}(f.shapeFlag&256||ht&&pi(ht.vnode)&&ht.vnode.shapeFlag&256)&&I.a&&Zt(I.a,U),I.isMounted=!0,f=g=k=null}},re=I.effect=new Qi(ne,()=>qc(Q),I.scope),Q=I.update=()=>re.run();Q.id=I.uid,gi(I,!0),Q()},fe=(I,f,g)=>{f.component=I;const k=I.vnode.props;I.vnode=f,I.next=null,NE(I,f.props,k,g),ME(I,f.children,g),Ji(),Uf(),Xi()},he=(I,f,g,k,U,H,Y,ne,re=!1)=>{const Q=I&&I.children,P=I?I.shapeFlag:0,q=f.children,{patchFlag:ce,shapeFlag:be}=f;if(ce>0){if(ce&128){ke(Q,q,g,k,U,H,Y,ne,re);return}else if(ce&256){Ye(Q,q,g,k,U,H,Y,ne,re);return}}be&8?(P&16&&ct(Q,U,H),q!==Q&&u(g,q)):P&16?be&16?ke(Q,q,g,k,U,H,Y,ne,re):ct(Q,U,H,!0):(P&8&&u(g,""),be&16&&E(q,g,k,U,H,Y,ne,re))},Ye=(I,f,g,k,U,H,Y,ne,re)=>{I=I||Lt,f=f||Lt;const Q=I.length,P=f.length,q=Math.min(Q,P);let ce;for(ce=0;ce<q;ce++){const be=f[ce]=re?br(f[ce]):Dn(f[ce]);_(I[ce],be,g,null,U,H,Y,ne,re)}Q>P?ct(I,U,H,!0,!1,q):E(f,g,k,U,H,Y,ne,re,q)},ke=(I,f,g,k,U,H,Y,ne,re)=>{let Q=0;const P=f.length;let q=I.length-1,ce=P-1;for(;Q<=q&&Q<=ce;){const be=I[Q],Ue=f[Q]=re?br(f[Q]):Dn(f[Q]);if(uo(be,Ue))_(be,Ue,g,null,U,H,Y,ne,re);else break;Q++}for(;Q<=q&&Q<=ce;){const be=I[q],Ue=f[ce]=re?br(f[ce]):Dn(f[ce]);if(uo(be,Ue))_(be,Ue,g,null,U,H,Y,ne,re);else break;q--,ce--}if(Q>q){if(Q<=ce){const be=ce+1,Ue=be<P?f[be].el:k;for(;Q<=ce;)_(null,f[Q]=re?br(f[Q]):Dn(f[Q]),g,Ue,U,H,Y,ne,re),Q++}}else if(Q>ce)for(;Q<=q;)nt(I[Q],U,H,!0),Q++;else{const be=Q,Ue=Q,ht=new Map;for(Q=Ue;Q<=ce;Q++){const _n=f[Q]=re?br(f[Q]):Dn(f[Q]);_n.key!=null&&ht.set(_n.key,Q)}let Je,Nt=0;const xn=ce-Ue+1;let ni=!1,hu=0;const zi=new Array(xn);for(Q=0;Q<xn;Q++)zi[Q]=0;for(Q=be;Q<=q;Q++){const _n=I[Q];if(Nt>=xn){nt(_n,U,H,!0);continue}let ro;if(_n.key!=null)ro=ht.get(_n.key);else for(Je=Ue;Je<=ce;Je++)if(zi[Je-Ue]===0&&uo(_n,f[Je])){ro=Je;break}ro===void 0?nt(_n,U,H,!0):(zi[ro-Ue]=Q+1,ro>=hu?hu=ro:ni=!0,_(_n,f[ro],g,null,U,H,Y,ne,re),Nt++)}const du=ni?DE(zi):Lt;for(Je=du.length-1,Q=xn-1;Q>=0;Q--){const _n=Ue+Q,ro=f[_n],pu=_n+1<P?f[_n+1].el:k;zi[Q]===0?_(null,ro,g,pu,U,H,Y,ne,re):ni&&(Je<0||Q!==du[Je]?Be(ro,g,pu,2):Je--)}}},Be=(I,f,g,k,U=null)=>{const{el:H,type:Y,transition:ne,children:re,shapeFlag:Q}=I;if(Q&6){Be(I.component.subTree,f,g,k);return}if(Q&128){I.suspense.move(f,g,k);return}if(Q&64){Y.move(I,f,g,se);return}if(Y===ze){o(H,f,g);for(let P=0;P<re.length;P++)Be(re[P],f,g,k);o(I.anchor,f,g);return}if(Y===mi){y(I,f,g);return}if(k!==2&&Q&1&&ne)if(k===0)ne.beforeEnter(H),o(H,f,g),Zt(()=>ne.enter(H),U);else{const{leave:P,delayLeave:q,afterLeave:ce}=ne,be=()=>o(H,f,g),Ue=()=>{P(H,()=>{be(),ce&&ce()})};q?q(H,be,Ue):Ue()}else o(H,f,g)},nt=(I,f,g,k=!1,U=!1)=>{const{type:H,props:Y,ref:ne,children:re,dynamicChildren:Q,shapeFlag:P,patchFlag:q,dirs:ce}=I;if(ne!=null&&el(ne,null,g,I,!0),P&256){f.ctx.deactivate(I);return}const be=P&1&&ce,Ue=!pi(I);let ht;if(Ue&&(ht=Y&&Y.onVnodeBeforeUnmount)&&Sn(ht,f,I),P&6)it(I.component,g,k);else{if(P&128){I.suspense.unmount(g,k);return}be&&To(I,null,f,"beforeUnmount"),P&64?I.type.remove(I,f,g,U,se,k):Q&&(H!==ze||q>0&&q&64)?ct(Q,f,g,!1,!0):(H===ze&&q&384||!U&&P&16)&&ct(re,f,g),k&&Pe(I)}(Ue&&(ht=Y&&Y.onVnodeUnmounted)||be)&&Zt(()=>{ht&&Sn(ht,f,I),be&&To(I,null,f,"unmounted")},g)},Pe=I=>{const{type:f,el:g,anchor:k,transition:U}=I;if(f===ze){He(g,k);return}if(f===mi){v(I);return}const H=()=>{r(g),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(I.shapeFlag&1&&U&&!U.persisted){const{leave:Y,delayLeave:ne}=U,re=()=>Y(g,H);ne?ne(I.el,H,re):re()}else H()},He=(I,f)=>{let g;for(;I!==f;)g=d(I),r(I),I=g;r(f)},it=(I,f,g)=>{const{bum:k,scope:U,update:H,subTree:Y,um:ne}=I;k&&Yi(k),U.stop(),H&&(H.active=!1,nt(Y,I,f,g)),ne&&Zt(ne,f),Zt(()=>{I.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},ct=(I,f,g,k=!1,U=!1,H=0)=>{for(let Y=H;Y<I.length;Y++)nt(I[Y],f,g,k,U)},$=I=>I.shapeFlag&6?$(I.component.subTree):I.shapeFlag&128?I.suspense.next():d(I.anchor||I.el),le=(I,f,g)=>{I==null?f._vnode&&nt(f._vnode,null,null,!0):_(f._vnode||null,I,f,null,null,null,g),Uf(),Kc(),f._vnode=I},se={p:_,um:nt,m:Be,r:Pe,mt:ae,mc:E,pc:he,pbc:L,n:$,o:t};let _e,We;return e&&([_e,We]=e(se)),{render:le,hydrate:_e,createApp:RE(le,_e)}}function gi({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Ig(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ah(t,e,n=!1){const o=t.children,r=e.children;if(Ce(o)&&Ce(r))for(let i=0;i<o.length;i++){const s=o[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=br(r[i]),a.el=s.el),n||ah(s,a)),a.type===yr&&(a.el=s.el)}}function DE(t){const e=t.slice(),n=[0];let o,r,i,s,a;const c=t.length;for(o=0;o<c;o++){const l=t[o];if(l!==0){if(r=n[n.length-1],t[r]<l){e[o]=r,n.push(o);continue}for(i=0,s=n.length-1;i<s;)a=i+s>>1,t[n[a]]<l?i=a+1:s=a;l<t[n[i]]&&(i>0&&(e[o]=n[i-1]),n[i]=o)}}for(i=n.length,s=n[i-1];i-- >0;)n[i]=s,s=e[s];return n}const UE=t=>t.__isTeleport,wa=t=>t&&(t.disabled||t.disabled===""),Rg=t=>typeof SVGElement<"u"&&t instanceof SVGElement,ch=(t,e)=>{const n=t&&t.to;return kt(n)?e?e(n):null:n},FE={__isTeleport:!0,process(t,e,n,o,r,i,s,a,c,l){const{mc:u,pc:h,pbc:d,o:{insert:p,querySelector:m,createText:_,createComment:T}}=l,b=wa(e.props);let{shapeFlag:C,children:y,dynamicChildren:v}=e;if(t==null){const w=e.el=_(""),A=e.anchor=_("");p(w,n,o),p(A,n,o);const S=e.target=ch(e.props,m),E=e.targetAnchor=_("");S&&(p(E,S),s=s||Rg(S));const O=(L,z)=>{C&16&&u(y,L,z,r,i,s,a,c)};b?O(n,A):S&&O(S,E)}else{e.el=t.el;const w=e.anchor=t.anchor,A=e.target=t.target,S=e.targetAnchor=t.targetAnchor,E=wa(t.props),O=E?n:A,L=E?w:S;if(s=s||Rg(A),v?(d(t.dynamicChildren,v,O,r,i,s,a),ah(t,e,!0)):c||h(t,e,O,L,r,i,s,a,!1),b)E?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):ol(e,n,w,l,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const z=e.target=ch(e.props,m);z&&ol(e,z,null,l,0)}else E&&ol(e,A,S,l,1)}Og(e)},remove(t,e,n,o,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:c,anchor:l,targetAnchor:u,target:h,props:d}=t;if(h&&i(u),s&&i(l),a&16){const p=s||!wa(d);for(let m=0;m<c.length;m++){const _=c[m];r(_,e,n,p,!!_.dynamicChildren)}}},move:ol,hydrate:HE};function ol(t,e,n,{o:{insert:o},m:r},i=2){i===0&&o(t.targetAnchor,e,n);const{el:s,anchor:a,shapeFlag:c,children:l,props:u}=t,h=i===2;if(h&&o(s,e,n),(!h||wa(u))&&c&16)for(let d=0;d<l.length;d++)r(l[d],e,n,2);h&&o(a,e,n)}function HE(t,e,n,o,r,i,{o:{nextSibling:s,parentNode:a,querySelector:c}},l){const u=e.target=ch(e.props,c);if(u){const h=u._lpa||u.firstChild;if(e.shapeFlag&16)if(wa(e.props))e.anchor=l(s(t),e,a(t),n,o,r,i),e.targetAnchor=h;else{e.anchor=s(t);let d=h;for(;d;)if(d=s(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,u._lpa=e.targetAnchor&&s(e.targetAnchor);break}l(h,e,u,n,o,r,i)}Og(e)}return e.anchor&&s(e.anchor)}const qE=FE;function Og(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const ze=Symbol.for("v-fgt"),yr=Symbol.for("v-txt"),an=Symbol.for("v-cmt"),mi=Symbol.for("v-stc"),Ea=[];let Tn=null;function Z(t=!1){Ea.push(Tn=t?null:[])}function Ng(){Ea.pop(),Tn=Ea[Ea.length-1]||null}let vi=1;function lh(t){vi+=t}function xg(t){return t.dynamicChildren=vi>0?Tn||Lt:null,Ng(),vi>0&&Tn&&Tn.push(t),t}function oe(t,e,n,o,r,i){return xg(M(t,e,n,o,r,i,!0))}function Ut(t,e,n,o,r){return xg(Oe(t,e,n,o,r,!0))}function _r(t){return t?t.__v_isVNode===!0:!1}function uo(t,e){return t.type===e.type&&t.key===e.key}function BE(t){}const rl="__vInternal",Pg=({key:t})=>t??null,il=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?kt(t)||Mt(t)||Me(t)?{i:Vt,r:t,k:e,f:!!n}:t:null);function M(t,e=null,n=null,o=0,r=null,i=t===ze?0:1,s=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Pg(e),ref:e&&il(e),scopeId:zc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Vt};return a?(uh(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=kt(n)?8:16),vi>0&&!s&&Tn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Tn.push(c),c}const Oe=KE;function KE(t,e=null,n=null,o=0,r=null,i=!1){if((!t||t===Kf)&&(t=an),_r(t)){const a=So(t,e,!0);return n&&uh(a,n),vi>0&&!i&&Tn&&(a.shapeFlag&6?Tn[Tn.indexOf(t)]=a:Tn.push(a)),a.patchFlag|=-2,a}if(QE(t)&&(t=t.__vccOpts),e){e=Mg(e);let{class:a,style:c}=e;a&&!kt(a)&&(e.class=ao(a)),ft(c)&&(xu(c)&&!Ce(c)&&(c=St({},c)),e.style=so(c))}const s=kt(t)?1:zf(t)?128:UE(t)?64:ft(t)?4:Me(t)?2:0;return M(t,e,n,o,r,s,i,!0)}function Mg(t){return t?xu(t)||rl in t?St({},t):t:null}function So(t,e,n=!1){const{props:o,ref:r,patchFlag:i,children:s}=t,a=e?Lg(o||{},e):o;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Pg(a),ref:e&&e.ref?n&&r?Ce(r)?r.concat(il(e)):[r,il(e)]:il(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ze?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&So(t.ssContent),ssFallback:t.ssFallback&&So(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function $n(t=" ",e=0){return Oe(yr,null,t,e)}function jE(t,e){const n=Oe(mi,null,t);return n.staticCount=e,n}function Ge(t="",e=!1){return e?(Z(),Ut(an,null,t)):Oe(an,null,t)}function Dn(t){return t==null||typeof t=="boolean"?Oe(an):Ce(t)?Oe(ze,null,t.slice()):typeof t=="object"?br(t):Oe(yr,null,String(t))}function br(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:So(t)}function uh(t,e){let n=0;const{shapeFlag:o}=t;if(e==null)e=null;else if(Ce(e))n=16;else if(typeof e=="object")if(o&65){const r=e.default;r&&(r._c&&(r._d=!1),uh(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(rl in e)?e._ctx=Vt:r===3&&Vt&&(Vt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Me(e)?(e={default:e,_ctx:Vt},n=32):(e=String(e),o&64?(n=16,e=[$n(e)]):n=8);t.children=e,t.shapeFlag|=n}function Lg(...t){const e={};for(let n=0;n<t.length;n++){const o=t[n];for(const r in o)if(r==="class")e.class!==o.class&&(e.class=ao([e.class,o.class]));else if(r==="style")e.style=so([e.style,o.style]);else if(ta(r)){const i=e[r],s=o[r];s&&i!==s&&!(Ce(i)&&i.includes(s))&&(e[r]=i?[].concat(i,s):s)}else r!==""&&(e[r]=o[r])}return e}function Sn(t,e,n,o=null){Mn(t,e,7,[n,o])}const $E=fg();let zE=0;function Dg(t,e,n){const o=t.type,r=(e?e.appContext:t.appContext)||$E,i={uid:zE++,vnode:t,type:o,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Tu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vg(o,r),emitsOptions:qf(o,r),emit:null,emitted:null,propsDefaults:De,inheritAttrs:o.inheritAttrs,ctx:De,data:De,props:De,attrs:De,slots:De,refs:De,setupState:De,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=F0.bind(null,i),t.ce&&t.ce(i),i}let Ft=null;const kn=()=>Ft||Vt;let hh,os,Ug="__VUE_INSTANCE_SETTERS__";(os=Eu()[Ug])||(os=Eu()[Ug]=[]),os.push(t=>Ft=t),hh=t=>{os.length>1?os.forEach(e=>e(t)):os[0](t)};const Cr=t=>{hh(t),t.scope.on()},wr=()=>{Ft&&Ft.scope.off(),hh(null)};function Fg(t){return t.vnode.shapeFlag&4}let rs=!1;function Hg(t,e=!1){rs=e;const{props:n,children:o}=t.vnode,r=Fg(t);OE(t,n,r,e),PE(t,o);const i=r?WE(t,e):void 0;return rs=!1,i}function WE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Pu(new Proxy(t.ctx,th));const{setup:o}=n;if(o){const r=t.setupContext=o.length>1?Bg(t):null;Cr(t),Ji();const i=$o(o,t,0,[t.props,r]);if(Xi(),wr(),Cu(i)){if(i.then(wr,wr),e)return i.then(s=>{dh(t,s,e)}).catch(s=>{ci(s,t,0)});t.asyncDep=i}else dh(t,i,e)}else qg(t,e)}function dh(t,e,n){Me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ft(e)&&(t.setupState=Uu(e)),qg(t,n)}let sl,ph;function GE(t){sl=t,ph=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,lE))}}const VE=()=>!sl;function qg(t,e,n){const o=t.type;if(!t.render){if(!e&&sl&&!o.render){const r=o.template||oh(t).template;if(r){const{isCustomElement:i,compilerOptions:s}=t.appContext.config,{delimiters:a,compilerOptions:c}=o,l=St(St({isCustomElement:i,delimiters:a},s),c);o.render=sl(r,l)}}t.render=o.render||pn,ph&&ph(t)}{Cr(t),Ji();try{EE(t)}finally{Xi(),wr()}}}function YE(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Cn(t,"get","$attrs"),e[n]}}))}function Bg(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return YE(t)},slots:t.slots,emit:t.emit,expose:e}}function al(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Uu(Pu(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in va)return va[n](t)},has(e,n){return n in e||n in va}}))}function fh(t,e=!0){return Me(t)?t.displayName||t.name:t.name||e&&t.__name}function QE(t){return Me(t)&&"__vccOpts"in t}const Re=(t,e)=>N0(t,e,rs);function is(t,e,n){const o=arguments.length;return o===2?ft(e)&&!Ce(e)?_r(e)?Oe(t,null,[e]):Oe(t,e):Oe(t,null,e):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&_r(n)&&(n=[n]),Oe(t,e,n))}const Kg=Symbol.for("v-scx"),jg=()=>En(Kg);function JE(){}function XE(t,e,n,o){const r=n[o];if(r&&$g(r,t))return r;const i=e();return i.memo=t.slice(),n[o]=i}function $g(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let o=0;o<n.length;o++)if(lr(n[o],e[o]))return!1;return vi>0&&Tn&&Tn.push(t),!0}const zg="3.3.8",ZE={createComponentInstance:Dg,setupComponent:Hg,renderComponentRoot:Wc,setCurrentRenderingInstance:ha,isVNode:_r,normalizeVNode:Dn},eT=ZE,tT=null,nT=null,oT="http://www.w3.org/2000/svg",yi=typeof document<"u"?document:null,Wg=yi&&yi.createElement("template"),rT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,o)=>{const r=e?yi.createElementNS(oT,t):yi.createElement(t,n?{is:n}:void 0);return t==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:t=>yi.createTextNode(t),createComment:t=>yi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>yi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,o,r,i){const s=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Wg.innerHTML=o?`<svg>${t}</svg>`:t;const a=Wg.content;if(o){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Er="transition",Ta="animation",ss=Symbol("_vtc"),gh=(t,{slots:e})=>is(Qf,Yg(t),e);gh.displayName="Transition";const Gg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},iT=gh.props=St({},Gu,Gg),_i=(t,e=[])=>{Ce(t)?t.forEach(n=>n(...e)):t&&t(...e)},Vg=t=>t?Ce(t)?t.some(e=>e.length>1):t.length>1:!1;function Yg(t){const e={};for(const x in t)x in Gg||(e[x]=t[x]);if(t.css===!1)return e;const{name:n="v",type:o,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=s,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,m=sT(r),_=m&&m[0],T=m&&m[1],{onBeforeEnter:b,onEnter:C,onEnterCancelled:y,onLeave:v,onLeaveCancelled:w,onBeforeAppear:A=b,onAppear:S=C,onAppearCancelled:E=y}=e,O=(x,j,ae)=>{Tr(x,j?u:a),Tr(x,j?l:s),ae&&ae()},L=(x,j)=>{x._isLeaving=!1,Tr(x,h),Tr(x,p),Tr(x,d),j&&j()},z=x=>(j,ae)=>{const ie=x?S:C,G=()=>O(j,x,ae);_i(ie,[j,G]),Qg(()=>{Tr(j,x?c:i),Go(j,x?u:a),Vg(ie)||Jg(j,o,_,G)})};return St(e,{onBeforeEnter(x){_i(b,[x]),Go(x,i),Go(x,s)},onBeforeAppear(x){_i(A,[x]),Go(x,c),Go(x,l)},onEnter:z(!1),onAppear:z(!0),onLeave(x,j){x._isLeaving=!0;const ae=()=>L(x,j);Go(x,h),tm(),Go(x,d),Qg(()=>{x._isLeaving&&(Tr(x,h),Go(x,p),Vg(v)||Jg(x,o,T,ae))}),_i(v,[x,ae])},onEnterCancelled(x){O(x,!1),_i(y,[x])},onAppearCancelled(x){O(x,!0),_i(E,[x])},onLeaveCancelled(x){L(x),_i(w,[x])}})}function sT(t){if(t==null)return null;if(ft(t))return[mh(t.enter),mh(t.leave)];{const e=mh(t);return[e,e]}}function mh(t){return Ic(t)}function Go(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ss]||(t[ss]=new Set)).add(e)}function Tr(t,e){e.split(/\s+/).forEach(o=>o&&t.classList.remove(o));const n=t[ss];n&&(n.delete(e),n.size||(t[ss]=void 0))}function Qg(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let aT=0;function Jg(t,e,n,o){const r=t._endId=++aT,i=()=>{r===t._endId&&o()};if(n)return setTimeout(i,n);const{type:s,timeout:a,propCount:c}=Xg(t,e);if(!s)return o();const l=s+"end";let u=0;const h=()=>{t.removeEventListener(l,d),i()},d=p=>{p.target===t&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),t.addEventListener(l,d)}function Xg(t,e){const n=window.getComputedStyle(t),o=m=>(n[m]||"").split(", "),r=o(`${Er}Delay`),i=o(`${Er}Duration`),s=Zg(r,i),a=o(`${Ta}Delay`),c=o(`${Ta}Duration`),l=Zg(a,c);let u=null,h=0,d=0;e===Er?s>0&&(u=Er,h=s,d=i.length):e===Ta?l>0&&(u=Ta,h=l,d=c.length):(h=Math.max(s,l),u=h>0?s>l?Er:Ta:null,d=u?u===Er?i.length:c.length:0);const p=u===Er&&/\b(transform|all)(,|$)/.test(o(`${Er}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:p}}function Zg(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,o)=>em(n)+em(t[o])))}function em(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function tm(){return document.body.offsetHeight}function cT(t,e,n){const o=t[ss];o&&(e=(e?[e,...o]:[...o]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const vh=Symbol("_vod"),nm={beforeMount(t,{value:e},{transition:n}){t[vh]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Sa(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:o}){!e!=!n&&(o?e?(o.beforeEnter(t),Sa(t,!0),o.enter(t)):o.leave(t,()=>{Sa(t,!1)}):Sa(t,e))},beforeUnmount(t,{value:e}){Sa(t,e)}};function Sa(t,e){t.style.display=e?t[vh]:"none"}function lT(){nm.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}function uT(t,e,n){const o=t.style,r=kt(n);if(n&&!r){if(e&&!kt(e))for(const i in e)n[i]==null&&yh(o,i,"");for(const i in n)yh(o,i,n[i])}else{const i=o.display;r?e!==n&&(o.cssText=n):e&&t.removeAttribute("style"),vh in t&&(o.display=i)}}const om=/\s*!important$/;function yh(t,e,n){if(Ce(n))n.forEach(o=>yh(t,e,o));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const o=hT(t,e);om.test(n)?t.setProperty(Kn(o),n.replace(om,""),"important"):t[o]=n}}const rm=["Webkit","Moz","ms"],_h={};function hT(t,e){const n=_h[e];if(n)return n;let o=bn(e);if(o!=="filter"&&o in t)return _h[e]=o;o=oa(o);for(let r=0;r<rm.length;r++){const i=rm[r]+o;if(i in t)return _h[e]=i}return e}const im="http://www.w3.org/1999/xlink";function dT(t,e,n,o,r){if(o&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(im,e.slice(6,e.length)):t.setAttributeNS(im,e,n);else{const i=Yw(e);n==null||i&&!lf(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function pT(t,e,n,o,r,i,s){if(e==="innerHTML"||e==="textContent"){o&&s(o,r,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const l=a==="OPTION"?t.getAttribute("value"):t.value,u=n??"";l!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let c=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=lf(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function Vo(t,e,n,o){t.addEventListener(e,n,o)}function fT(t,e,n,o){t.removeEventListener(e,n,o)}const sm=Symbol("_vei");function gT(t,e,n,o,r=null){const i=t[sm]||(t[sm]={}),s=i[e];if(o&&s)s.value=o;else{const[a,c]=mT(e);if(o){const l=i[e]=_T(o,r);Vo(t,a,l,c)}else s&&(fT(t,a,s,c),i[e]=void 0)}}const am=/(?:Once|Passive|Capture)$/;function mT(t){let e;if(am.test(t)){e={};let n;for(;n=t.match(am);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Kn(t.slice(2)),e]}let bh=0;const vT=Promise.resolve(),yT=()=>bh||(vT.then(()=>bh=0),bh=Date.now());function _T(t,e){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Mn(bT(o,n.value),e,5,[o])};return n.value=t,n.attached=yT(),n}function bT(t,e){if(Ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(o=>r=>!r._stopped&&o&&o(r))}else return e}const cm=/^on[a-z]/,CT=(t,e,n,o,r=!1,i,s,a,c)=>{e==="class"?cT(t,o,r):e==="style"?uT(t,n,o):ta(e)?_u(e)||gT(t,e,n,o,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):wT(t,e,o,r))?pT(t,e,o,i,s,a,c):(e==="true-value"?t._trueValue=o:e==="false-value"&&(t._falseValue=o),dT(t,e,o,r))};function wT(t,e,n,o){return o?!!(e==="innerHTML"||e==="textContent"||e in t&&cm.test(e)&&Me(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||cm.test(e)&&kt(n)?!1:e in t}function lm(t,e){const n=vt(t);class o extends cl{constructor(i){super(n,i,e)}}return o.def=n,o}const ET=t=>lm(t,Tm),TT=typeof HTMLElement<"u"?HTMLElement:class{};class cl extends TT{constructor(e,n={},o){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&o?o(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),ui(()=>{this._connected||(Th(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let o=0;o<this.attributes.length;o++)this._setAttr(this.attributes[o].name);this._ob=new MutationObserver(o=>{for(const r of o)this._setAttr(r.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(o,r=!1)=>{const{props:i,styles:s}=o;let a;if(i&&!Ce(i))for(const c in i){const l=i[c];(l===Number||l&&l.type===Number)&&(c in this._props&&(this._props[c]=Ic(this._props[c])),(a||(a=Object.create(null)))[bn(c)]=!0)}this._numberProps=a,r&&this._resolveProps(o),this._applyStyles(s),this._update()},n=this._def.__asyncLoader;n?n().then(o=>e(o,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,o=Ce(n)?n:Object.keys(n||{});for(const r of Object.keys(this))r[0]!=="_"&&o.includes(r)&&this._setProp(r,this[r],!0,!1);for(const r of o.map(bn))Object.defineProperty(this,r,{get(){return this._getProp(r)},set(i){this._setProp(r,i)}})}_setAttr(e){let n=this.getAttribute(e);const o=bn(e);this._numberProps&&this._numberProps[o]&&(n=Ic(n)),this._setProp(o,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,o=!0,r=!0){n!==this._props[e]&&(this._props[e]=n,r&&this._instance&&this._update(),o&&(n===!0?this.setAttribute(Kn(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Kn(e),n+""):n||this.removeAttribute(Kn(e))))}_update(){Th(this._createVNode(),this.shadowRoot)}_createVNode(){const e=Oe(this._def,St({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const o=(i,s)=>{this.dispatchEvent(new CustomEvent(i,{detail:s}))};n.emit=(i,...s)=>{o(i,s),Kn(i)!==i&&o(Kn(i),s)};let r=this;for(;r=r&&(r.parentNode||r.host);)if(r instanceof cl){n.parent=r._instance,n.provides=r._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const o=document.createElement("style");o.textContent=n,this.shadowRoot.appendChild(o)})}}function ST(t="$style"){{const e=kn();if(!e)return De;const n=e.type.__cssModules;return n&&n[t]||De}}function kT(t){const e=kn();if(!e)return;const n=e.ut=(r=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>wh(i,r))},o=()=>{const r=t(e.proxy);Ch(e.subTree,r),n(r)};Vf(o),Ln(()=>{const r=new MutationObserver(o);r.observe(e.subTree.el.parentNode,{childList:!0}),fi(()=>r.disconnect())})}function Ch(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Ch(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)wh(t.el,e);else if(t.type===ze)t.children.forEach(n=>Ch(n,e));else if(t.type===mi){let{el:n,anchor:o}=t;for(;n&&(wh(n,e),n!==o);)n=n.nextSibling}}function wh(t,e){if(t.nodeType===1){const n=t.style;for(const o in e)n.setProperty(`--${o}`,e[o])}}const um=new WeakMap,hm=new WeakMap,ll=Symbol("_moveCb"),dm=Symbol("_enterCb"),pm={name:"TransitionGroup",props:St({},iT,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=kn(),o=Wu();let r,i;return Jc(()=>{if(!r.length)return;const s=t.moveClass||`${t.name||"v"}-move`;if(!NT(r[0].el,n.vnode.el,s))return;r.forEach(IT),r.forEach(RT);const a=r.filter(OT);tm(),a.forEach(c=>{const l=c.el,u=l.style;Go(l,s),u.transform=u.webkitTransform=u.transitionDuration="";const h=l[ll]=d=>{d&&d.target!==l||(!d||/transform$/.test(d.propertyName))&&(l.removeEventListener("transitionend",h),l[ll]=null,Tr(l,s))};l.addEventListener("transitionend",h)})}),()=>{const s=ot(t),a=Yg(s);let c=s.tag||ze;r=i,i=e.default?Yc(e.default()):[];for(let l=0;l<i.length;l++){const u=i[l];u.key!=null&&di(u,ns(u,a,o,n))}if(r)for(let l=0;l<r.length;l++){const u=r[l];di(u,ns(u,a,o,n)),um.set(u,u.el.getBoundingClientRect())}return Oe(c,null,i)}}},SU=t=>delete t.mode;pm.props;const AT=pm;function IT(t){const e=t.el;e[ll]&&e[ll](),e[dm]&&e[dm]()}function RT(t){hm.set(t,t.el.getBoundingClientRect())}function OT(t){const e=um.get(t),n=hm.get(t),o=e.left-n.left,r=e.top-n.top;if(o||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${o}px,${r}px)`,i.transitionDuration="0s",t}}function NT(t,e,n){const o=t.cloneNode(),r=t[ss];r&&r.forEach(a=>{a.split(/\s+/).forEach(c=>c&&o.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&o.classList.add(a)),o.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(o);const{hasTransform:s}=Xg(o);return i.removeChild(o),s}const Sr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ce(e)?n=>Yi(e,n):e};function xT(t){t.target.composing=!0}function fm(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const zn=Symbol("_assign"),An={created(t,{modifiers:{lazy:e,trim:n,number:o}},r){t[zn]=Sr(r);const i=o||r.props&&r.props.type==="number";Vo(t,e?"change":"input",s=>{if(s.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Ac(a)),t[zn](a)}),n&&Vo(t,"change",()=>{t.value=t.value.trim()}),e||(Vo(t,"compositionstart",xT),Vo(t,"compositionend",fm),Vo(t,"change",fm))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:o,number:r}},i){if(t[zn]=Sr(i),t.composing||document.activeElement===t&&t.type!=="range"&&(n||o&&t.value.trim()===e||(r||t.type==="number")&&Ac(t.value)===e))return;const s=e??"";t.value!==s&&(t.value=s)}},ul={deep:!0,created(t,e,n){t[zn]=Sr(n),Vo(t,"change",()=>{const o=t._modelValue,r=as(t),i=t.checked,s=t[zn];if(Ce(o)){const a=Rc(o,r),c=a!==-1;if(i&&!c)s(o.concat(r));else if(!i&&c){const l=[...o];l.splice(a,1),s(l)}}else if(ri(o)){const a=new Set(o);i?a.add(r):a.delete(r),s(a)}else s(vm(t,i))})},mounted:gm,beforeUpdate(t,e,n){t[zn]=Sr(n),gm(t,e,n)}};function gm(t,{value:e,oldValue:n},o){t._modelValue=e,Ce(e)?t.checked=Rc(e,o.props.value)>-1:ri(e)?t.checked=e.has(o.props.value):e!==n&&(t.checked=ur(e,vm(t,!0)))}const Eh={created(t,{value:e},n){t.checked=ur(e,n.props.value),t[zn]=Sr(n),Vo(t,"change",()=>{t[zn](as(t))})},beforeUpdate(t,{value:e,oldValue:n},o){t[zn]=Sr(o),e!==n&&(t.checked=ur(e,o.props.value))}},hl={deep:!0,created(t,{value:e,modifiers:{number:n}},o){const r=ri(e);Vo(t,"change",()=>{const i=Array.prototype.filter.call(t.options,s=>s.selected).map(s=>n?Ac(as(s)):as(s));t[zn](t.multiple?r?new Set(i):i:i[0])}),t[zn]=Sr(o)},mounted(t,{value:e}){mm(t,e)},beforeUpdate(t,e,n){t[zn]=Sr(n)},updated(t,{value:e}){mm(t,e)}};function mm(t,e){const n=t.multiple;if(!(n&&!Ce(e)&&!ri(e))){for(let o=0,r=t.options.length;o<r;o++){const i=t.options[o],s=as(i);if(n)Ce(e)?i.selected=Rc(e,s)>-1:i.selected=e.has(s);else if(ur(as(i),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function as(t){return"_value"in t?t._value:t.value}function vm(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const ym={created(t,e,n){dl(t,e,n,null,"created")},mounted(t,e,n){dl(t,e,n,null,"mounted")},beforeUpdate(t,e,n,o){dl(t,e,n,o,"beforeUpdate")},updated(t,e,n,o){dl(t,e,n,o,"updated")}};function _m(t,e){switch(t){case"SELECT":return hl;case"TEXTAREA":return An;default:switch(e){case"checkbox":return ul;case"radio":return Eh;default:return An}}}function dl(t,e,n,o,r){const i=_m(t.tagName,n.props&&n.props.type)[r];i&&i(t,e,n,o)}function PT(){An.getSSRProps=({value:t})=>({value:t}),Eh.getSSRProps=({value:t},e)=>{if(e.props&&ur(e.props.value,t))return{checked:!0}},ul.getSSRProps=({value:t},e)=>{if(Ce(t)){if(e.props&&Rc(t,e.props.value)>-1)return{checked:!0}}else if(ri(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},ym.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=_m(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const MT=["ctrl","shift","alt","meta"],LT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>MT.some(n=>t[`${n}Key`]&&!e.includes(n))},Yo=(t,e)=>(n,...o)=>{for(let r=0;r<e.length;r++){const i=LT[e[r]];if(i&&i(n,e))return}return t(n,...o)},DT={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Kt=(t,e)=>n=>{if(!("key"in n))return;const o=Kn(n.key);if(e.some(r=>r===o||DT[r]===o))return t(n)},bm=St({patchProp:CT},rT);let ka,Cm=!1;function wm(){return ka||(ka=Sg(bm))}function Em(){return ka=Cm?ka:kg(bm),Cm=!0,ka}const Th=(...t)=>{wm().render(...t)},Tm=(...t)=>{Em().hydrate(...t)},Sm=(...t)=>{const e=wm().createApp(...t),{mount:n}=e;return e.mount=o=>{const r=km(o);if(!r)return;const i=e._component;!Me(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},e},UT=(...t)=>{const e=Em().createApp(...t),{mount:n}=e;return e.mount=o=>{const r=km(o);if(r)return n(r,!0,r instanceof SVGElement)},e};function km(t){return kt(t)?document.querySelector(t):t}let Am=!1;const FT=()=>{Am||(Am=!0,PT(),lT())},HT=()=>{},qT=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Qf,BaseTransitionPropsValidators:Gu,Comment:an,EffectScope:Tu,Fragment:ze,KeepAlive:sE,ReactiveEffect:Qi,Static:mi,Suspense:Y0,Teleport:qE,Text:yr,Transition:gh,TransitionGroup:AT,VueElement:cl,assertNumber:P0,callWithAsyncErrorHandling:Mn,callWithErrorHandling:$o,camelize:bn,capitalize:oa,cloneVNode:So,compatUtils:nT,compile:HT,computed:Re,createApp:Sm,createBlock:Ut,createCommentVNode:Ge,createElementBlock:oe,createElementVNode:M,createHydrationRenderer:kg,createPropsRestProxy:CE,createRenderer:Sg,createSSRApp:UT,createSlots:Xc,createStaticVNode:jE,createTextVNode:$n,createVNode:Oe,customRef:k0,defineAsyncComponent:rE,defineComponent:vt,defineCustomElement:lm,defineEmits:hE,defineExpose:dE,defineModel:gE,defineOptions:pE,defineProps:uE,defineSSRCustomElement:ET,defineSlots:fE,get devtools(){return es},effect:Zw,effectScope:hf,getCurrentInstance:kn,getCurrentScope:pf,getTransitionRawChildren:Yc,guardReactiveProps:Mg,h:is,handleError:ci,hasInjectionContext:gg,hydrate:Tm,initCustomFormatter:JE,initDirectivesForSSR:FT,inject:En,isMemoSame:$g,isProxy:xu,isReactive:si,isReadonly:ai,isRef:Mt,isRuntimeOnly:VE,isShallow:aa,isVNode:_r,markRaw:Pu,mergeDefaults:_E,mergeModels:bE,mergeProps:Lg,nextTick:ui,normalizeClass:ao,normalizeProps:Gw,normalizeStyle:so,onActivated:Zf,onBeforeMount:Xu,onBeforeUnmount:ma,onBeforeUpdate:ng,onDeactivated:eg,onErrorCaptured:sg,onMounted:Ln,onRenderTracked:ig,onRenderTriggered:rg,onScopeDispose:Su,onServerPrefetch:og,onUnmounted:fi,onUpdated:Jc,openBlock:Z,popScopeId:q0,provide:Ca,proxyRefs:Uu,pushScopeId:H0,queuePostFlushCb:Bc,reactive:fr,readonly:sa,ref:ye,registerRuntimeCompiler:GE,render:Th,renderList:sn,renderSlot:mr,resolveComponent:ju,resolveDirective:G0,resolveDynamicComponent:jf,resolveFilter:tT,resolveTransitionHooks:ns,setBlockTracking:lh,setDevtoolsHook:Hf,setTransitionHooks:di,shallowReactive:Nu,shallowReadonly:b0,shallowRef:Du,ssrContextKey:Kg,ssrUtils:eT,stop:e0,toDisplayString:Se,toHandlerKey:ra,toHandlers:cE,toRaw:ot,toRef:R0,toRefs:Fu,toValue:E0,transformVNodeArgs:BE,triggerRef:w0,unref:X,useAttrs:cg,useCssModule:ST,useCssVars:kT,useModel:yE,useSSRContext:jg,useSlots:vE,useTransitionState:Wu,vModelCheckbox:ul,vModelDynamic:ym,vModelRadio:Eh,vModelSelect:hl,vModelText:An,vShow:nm,version:zg,warn:x0,watch:Pt,watchEffect:lo,watchPostEffect:Vf,watchSyncEffect:tE,withAsyncContext:wE,withCtx:wt,withDefaults:mE,withDirectives:wn,withKeys:Kt,withMemo:XE,withModifiers:Yo,withScopeId:B0},Symbol.toStringTag,{value:"Module"}));function Im(t,e){return function(){return t.apply(e,arguments)}}const{toString:BT}=Object.prototype,{getPrototypeOf:Sh}=Object,pl=(t=>e=>{const n=BT.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ko=t=>(t=t.toLowerCase(),e=>pl(e)===t),fl=t=>e=>typeof e===t,{isArray:cs}=Array,Aa=fl("undefined");function KT(t){return t!==null&&!Aa(t)&&t.constructor!==null&&!Aa(t.constructor)&&Wn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Rm=ko("ArrayBuffer");function jT(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Rm(t.buffer),e}const $T=fl("string"),Wn=fl("function"),Om=fl("number"),gl=t=>t!==null&&typeof t=="object",zT=t=>t===!0||t===!1,ml=t=>{if(pl(t)!=="object")return!1;const e=Sh(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},WT=ko("Date"),GT=ko("File"),VT=ko("Blob"),YT=ko("FileList"),QT=t=>gl(t)&&Wn(t.pipe),JT=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Wn(t.append)&&((e=pl(t))==="formdata"||e==="object"&&Wn(t.toString)&&t.toString()==="[object FormData]"))},XT=ko("URLSearchParams"),ZT=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ia(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let o,r;if(typeof t!="object"&&(t=[t]),cs(t))for(o=0,r=t.length;o<r;o++)e.call(null,t[o],o,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),s=i.length;let a;for(o=0;o<s;o++)a=i[o],e.call(null,t[a],a,t)}}function Nm(t,e){e=e.toLowerCase();const n=Object.keys(t);let o=n.length,r;for(;o-- >0;)if(r=n[o],e===r.toLowerCase())return r;return null}const xm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pm=t=>!Aa(t)&&t!==xm;function kh(){const{caseless:t}=Pm(this)&&this||{},e={},n=(o,r)=>{const i=t&&Nm(e,r)||r;ml(e[i])&&ml(o)?e[i]=kh(e[i],o):ml(o)?e[i]=kh({},o):cs(o)?e[i]=o.slice():e[i]=o};for(let o=0,r=arguments.length;o<r;o++)arguments[o]&&Ia(arguments[o],n);return e}const eS=(t,e,n,{allOwnKeys:o}={})=>(Ia(e,(r,i)=>{n&&Wn(r)?t[i]=Im(r,n):t[i]=r},{allOwnKeys:o}),t),tS=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),nS=(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},oS=(t,e,n,o)=>{let r,i,s;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)s=r[i],(!o||o(s,t,e))&&!a[s]&&(e[s]=t[s],a[s]=!0);t=n!==!1&&Sh(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},rS=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return o!==-1&&o===n},iS=t=>{if(!t)return null;if(cs(t))return t;let e=t.length;if(!Om(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},sS=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Sh(Uint8Array)),aS=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=n.next())&&!o.done;){const r=o.value;e.call(t,r[0],r[1])}},cS=(t,e)=>{let n;const o=[];for(;(n=t.exec(e))!==null;)o.push(n);return o},lS=ko("HTMLFormElement"),uS=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,o){return n.toUpperCase()+o}),Mm=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),hS=ko("RegExp"),Lm=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};Ia(n,(r,i)=>{let s;(s=e(r,i,t))!==!1&&(o[i]=s||r)}),Object.defineProperties(t,o)},dS=t=>{Lm(t,(e,n)=>{if(Wn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=t[n];if(Wn(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},pS=(t,e)=>{const n={},o=r=>{r.forEach(i=>{n[i]=!0})};return cs(t)?o(t):o(String(t).split(e)),n},fS=()=>{},gS=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Ah="abcdefghijklmnopqrstuvwxyz",Dm="0123456789",Um={DIGIT:Dm,ALPHA:Ah,ALPHA_DIGIT:Ah+Ah.toUpperCase()+Dm},mS=(t=16,e=Um.ALPHA_DIGIT)=>{let n="";const{length:o}=e;for(;t--;)n+=e[Math.random()*o|0];return n};function vS(t){return!!(t&&Wn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const yS=t=>{const e=new Array(10),n=(o,r)=>{if(gl(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[r]=o;const i=cs(o)?[]:{};return Ia(o,(s,a)=>{const c=n(s,r+1);!Aa(c)&&(i[a]=c)}),e[r]=void 0,i}}return o};return n(t,0)},_S=ko("AsyncFunction"),bS=t=>t&&(gl(t)||Wn(t))&&Wn(t.then)&&Wn(t.catch),J={isArray:cs,isArrayBuffer:Rm,isBuffer:KT,isFormData:JT,isArrayBufferView:jT,isString:$T,isNumber:Om,isBoolean:zT,isObject:gl,isPlainObject:ml,isUndefined:Aa,isDate:WT,isFile:GT,isBlob:VT,isRegExp:hS,isFunction:Wn,isStream:QT,isURLSearchParams:XT,isTypedArray:sS,isFileList:YT,forEach:Ia,merge:kh,extend:eS,trim:ZT,stripBOM:tS,inherits:nS,toFlatObject:oS,kindOf:pl,kindOfTest:ko,endsWith:rS,toArray:iS,forEachEntry:aS,matchAll:cS,isHTMLForm:lS,hasOwnProperty:Mm,hasOwnProp:Mm,reduceDescriptors:Lm,freezeMethods:dS,toObjectSet:pS,toCamelCase:uS,noop:fS,toFiniteNumber:gS,findKey:Nm,global:xm,isContextDefined:Pm,ALPHABET:Um,generateString:mS,isSpecCompliantForm:vS,toJSONObject:yS,isAsyncFn:_S,isThenable:bS};function rt(t,e,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}J.inherits(rt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Fm=rt.prototype,Hm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Hm[t]={value:t}}),Object.defineProperties(rt,Hm),Object.defineProperty(Fm,"isAxiosError",{value:!0}),rt.from=(t,e,n,o,r,i)=>{const s=Object.create(Fm);return J.toFlatObject(t,s,function(a){return a!==Error.prototype},a=>a!=="isAxiosError"),rt.call(s,t.message,e,n,o,r),s.cause=t,s.name=t.name,i&&Object.assign(s,i),s};const CS=null;function Ih(t){return J.isPlainObject(t)||J.isArray(t)}function qm(t){return J.endsWith(t,"[]")?t.slice(0,-2):t}function Bm(t,e,n){return t?t.concat(e).map(function(o,r){return o=qm(o),!n&&r?"["+o+"]":o}).join(n?".":""):e}function wS(t){return J.isArray(t)&&!t.some(Ih)}const ES=J.toFlatObject(J,{},null,function(t){return/^is[A-Z]/.test(t)});function vl(t,e,n){if(!J.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=J.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!J.isUndefined(m[p])});const o=n.metaTokens,r=n.visitor||l,i=n.dots,s=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(e);if(!J.isFunction(r))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(J.isDate(p))return p.toISOString();if(!a&&J.isBlob(p))throw new rt("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(p)||J.isTypedArray(p)?a&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function l(p,m,_){let T=p;if(p&&!_&&typeof p=="object"){if(J.endsWith(m,"{}"))m=o?m:m.slice(0,-2),p=JSON.stringify(p);else if(J.isArray(p)&&wS(p)||(J.isFileList(p)||J.endsWith(m,"[]"))&&(T=J.toArray(p)))return m=qm(m),T.forEach(function(b,C){!(J.isUndefined(b)||b===null)&&e.append(s===!0?Bm([m],C,i):s===null?m:m+"[]",c(b))}),!1}return Ih(p)?!0:(e.append(Bm(_,m,i),c(p)),!1)}const u=[],h=Object.assign(ES,{defaultVisitor:l,convertValue:c,isVisitable:Ih});function d(p,m){if(!J.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(p),J.forEach(p,function(_,T){(!(J.isUndefined(_)||_===null)&&r.call(e,_,J.isString(T)?T.trim():T,m,h))===!0&&d(_,m?m.concat(T):[T])}),u.pop()}}if(!J.isObject(t))throw new TypeError("data must be an object");return d(t),e}function Km(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Rh(t,e){this._pairs=[],t&&vl(t,this,e)}const jm=Rh.prototype;jm.append=function(t,e){this._pairs.push([t,e])},jm.toString=function(t){const e=t?function(n){return t.call(this,n,Km)}:Km;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function TS(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $m(t,e,n){if(!e)return t;const o=n&&n.encode||TS,r=n&&n.serialize;let i;if(r?i=r(e,n):i=J.isURLSearchParams(e)?e.toString():new Rh(e,n).toString(o),i){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class SS{constructor(){this.handlers=[]}use(e,n,o){return this.handlers.push({fulfilled:e,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){J.forEach(this.handlers,function(n){n!==null&&e(n)})}}const zm=SS,Wm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kS=typeof URLSearchParams<"u"?URLSearchParams:Rh,AS=typeof FormData<"u"?FormData:null,IS=typeof Blob<"u"?Blob:null,RS={isBrowser:!0,classes:{URLSearchParams:kS,FormData:AS,Blob:IS},protocols:["http","https","file","blob","url","data"]},Gm=typeof window<"u"&&typeof document<"u",OS=(t=>Gm&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),NS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xS=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gm,hasStandardBrowserEnv:OS,hasStandardBrowserWebWorkerEnv:NS},Symbol.toStringTag,{value:"Module"})),Ao={...xS,...RS};function PS(t,e){return vl(t,new Ao.classes.URLSearchParams,Object.assign({visitor:function(n,o,r,i){return Ao.isNode&&J.isBuffer(n)?(this.append(o,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function MS(t){return J.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function LS(t){const e={},n=Object.keys(t);let o;const r=n.length;let i;for(o=0;o<r;o++)i=n[o],e[i]=t[i];return e}function Vm(t){function e(n,o,r,i){let s=n[i++];const a=Number.isFinite(+s),c=i>=n.length;return s=!s&&J.isArray(r)?r.length:s,c?(J.hasOwnProp(r,s)?r[s]=[r[s],o]:r[s]=o,!a):((!r[s]||!J.isObject(r[s]))&&(r[s]=[]),e(n,o,r[s],i)&&J.isArray(r[s])&&(r[s]=LS(r[s])),!a)}if(J.isFormData(t)&&J.isFunction(t.entries)){const n={};return J.forEachEntry(t,(o,r)=>{e(MS(o),r,n,0)}),n}return null}function DS(t,e,n){if(J.isString(t))try{return(e||JSON.parse)(t),J.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(t)}const Oh={transitional:Wm,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",o=n.indexOf("application/json")>-1,r=J.isObject(t);if(r&&J.isHTMLForm(t)&&(t=new FormData(t)),J.isFormData(t))return o&&o?JSON.stringify(Vm(t)):t;if(J.isArrayBuffer(t)||J.isBuffer(t)||J.isStream(t)||J.isFile(t)||J.isBlob(t))return t;if(J.isArrayBufferView(t))return t.buffer;if(J.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return PS(t,this.formSerializer).toString();if((i=J.isFileList(t))||n.indexOf("multipart/form-data")>-1){const s=this.env&&this.env.FormData;return vl(i?{"files[]":t}:t,s&&new s,this.formSerializer)}}return r||o?(e.setContentType("application/json",!1),DS(t)):t}],transformResponse:[function(t){const e=this.transitional||Oh.transitional,n=e&&e.forcedJSONParsing,o=this.responseType==="json";if(t&&J.isString(t)&&(n&&!this.responseType||o)){const r=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(i){if(r)throw i.name==="SyntaxError"?rt.from(i,rt.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ao.classes.FormData,Blob:Ao.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],t=>{Oh.headers[t]={}});const Nh=Oh,US=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FS=t=>{const e={};let n,o,r;return t&&t.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),o=i.substring(r+1).trim(),!(!n||e[n]&&US[n])&&(n==="set-cookie"?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)}),e},Ym=Symbol("internals");function Ra(t){return t&&String(t).trim().toLowerCase()}function yl(t){return t===!1||t==null?t:J.isArray(t)?t.map(yl):String(t)}function HS(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}const qS=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function xh(t,e,n,o,r){if(J.isFunction(o))return o.call(this,e,n);if(r&&(e=n),!!J.isString(e)){if(J.isString(o))return e.indexOf(o)!==-1;if(J.isRegExp(o))return o.test(e)}}function BS(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,o)=>n.toUpperCase()+o)}function KS(t,e){const n=J.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+n,{value:function(r,i,s){return this[o].call(this,e,r,i,s)},configurable:!0})})}class _l{constructor(e){e&&this.set(e)}set(e,n,o){const r=this;function i(a,c,l){const u=Ra(c);if(!u)throw new Error("header name must be a non-empty string");const h=J.findKey(r,u);(!h||r[h]===void 0||l===!0||l===void 0&&r[h]!==!1)&&(r[h||c]=yl(a))}const s=(a,c)=>J.forEach(a,(l,u)=>i(l,u,c));return J.isPlainObject(e)||e instanceof this.constructor?s(e,n):J.isString(e)&&(e=e.trim())&&!qS(e)?s(FS(e),n):e!=null&&i(n,e,o),this}get(e,n){if(e=Ra(e),e){const o=J.findKey(this,e);if(o){const r=this[o];if(!n)return r;if(n===!0)return HS(r);if(J.isFunction(n))return n.call(this,r,o);if(J.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ra(e),e){const o=J.findKey(this,e);return!!(o&&this[o]!==void 0&&(!n||xh(this,this[o],o,n)))}return!1}delete(e,n){const o=this;let r=!1;function i(s){if(s=Ra(s),s){const a=J.findKey(o,s);a&&(!n||xh(o,o[a],a,n))&&(delete o[a],r=!0)}}return J.isArray(e)?e.forEach(i):i(e),r}clear(e){const n=Object.keys(this);let o=n.length,r=!1;for(;o--;){const i=n[o];(!e||xh(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const n=this,o={};return J.forEach(this,(r,i)=>{const s=J.findKey(o,i);if(s){n[s]=yl(r),delete n[i];return}const a=e?BS(i):String(i).trim();a!==i&&delete n[i],n[a]=yl(r),o[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return J.forEach(this,(o,r)=>{o!=null&&o!==!1&&(n[r]=e&&J.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const o=new this(e);return n.forEach(r=>o.set(r)),o}static accessor(e){const n=(this[Ym]=this[Ym]={accessors:{}}).accessors,o=this.prototype;function r(i){const s=Ra(i);n[s]||(KS(o,i),n[s]=!0)}return J.isArray(e)?e.forEach(r):r(e),this}}_l.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),J.reduceDescriptors(_l.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(o){this[n]=o}}}),J.freezeMethods(_l);const Qo=_l;function Ph(t,e){const n=this||Nh,o=e||n,r=Qo.from(o.headers);let i=o.data;return J.forEach(t,function(s){i=s.call(n,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function Qm(t){return!!(t&&t.__CANCEL__)}function Oa(t,e,n){rt.call(this,t??"canceled",rt.ERR_CANCELED,e,n),this.name="CanceledError"}J.inherits(Oa,rt,{__CANCEL__:!0});function jS(t,e,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):e(new rt("Request failed with status code "+n.status,[rt.ERR_BAD_REQUEST,rt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const $S=Ao.hasStandardBrowserEnv?{write(t,e,n,o,r,i){const s=[t+"="+encodeURIComponent(e)];J.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),J.isString(o)&&s.push("path="+o),J.isString(r)&&s.push("domain="+r),i===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zS(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function WS(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Jm(t,e){return t&&!zS(e)?WS(t,e):e}const GS=Ao.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function o(r){let i=r;return t&&(e.setAttribute("href",i),i=e.href),e.setAttribute("href",i),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=o(window.location.href),function(r){const i=J.isString(r)?o(r):r;return i.protocol===n.protocol&&i.host===n.host}}():function(){return function(){return!0}}();function VS(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function YS(t,e){t=t||10;const n=new Array(t),o=new Array(t);let r=0,i=0,s;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),l=o[i];s||(s=c),n[r]=a,o[r]=c;let u=i,h=0;for(;u!==r;)h+=n[u++],u=u%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),c-s<e)return;const d=l&&c-l;return d?Math.round(h*1e3/d):void 0}}function Xm(t,e){let n=0;const o=YS(50,250);return r=>{const i=r.loaded,s=r.lengthComputable?r.total:void 0,a=i-n,c=o(a),l=i<=s;n=i;const u={loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&l?(s-i)/c:void 0,event:r};u[e?"download":"upload"]=!0,t(u)}}const QS=typeof XMLHttpRequest<"u",JS=QS&&function(t){return new Promise(function(e,n){let o=t.data;const r=Qo.from(t.headers).normalize();let{responseType:i,withXSRFToken:s}=t,a;function c(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let l;if(J.isFormData(o)){if(Ao.hasStandardBrowserEnv||Ao.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((l=r.getContentType())!==!1){const[m,..._]=l?l.split(";").map(T=>T.trim()).filter(Boolean):[];r.setContentType([m||"multipart/form-data",..._].join("; "))}}let u=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",_=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";r.set("Authorization","Basic "+btoa(m+":"+_))}const h=Jm(t.baseURL,t.url);u.open(t.method.toUpperCase(),$m(h,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function d(){if(!u)return;const m=Qo.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),_={data:!i||i==="text"||i==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:m,config:t,request:u};jS(function(T){e(T),c()},function(T){n(T),c()},_),u=null}if("onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(n(new rt("Request aborted",rt.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new rt("Network Error",rt.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||Wm;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),n(new rt(m,_.clarifyTimeoutError?rt.ETIMEDOUT:rt.ECONNABORTED,t,u)),u=null},Ao.hasStandardBrowserEnv&&(s&&J.isFunction(s)&&(s=s(t)),s||s!==!1&&GS(h))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&$S.read(t.xsrfCookieName);m&&r.set(t.xsrfHeaderName,m)}o===void 0&&r.setContentType(null),"setRequestHeader"in u&&J.forEach(r.toJSON(),function(m,_){u.setRequestHeader(_,m)}),J.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),i&&i!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",Xm(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Xm(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=m=>{u&&(n(!m||m.type?new Oa(null,t,u):m),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=VS(h);if(p&&Ao.protocols.indexOf(p)===-1){n(new rt("Unsupported protocol "+p+":",rt.ERR_BAD_REQUEST,t));return}u.send(o||null)})},Mh={http:CS,xhr:JS};J.forEach(Mh,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Zm=t=>`- ${t}`,XS=t=>J.isFunction(t)||t===null||t===!1,ev={getAdapter:t=>{t=J.isArray(t)?t:[t];const{length:e}=t;let n,o;const r={};for(let i=0;i<e;i++){n=t[i];let s;if(o=n,!XS(n)&&(o=Mh[(s=String(n)).toLowerCase()],o===void 0))throw new rt(`Unknown adapter '${s}'`);if(o)break;r[s||"#"+i]=o}if(!o){const i=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?i.length>1?`since :
`+i.map(Zm).join(`
`):" "+Zm(i[0]):"as no adapter specified";throw new rt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return o},adapters:Mh};function Lh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Oa(null,t)}function tv(t){return Lh(t),t.headers=Qo.from(t.headers),t.data=Ph.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ev.getAdapter(t.adapter||Nh.adapter)(t).then(function(e){return Lh(t),e.data=Ph.call(t,t.transformResponse,e),e.headers=Qo.from(e.headers),e},function(e){return Qm(e)||(Lh(t),e&&e.response&&(e.response.data=Ph.call(t,t.transformResponse,e.response),e.response.headers=Qo.from(e.response.headers))),Promise.reject(e)})}const nv=t=>t instanceof Qo?t.toJSON():t;function ls(t,e){e=e||{};const n={};function o(l,u,h){return J.isPlainObject(l)&&J.isPlainObject(u)?J.merge.call({caseless:h},l,u):J.isPlainObject(u)?J.merge({},u):J.isArray(u)?u.slice():u}function r(l,u,h){if(J.isUndefined(u)){if(!J.isUndefined(l))return o(void 0,l,h)}else return o(l,u,h)}function i(l,u){if(!J.isUndefined(u))return o(void 0,u)}function s(l,u){if(J.isUndefined(u)){if(!J.isUndefined(l))return o(void 0,l)}else return o(void 0,u)}function a(l,u,h){if(h in e)return o(l,u);if(h in t)return o(void 0,l)}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(l,u)=>r(nv(l),nv(u),!0)};return J.forEach(Object.keys(Object.assign({},t,e)),function(l){const u=c[l]||r,h=u(t[l],e[l],l);J.isUndefined(h)&&u!==a||(n[l]=h)}),n}const ov="1.6.2",Dh={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Dh[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const rv={};Dh.transitional=function(t,e,n){function o(r,i){return"[Axios v"+ov+"] Transitional option '"+r+"'"+i+(n?". "+n:"")}return(r,i,s)=>{if(t===!1)throw new rt(o(i," has been removed"+(e?" in "+e:"")),rt.ERR_DEPRECATED);return e&&!rv[i]&&(rv[i]=!0,console.warn(o(i," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,i,s):!0}};function ZS(t,e,n){if(typeof t!="object")throw new rt("options must be an object",rt.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let r=o.length;for(;r-- >0;){const i=o[r],s=e[i];if(s){const a=t[i],c=a===void 0||s(a,i,t);if(c!==!0)throw new rt("option "+i+" must be "+c,rt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new rt("Unknown option "+i,rt.ERR_BAD_OPTION)}}const Uh={assertOptions:ZS,validators:Dh},kr=Uh.validators;class bl{constructor(e){this.defaults=e,this.interceptors={request:new zm,response:new zm}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ls(this.defaults,n);const{transitional:o,paramsSerializer:r,headers:i}=n;o!==void 0&&Uh.assertOptions(o,{silentJSONParsing:kr.transitional(kr.boolean),forcedJSONParsing:kr.transitional(kr.boolean),clarifyTimeoutError:kr.transitional(kr.boolean)},!1),r!=null&&(J.isFunction(r)?n.paramsSerializer={serialize:r}:Uh.assertOptions(r,{encode:kr.function,serialize:kr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=i&&J.merge(i.common,i[n.method]);i&&J.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),n.headers=Qo.concat(s,i);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,h=0,d;if(!c){const m=[tv.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,l),d=m.length,u=Promise.resolve(n);h<d;)u=u.then(m[h++],m[h++]);return u}d=a.length;let p=n;for(h=0;h<d;){const m=a[h++],_=a[h++];try{p=m(p)}catch(T){_.call(this,T);break}}try{u=tv.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,d=l.length;h<d;)u=u.then(l[h++],l[h++]);return u}getUri(e){e=ls(this.defaults,e);const n=Jm(e.baseURL,e.url);return $m(n,e.params,e.paramsSerializer)}}J.forEach(["delete","get","head","options"],function(t){bl.prototype[t]=function(e,n){return this.request(ls(n||{},{method:t,url:e,data:(n||{}).data}))}}),J.forEach(["post","put","patch"],function(t){function e(n){return function(o,r,i){return this.request(ls(i||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}bl.prototype[t]=e(),bl.prototype[t+"Form"]=e(!0)});const Cl=bl;class Fh{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const o=this;this.promise.then(r=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](r);o._listeners=null}),this.promise.then=r=>{let i;const s=new Promise(a=>{o.subscribe(a),i=a}).then(r);return s.cancel=function(){o.unsubscribe(i)},s},e(function(r,i,s){o.reason||(o.reason=new Oa(r,i,s),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Fh(function(n){e=n}),cancel:e}}}const ek=Fh;function tk(t){return function(e){return t.apply(null,e)}}function nk(t){return J.isObject(t)&&t.isAxiosError===!0}const Hh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hh).forEach(([t,e])=>{Hh[e]=t});const ok=Hh;function iv(t){const e=new Cl(t),n=Im(Cl.prototype.request,e);return J.extend(n,Cl.prototype,e,{allOwnKeys:!0}),J.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return iv(ls(t,o))},n}const Ht=iv(Nh);Ht.Axios=Cl,Ht.CanceledError=Oa,Ht.CancelToken=ek,Ht.isCancel=Qm,Ht.VERSION=ov,Ht.toFormData=vl,Ht.AxiosError=rt,Ht.Cancel=Ht.CanceledError,Ht.all=function(t){return Promise.all(t)},Ht.spread=tk,Ht.isAxiosError=nk,Ht.mergeConfig=ls,Ht.AxiosHeaders=Qo,Ht.formToJSON=t=>Vm(J.isHTMLForm(t)?new FormData(t):t),Ht.getAdapter=ev.getAdapter,Ht.HttpStatusCode=ok,Ht.default=Ht;const rk=Ht,At=rk.create({baseURL:"/api"});At.interceptors.request.use(async t=>{try{const e=Mr.getAllAccounts();if(e.length===0)return t;const n={account:e[0],scopes:v_},o=await Mr.acquireTokenSilent(n);t.headers.Authorization=`Bearer ${o.accessToken}`}catch(e){console.error("Token acquisition failed",e)}return t},t=>{console.log(t)});const ik=async()=>{try{return(await At.get("/users/config")).data}catch(t){console.log(t)}},sk={fetchConfig:ik},K={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},wl={SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},Na=[K.OPENID_SCOPE,K.PROFILE_SCOPE,K.OFFLINE_ACCESS_SCOPE],sv=[...Na,K.EMAIL_SCOPE],Io={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},en={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Ar={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},El={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},cn={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},av={PLAIN:"plain",S256:"S256"},xa={QUERY:"query",FRAGMENT:"fragment"},ak={...xa,FORM_POST:"form_post"},cv={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Tl={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},ln={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Ne={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},qh="appmetadata",ck="client_info",Pa="1",Ma={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Un={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},tn={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},gt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},La={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},lv={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},uv={username:"username",password:"password"},Sl={httpSuccess:200,httpBadRequest:400},us={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Bh={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Ir={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},lk={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},Kh="unexpected_error",uk="post_request_failed",hv={[Kh]:"Unexpected error in authentication.",[uk]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class It extends Error{constructor(e,n,o){const r=n?`${e}: ${n}`:e;super(r),Object.setPrototypeOf(this,It.prototype),this.errorCode=e||K.EMPTY_STRING,this.errorMessage=n||K.EMPTY_STRING,this.subError=o||K.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function dv(t,e){return new It(t,e?`${hv[t]} ${e}`:hv[t])}const jh="client_info_decoding_error",pv="client_info_empty_error",$h="token_parsing_error",fv="null_or_empty_token",Jo="endpoints_resolution_error",gv="network_error",mv="openid_config_error",vv="hash_not_deserialized",hs="invalid_state",yv="state_mismatch",kl="state_not_found",_v="nonce_mismatch",zh="auth_time_not_found",bv="max_age_transpired",hk="multiple_matching_tokens",dk="multiple_matching_accounts",Cv="multiple_matching_appMetadata",wv="request_cannot_be_made",Ev="cannot_remove_empty_scope",Tv="cannot_append_scopeset",Wh="empty_input_scopeset",pk="device_code_polling_cancelled",fk="device_code_expired",gk="device_code_unknown_error",Gh="no_account_in_silent_request",Sv="invalid_cache_record",Vh="invalid_cache_environment",Yh="no_account_found",Qh="no_crypto_object",Jh="unexpected_credential_type",mk="invalid_assertion",vk="invalid_client_credential",Rr="token_refresh_required",yk="user_timeout_reached",kv="token_claims_cnf_required_for_signedjwt",Av="authorization_code_missing_from_server_response",Iv="binding_key_not_removed",Rv="end_session_endpoint_not_supported",Xh="key_id_missing",_k="no_network_connectivity",bk="user_canceled",Ck="missing_tenant_id_error",Ve="method_not_implemented",wk="nested_app_auth_bridge_disabled",Ov={[jh]:"The client info could not be parsed/decoded correctly",[pv]:"The client info was empty",[$h]:"Token cannot be parsed",[fv]:"The token is null or empty",[Jo]:"Endpoints cannot be resolved",[gv]:"Network request failed",[mv]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[vv]:"The hash parameters could not be deserialized",[hs]:"State was not the expected format",[yv]:"State mismatch error",[kl]:"State not found",[_v]:"Nonce mismatch error",[zh]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[bv]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[hk]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[dk]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Cv]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[wv]:"Token request cannot be made without authorization code or refresh token.",[Ev]:"Cannot remove null or empty scope from ScopeSet",[Tv]:"Cannot append ScopeSet",[Wh]:"Empty input ScopeSet cannot be processed",[pk]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[fk]:"Device code is expired.",[gk]:"Device code stopped polling for unknown reasons.",[Gh]:"Please pass an account object, silent flow is not supported without account information",[Sv]:"Cache record object was null or undefined.",[Vh]:"Invalid environment when attempting to create cache entry",[Yh]:"No account found in cache for given key.",[Qh]:"No crypto object detected.",[Jh]:"Unexpected credential type.",[mk]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[vk]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Rr]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[yk]:"User defined timeout for device code polling reached",[kv]:"Cannot generate a POP jwt if the token_claims are not populated",[Av]:"Server response does not contain an authorization code to proceed",[Iv]:"Could not remove the credential's binding key from storage.",[Rv]:"The provided authority does not support logout",[Xh]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[_k]:"No network connectivity. Check your internet connection.",[bk]:"User cancelled the flow.",[Ck]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Ve]:"This method has not been implemented",[wk]:"The nested app auth bridge is disabled"};class Al extends It{constructor(e,n){super(e,n?`${Ov[e]}: ${n}`:Ov[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Al.prototype)}}function te(t,e){return new Al(t,e)}const Il={createNewGuid:()=>{throw te(Ve)},base64Decode:()=>{throw te(Ve)},base64Encode:()=>{throw te(Ve)},async getPublicKeyThumbprint(){throw te(Ve)},async removeTokenBindingKey(){throw te(Ve)},async clearKeystore(){throw te(Ve)},async signJwt(){throw te(Ve)},async hashString(){throw te(Ve)}};var Yt;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Yt||(Yt={}));class bi{constructor(e,n,o){this.level=Yt.Info;const r=()=>{},i=e||bi.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||r,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:Yt.Info,this.correlationId=i.correlationId||K.EMPTY_STRING,this.packageName=n||K.EMPTY_STRING,this.packageVersion=o||K.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Yt.Info}}clone(e,n,o){return new bi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:o||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const o=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Yt[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,o,n.containsPii||!1)}executeCallback(e,n,o){this.localCallback&&this.localCallback(e,n,o)}error(e,n){this.logMessage(e,{logLevel:Yt.Error,containsPii:!1,correlationId:n||K.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:Yt.Error,containsPii:!0,correlationId:n||K.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:Yt.Warning,containsPii:!1,correlationId:n||K.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:Yt.Warning,containsPii:!0,correlationId:n||K.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:Yt.Info,containsPii:!1,correlationId:n||K.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:Yt.Info,containsPii:!0,correlationId:n||K.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:Yt.Verbose,containsPii:!1,correlationId:n||K.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:Yt.Verbose,containsPii:!0,correlationId:n||K.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:Yt.Trace,containsPii:!1,correlationId:n||K.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:Yt.Trace,containsPii:!0,correlationId:n||K.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Nv="@azure/msal-common",Zh="14.5.0",ed={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};function Ci(t,e){const n=Ek(t);try{const o=e(n);return JSON.parse(o)}catch{throw te($h)}}function Ek(t){if(!t)throw te(fv);const e=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!e||e.length<4)throw te($h);return e[2]}function xv(t,e){if(e===0||Date.now()-3e5>t+e)throw te(bv)}class gn{static nowSeconds(){return Math.round(new Date().getTime()/1e3)}static isTokenExpired(e,n){const o=Number(e)||0;return gn.nowSeconds()+n>o}static wasClockTurnedBack(e){return Number(e)>gn.nowSeconds()}static delay(e,n){return new Promise(o=>setTimeout(()=>o(n),e))}}function Da(t){return[Tk(t),Sk(t),kk(t),Ak(t),Ik(t)].join(ln.CACHE_KEY_SEPARATOR).toLowerCase()}function Rl(t,e,n,o,r){return{credentialType:Ne.ID_TOKEN,homeAccountId:t,environment:e,clientId:o,secret:n,realm:r}}function Ol(t,e,n,o,r,i,s,a,c,l,u,h,d,p,m){var T,b;const _={homeAccountId:t,credentialType:Ne.ACCESS_TOKEN,secret:n,cachedAt:gn.nowSeconds().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:o,realm:r,target:i,tokenType:u||gt.BEARER};if(h&&(_.userAssertionHash=h),l&&(_.refreshOn=l.toString()),p&&(_.requestedClaims=p,_.requestedClaimsHash=m),((T=_.tokenType)==null?void 0:T.toLowerCase())!==gt.BEARER.toLowerCase())switch(_.credentialType=Ne.ACCESS_TOKEN_WITH_AUTH_SCHEME,_.tokenType){case gt.POP:const C=Ci(n,c);if(!((b=C==null?void 0:C.cnf)!=null&&b.kid))throw te(kv);_.keyId=C.cnf.kid;break;case gt.SSH:_.keyId=d}return _}function Pv(t,e,n,o,r,i){const s={credentialType:Ne.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:o,secret:n};return i&&(s.userAssertionHash=i),r&&(s.familyId=r),s}function td(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function Mv(t){return t?td(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Ne.ACCESS_TOKEN||t.credentialType===Ne.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Lv(t){return t?td(t)&&t.hasOwnProperty("realm")&&t.credentialType===Ne.ID_TOKEN:!1}function Dv(t){return t?td(t)&&t.credentialType===Ne.REFRESH_TOKEN:!1}function Tk(t){return[t.homeAccountId,t.environment].join(ln.CACHE_KEY_SEPARATOR).toLowerCase()}function Sk(t){const e=t.credentialType===Ne.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(ln.CACHE_KEY_SEPARATOR).toLowerCase()}function kk(t){return(t.target||"").toLowerCase()}function Ak(t){return(t.requestedClaimsHash||"").toLowerCase()}function Ik(t){return t.tokenType&&t.tokenType.toLowerCase()!==gt.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}function Rk(t,e){const n=t.indexOf(tn.CACHE_KEY)===0;let o=!0;return e&&(o=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&o}const Uv="redirect_uri_empty",Ok="claims_request_parsing_error",Fv="authority_uri_insecure",Ua="url_parse_error",nd="empty_url_error",Hv="empty_input_scopes_error",qv="invalid_prompt_value",od="invalid_claims",Bv="token_request_empty",Kv="logout_request_empty",jv="invalid_code_challenge_method",rd="pkce_params_missing",id="invalid_cloud_discovery_metadata",$v="invalid_authority_metadata",zv="untrusted_authority",Nl="missing_ssh_jwk",Wv="missing_ssh_kid",Nk="missing_nonce_authentication_header",xk="invalid_authentication_header",Gv="cannot_set_OIDCOptions",Vv="cannot_allow_native_broker",Yv="authority_mismatch",Pk={[Uv]:"A redirect URI is required for all calls, and none has been set.",[Ok]:"Could not parse the given claims request object.",[Fv]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ua]:"URL could not be parsed into appropriate segments.",[nd]:"URL was empty or null.",[Hv]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[qv]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[od]:"Given claims parameter must be a stringified JSON object.",[Bv]:"Token request was empty and not found in cache.",[Kv]:"The logout request was null or undefined.",[jv]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[rd]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[id]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[$v]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[zv]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Nl]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Wv]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Nk]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[xk]:"Invalid authentication header provided",[Gv]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Vv]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Yv]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class sd extends It{constructor(e){super(e,Pk[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,sd.prototype)}}function mt(t){return new sd(t)}class ho{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},o=e.split("&"),r=i=>decodeURIComponent(i.replace(/\+/g," "));return o.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(n[r(s)]=r(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}class qt{constructor(e){const n=e?ho.trimArrayEntries([...e]):[],o=n?ho.removeEmptyStringsFromArray(n):[];this.validateInputScopes(o),this.scopes=new Set,o.forEach(r=>this.scopes.add(r))}static fromString(e){const n=(e||K.EMPTY_STRING).split(" ");return new qt(n)}static createSearchScopes(e){const n=new qt(e);return n.containsOnlyOIDCScopes()?n.removeScope(K.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}validateInputScopes(e){if(!e||e.length<1)throw mt(Hv)}containsScope(e){const n=this.printScopesLowerCase().split(" "),o=new qt(n);return e?o.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return sv.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw te(Tv)}}removeScope(e){if(!e)throw te(Ev);this.scopes.delete(e.trim())}removeOIDCScopes(){sv.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw te(Wh);const n=new Set;return e.scopes.forEach(o=>n.add(o.toLowerCase())),this.scopes.forEach(o=>n.add(o.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw te(Wh);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),o=e.getScopeCount(),r=this.getScopeCount();return n.size<r+o}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):K.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function xl(t,e){if(!t)throw te(pv);try{const n=e(t);return JSON.parse(n)}catch{throw te(jh)}}function ds(t){if(!t)throw te(jh);const e=t.split(ln.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?K.EMPTY_STRING:e[1]}}function ad(t,e){return!!t&&!!e&&t===e.split(".")[1]}function cd(t,e){const{oid:n,sub:o,tid:r,name:i,tfp:s,acr:a}=e,c=r||s||a||"";return{tenantId:c,localAccountId:n||o||"",name:i,isHomeTenant:ad(c,t)}}function ld(t,e,n){let o=t;if(e){const{isHomeTenant:r,...i}=e;o={...t,...i}}if(n){const{isHomeTenant:r,...i}=cd(t.homeAccountId,n);return o={...o,...i,idTokenClaims:n},o}return o}const po={Default:0,Adfs:1,Dsts:2,Ciam:3};function Qv(t){return t&&(t.tid||t.tfp||t.acr)||null}const Xo={AAD:"AAD",OIDC:"OIDC"};class jt{generateAccountId(){return[this.homeAccountId,this.environment].join(ln.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return jt.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const n=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",n||e.tenantId||""].join(ln.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,n,o){const r=new jt;n.authorityType===po.Adfs?r.authorityType=Tl.ADFS_ACCOUNT_TYPE:n.protocolMode===Xo.AAD?r.authorityType=Tl.MSSTS_ACCOUNT_TYPE:r.authorityType=Tl.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&o&&(i=xl(e.clientInfo,o)),r.clientInfo=e.clientInfo,r.homeAccountId=e.homeAccountId,r.nativeAccountId=e.nativeAccountId;const s=e.environment||n&&n.getPreferredCache();if(!s)throw te(Vh);r.environment=s,r.realm=(i==null?void 0:i.utid)||Qv(e.idTokenClaims)||"",r.localAccountId=(i==null?void 0:i.uid)||e.idTokenClaims.oid||e.idTokenClaims.sub||"";const a=e.idTokenClaims.preferred_username||e.idTokenClaims.upn,c=e.idTokenClaims.emails?e.idTokenClaims.emails[0]:null;if(r.username=a||c||"",r.name=e.idTokenClaims.name,r.cloudGraphHostName=e.cloudGraphHostName,r.msGraphHost=e.msGraphHost,e.tenantProfiles)r.tenantProfiles=e.tenantProfiles;else{const l=[];if(e.idTokenClaims){const u=cd(e.homeAccountId,e.idTokenClaims);l.push(u)}r.tenantProfiles=l}return r}static createFromAccountInfo(e,n,o){var i;const r=new jt;return r.authorityType=e.authorityType||Tl.GENERIC_ACCOUNT_TYPE,r.homeAccountId=e.homeAccountId,r.localAccountId=e.localAccountId,r.nativeAccountId=e.nativeAccountId,r.realm=e.tenantId,r.environment=e.environment,r.username=e.username,r.name=e.name,r.cloudGraphHostName=n,r.msGraphHost=o,r.tenantProfiles=Array.from(((i=e.tenantProfiles)==null?void 0:i.values())||[]),r}static generateHomeAccountId(e,n,o,r,i){if(!(n===po.Adfs||n===po.Dsts)){if(e)try{const s=xl(e,r.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}o.warning("No client info in response")}return(i==null?void 0:i.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,o){if(!e||!n)return!1;let r=!0;if(o){const i=e.idTokenClaims||{},s=n.idTokenClaims||{};r=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&r}}function Mk(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}function Jv(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Pl(t){if(!t||t.indexOf("=")<0)return null;try{const e=Jv(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.error||n.error_description||n.state)return n}catch{throw te(vv)}return null}class at{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw mt(nd);e.includes("#")||(this._urlString=at.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return ho.endsWith(n,"?")?n=n.slice(0,-1):ho.endsWith(n,"?/")&&(n=n.slice(0,-2)),ho.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw mt(Ua)}if(!e.HostNameAndPort||!e.PathSegments)throw mt(Ua);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw mt(Fv)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return at.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),o=n.PathSegments;return e&&o.length!==0&&(o[0]===Ar.COMMON||o[0]===Ar.ORGANIZATIONS)&&(o[0]=e),at.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw mt(Ua);const o={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let r=o.AbsolutePath.split("/");return r=r.filter(i=>i&&i.length>0),o.PathSegments=r,o.QueryString&&o.QueryString.endsWith("/")&&(o.QueryString=o.QueryString.substring(0,o.QueryString.length-1)),o}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),o=e.match(n);if(!o)throw mt(Ua);return o[2]}static getAbsoluteUrl(e,n){if(e[0]===K.FORWARD_SLASH){const o=new at(n).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new at(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Pl(e)}}const Xv={endpointMetadata:{"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Zv=Xv.endpointMetadata,ud=Xv.instanceDiscoveryMetadata,ey=new Set;ud.metadata.forEach(t=>{t.aliases.forEach(e=>{ey.add(e)})});function Lk(t,e){var r;let n;const o=t.canonicalAuthority;if(o){const i=new at(o).getUrlComponents().HostNameAndPort;n=ty(i,(r=t.cloudDiscoveryMetadata)==null?void 0:r.metadata,Un.CONFIG,e)||ty(i,ud.metadata,Un.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function ty(t,e,n,o){if(o==null||o.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const r=Ml(e,t);if(r)return o==null||o.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),r.aliases;o==null||o.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Dk(t){return Ml(ud.metadata,t)}function Ml(t,e){for(let n=0;n<t.length;n++){const o=t[n];if(o.aliases.includes(e))return o}return null}class hd{constructor(){this.expiresAt=gn.nowSeconds()+Ma.REFRESH_TIME_SECONDS}updateCloudDiscoveryMetadata(e,n){this.aliases=e.aliases,this.preferred_cache=e.preferred_cache,this.preferred_network=e.preferred_network,this.aliasesFromNetwork=n}updateEndpointMetadata(e,n){this.authorization_endpoint=e.authorization_endpoint,this.token_endpoint=e.token_endpoint,this.end_session_endpoint=e.end_session_endpoint,this.issuer=e.issuer,this.endpointsFromNetwork=n,this.jwks_uri=e.jwks_uri}updateCanonicalAuthority(e){this.canonical_authority=e}resetExpiresAt(){this.expiresAt=gn.nowSeconds()+Ma.REFRESH_TIME_SECONDS}isExpired(){return this.expiresAt<=gn.nowSeconds()}static isAuthorityMetadataEntity(e,n){return n?e.indexOf(Ma.CACHE_KEY)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri"):!1}}function Uk(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}function Fk(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}const F={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromiseMeasurement",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},Hk={NotStarted:0,InProgress:1,Completed:2},wi=(t,e,n,o,r)=>(...i)=>{n.trace(`Executing function ${e}`);const s=o==null?void 0:o.startMeasurement(e,r);try{const a=t(...i);return s==null||s.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s==null||s.end({success:!1}),a}},pe=(t,e,n,o,r)=>(...i)=>{n.trace(`Executing function ${e}`);const s=o==null?void 0:o.startMeasurement(e,r);return o==null||o.setPreQueueTime(e,r),t(...i).then(a=>(n.trace(`Returning result from ${e}`),s==null||s.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s==null||s.end({success:!1}),a})};class Ll{constructor(e,n,o,r){this.networkInterface=e,this.logger=n,this.performanceClient=o,this.correlationId=r}async detectRegion(e,n){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(F.RegionDiscoveryDetectRegion,this.correlationId);let o=e;if(o)n.region_source=us.ENVIRONMENT_VARIABLE;else{const i=Ll.IMDS_OPTIONS;try{const s=await pe(this.getRegionFromIMDS.bind(this),F.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(K.IMDS_VERSION,i);if(s.status===Sl.httpSuccess&&(o=s.body,n.region_source=us.IMDS),s.status===Sl.httpBadRequest){const a=await pe(this.getCurrentVersion.bind(this),F.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return n.region_source=us.FAILED_AUTO_DETECTION,null;const c=await pe(this.getRegionFromIMDS.bind(this),F.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===Sl.httpSuccess&&(o=c.body,n.region_source=us.IMDS)}}catch{return n.region_source=us.FAILED_AUTO_DETECTION,null}}return o||(n.region_source=us.FAILED_AUTO_DETECTION),o||null}async getRegionFromIMDS(e,n){var o;return(o=this.performanceClient)==null||o.addQueueMeasurement(F.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${K.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,K.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(F.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const o=await this.networkInterface.sendGetRequestAsync(`${K.IMDS_ENDPOINT}?format=json`,e);return o.status===Sl.httpBadRequest&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}}}Ll.IMDS_OPTIONS={headers:{Metadata:"true"}};class un{constructor(e,n,o,r,i,s,a){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=o,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=s,this.correlationId=a,this.regionDiscovery=new Ll(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(K.CIAM_AUTH_URL))return po.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case K.ADFS:return po.Adfs;case K.DSTS:return po.Dsts}return po.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new at(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw te(Jo)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw te(Jo)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw te(Jo)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw te(Rv);return this.replacePath(this.metadata.end_session_endpoint)}else throw te(Jo)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw te(Jo)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw te(Jo)}canReplaceTenant(e){return e.PathSegments.length===1&&!un.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===po.Default&&this.protocolMode===Xo.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const o=new at(this.metadata.canonical_authority).getUrlComponents(),r=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((i,s)=>{let a=r[s];if(s===0&&this.canReplaceTenant(o)){const c=new at(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];a!==c&&(this.logger.verbose(`Replacing tenant domain name ${a} with id ${c}`),a=c)}i!==a&&(n=n.replace(`/${a}/`,`/${i}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===po.Adfs||this.protocolMode!==Xo.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await pe(this.updateCloudDiscoveryMetadata.bind(this),F.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const o=await pe(this.updateEndpointMetadata.bind(this),F.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:o})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e=new hd,e.updateCanonicalAuthority(this.canonicalAuthority)),e}updateCachedMetadata(e,n,o){n!==Un.CACHE&&(o==null?void 0:o.source)!==Un.CACHE&&(e.resetExpiresAt(),e.updateCanonicalAuthority(this.canonicalAuthority));const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===Un.HARDCODED_VALUES&&((i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion)&&n.metadata){const a=await pe(this.updateMetadataWithRegionalInformation.bind(this),F.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);e.updateEndpointMetadata(a,!1)}return n.source}let o=await pe(this.getEndpointMetadataFromNetwork.bind(this),F.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(o)return(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&(o=await pe(this.updateMetadataWithRegionalInformation.bind(this),F.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(o)),e.updateEndpointMetadata(o,!0),Un.NETWORK;throw te(mv,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),e.updateEndpointMetadata(n,!1),{source:Un.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const r=this.getEndpointMetadataFromHardcodedValues();if(r)return e.updateEndpointMetadata(r,!1),{source:Un.HARDCODED_VALUES,metadata:r};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const o=e.isExpired();return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!o?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Un.CACHE}):(o&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new at(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw mt($v)}return null}async getEndpointMetadataFromNetwork(){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(F.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const r=await this.networkInterface.sendGetRequestAsync(n,e);return Mk(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.canonicalAuthority in Zv?Zv[this.canonicalAuthority]:null}async updateMetadataWithRegionalInformation(e){var o,r,i;(o=this.performanceClient)==null||o.addQueueMeasurement(F.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(r=this.authorityOptions.azureRegionConfiguration)==null?void 0:r.azureRegion;if(n){if(n!==K.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Bh.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,un.replaceWithRegionalInformation(e,n);const s=await pe(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),F.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(s)return this.regionDiscoveryMetadata.region_outcome=Bh.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=s,un.replaceWithRegionalInformation(e,s);this.regionDiscoveryMetadata.region_outcome=Bh.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const o=await pe(this.getCloudDiscoveryMetadataFromNetwork.bind(this),F.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(o)return e.updateCloudDiscoveryMetadata(o,!0),Un.NETWORK;throw mt(zv)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||K.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||K.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||K.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),e.updateCloudDiscoveryMetadata(n,!1),Un.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const r=Dk(this.hostnameAndPort);if(r)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),e.updateCloudDiscoveryMetadata(r,!1),Un.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const o=e.isExpired();return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!o?(this.logger.verbose("Found cloud discovery metadata in the cache."),Un.CACHE):(o&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===po.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),un.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=Ml(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),mt(id)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),un.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${K.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let o=null;try{const i=await this.networkInterface.sendGetRequestAsync(e,n);let s,a;if(Uk(i.body))s=i.body,a=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(Fk(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===K.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=Ml(a,this.hostnameAndPort)}catch(i){if(i instanceof It)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{const s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return o||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),o=un.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),o}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&at.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let o;if(n&&n.azureCloudInstance!==ed.None){const r=n.tenant?n.tenant:K.DEFAULT_COMMON_TENANT;o=`${n.azureCloudInstance}/${r}/`}return o||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw te(Jo)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return ey.has(e)}static isPublicCloudAuthority(e){return K.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,o){const r=new at(e);r.validateAsUri();const i=r.getUrlComponents();let s=`${n}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${n}.${K.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=at.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:s}).urlString;return o?`${a}?${o}`:a}static replaceWithRegionalInformation(e,n){const o={...e};return o.authorization_endpoint=un.buildRegionalAuthorityString(o.authorization_endpoint,n),o.token_endpoint=un.buildRegionalAuthorityString(o.token_endpoint,n),o.end_session_endpoint&&(o.end_session_endpoint=un.buildRegionalAuthorityString(o.end_session_endpoint,n)),o}static transformCIAMAuthority(e){let n=e;const o=new at(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(K.CIAM_AUTH_URL)){const r=o.HostNameAndPort.split(".")[0];n=`${n}${r}${K.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}un.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ar.COMMON,Ar.CONSUMERS,Ar.ORGANIZATIONS]);function qk(t){const e=new at(t).getUrlComponents().PathSegments.slice(-1)[0].toLowerCase();switch(e){case Ar.COMMON:case Ar.ORGANIZATIONS:case Ar.CONSUMERS:return;default:return e}}function ny(t){return t.endsWith(K.FORWARD_SLASH)?t:`${t}${K.FORWARD_SLASH}`}function Bk(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw mt(id)}return{canonicalAuthority:t.authority?ny(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}class Zo{constructor(e,n,o,r){this.clientId=e,this.cryptoImpl=n,this.commonLogger=o.clone(Nv,Zh),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const n=this.getAllAccounts(e);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e){const n=this.getAccountsFilteredBy(e);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,n){return e.flatMap(o=>this.getAccountInfoForTenantProfiles(o,n))}getAccountInfoForTenantProfiles(e,n){return this.getTenantProfilesFromAccountEntity(e,n==null?void 0:n.tenantId,n)}getTenantedAccountInfoByFilter(e,n,o,r){let i=null,s;if(r&&!this.tenantProfileMatchesFilter(o,r))return null;const a=this.getIdToken(e,n,o.tenantId);return a&&(s=Ci(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,r))?null:(i=ld(e,o,s),i)}getTenantProfilesFromAccountEntity(e,n,o){const r=e.getAccountInfo();let i=r.tenantProfiles||new Map;const s=this.getTokenKeys();if(n){const c=i.get(n);if(c)i=new Map([[n,c]]);else return[]}const a=[];return i.forEach(c=>{const l=this.getTenantedAccountInfoByFilter(r,s,c,o);l&&a.push(l)}),a}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n){if(!e)throw te(Sv);e.account&&this.setAccount(e.account),e.idToken&&(n==null?void 0:n.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(n==null?void 0:n.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(n==null?void 0:n.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}async saveAccessToken(e){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),r=qt.fromString(e.target),i=[];o.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,n,!1))return;const a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,n)&&qt.fromString(a.target).intersectingScopeSets(r)&&i.push(this.removeAccessToken(s))}),await Promise.all(i),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const n=this.getAccountKeys(),o=[];return n.forEach(r=>{var c;if(!this.isAccountKey(r,e.homeAccountId))return;const i=this.getAccount(r,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const s={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},a=(c=i.tenantProfiles)==null?void 0:c.filter(l=>this.tenantProfileMatchesFilter(l,s));a&&a.length===0||o.push(i)}),o}isAccountKey(e,n,o){return!(e.split(ln.CACHE_KEY_SEPARATOR).length<3||n&&!e.toLowerCase().includes(n.toLowerCase())||o&&!e.toLowerCase().includes(o.toLowerCase()))}isCredentialKey(e){if(e.split(ln.CACHE_KEY_SEPARATOR).length<6)return!1;const n=e.toLowerCase();if(n.indexOf(Ne.ID_TOKEN.toLowerCase())===-1&&n.indexOf(Ne.ACCESS_TOKEN.toLowerCase())===-1&&n.indexOf(Ne.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&n.indexOf(Ne.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(n.indexOf(Ne.REFRESH_TOKEN.toLowerCase())>-1){const o=`${Ne.REFRESH_TOKEN}${ln.CACHE_KEY_SEPARATOR}${this.clientId}${ln.CACHE_KEY_SEPARATOR}`,r=`${Ne.REFRESH_TOKEN}${ln.CACHE_KEY_SEPARATOR}${Pa}${ln.CACHE_KEY_SEPARATOR}`;if(n.indexOf(o.toLowerCase())===-1&&n.indexOf(r.toLowerCase())===-1)return!1}else if(n.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===Ne.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===gt.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)}getAppMetadataFilteredByInternal(e,n){const o=this.getKeys(),r={};return o.forEach(i=>{if(!this.isAppMetadata(i))return;const s=this.getAppMetadata(i);s&&(e&&!this.matchEnvironment(s,e)||n&&!this.matchClientId(s,n)||(r[i]=s))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let o=null;return n.forEach(r=>{if(!this.isAuthorityMetadata(r)||r.indexOf(this.clientId)===-1)return;const i=this.getAuthorityMetadata(r);i&&i.aliases.indexOf(e)!==-1&&(o=i)}),o}async removeAllAccounts(){const e=this.getAccountKeys(),n=[];e.forEach(o=>{n.push(this.removeAccount(o))}),await Promise.all(n)}async removeAccount(e){const n=this.getAccount(e,this.commonLogger);n&&(await this.removeAccountContext(n),this.removeItem(e))}async removeAccountContext(e){const n=this.getTokenKeys(),o=e.generateAccountId(),r=[];n.idToken.forEach(i=>{i.indexOf(o)===0&&this.removeIdToken(i)}),n.accessToken.forEach(i=>{i.indexOf(o)===0&&r.push(this.removeAccessToken(i))}),n.refreshToken.forEach(i=>{i.indexOf(o)===0&&this.removeRefreshToken(i)}),await Promise.all(r)}updateOutdatedCachedAccount(e,n,o){var r;if(n&&n.isSingleTenant()){(r=this.commonLogger)==null||r.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(u=>u.startsWith(n.homeAccountId)),s=[];i.forEach(u=>{const h=this.getCachedAccountEntity(u);h&&s.push(h)});const a=s.find(u=>ad(u.realm,u.homeAccountId))||s[0];a.tenantProfiles=s.map(u=>({tenantId:u.realm,localAccountId:u.localAccountId,name:u.name,isHomeTenant:ad(u.realm,u.homeAccountId)}));const c=Zo.toObject(new jt,{...a}),l=c.generateAccountKey();return i.forEach(u=>{u!==l&&this.removeOutdatedAccount(e)}),this.setAccount(c),o==null||o.verbose("Updated an outdated account entity in the cache"),c}return n}async removeAccessToken(e){const n=this.getAccessTokenCredential(e);if(n){if(n.credentialType.toLowerCase()===Ne.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&n.tokenType===gt.POP){const o=n.keyId;if(o)try{await this.cryptoImpl.removeTokenBindingKey(o)}catch{throw te(Iv)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(e=>{this.isAppMetadata(e)&&this.removeItem(e)}),!0}readCacheRecord(e,n,o,r,i){const s=e.tenantId||qk(n.authority),a=this.getTokenKeys(),c=this.readAccountFromCache(e),l=this.getIdToken(e,a,s,r,i),u=this.getAccessToken(e,n,a,s,r,i),h=this.getRefreshToken(e,!1,a,r,i),d=this.readAppMetadataFromCache(o);return{account:c,idToken:l,accessToken:u,refreshToken:h,appMetadata:d}}readAccountFromCache(e){const n=jt.generateAccountCacheKey(e);return this.getAccount(n,this.commonLogger)}getIdToken(e,n,o,r,i){this.commonLogger.trace("CacheManager - getIdToken called");const s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ne.ID_TOKEN,clientId:this.clientId,realm:o},a=this.getIdTokensByFilter(s,n),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){const u=new Map;a.forEach((d,p)=>{d.realm===e.tenantId&&u.set(p,d)});const h=u.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(h===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,h)=>{this.removeIdToken(h)}),r&&i&&r.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n){const o=n&&n.idToken||this.getTokenKeys().idToken,r=new Map;return o.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...e}))return;const s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&r.set(i,s)}),r}idTokenKeyMatchesFilter(e,n){const o=e.toLowerCase();return!(n.clientId&&o.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&o.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,n,o,r,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");const a=qt.createSearchScopes(n.scopes),c=n.authenticationScheme||gt.BEARER,l=c&&c.toLowerCase()!==gt.BEARER.toLowerCase()?Ne.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ne.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:r||e.tenantId,target:a,tokenType:c,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},h=o&&o.accessToken||this.getTokenKeys().accessToken,d=[];h.forEach(m=>{if(this.accessTokenKeyMatchesFilter(m,u,!0)){const _=this.getAccessTokenCredential(m);_&&this.credentialMatchesFilter(_,u)&&d.push(_)}});const p=d.length;return p<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):p>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach(m=>{this.removeAccessToken(Da(m))}),i&&s&&i.addFields({multiMatchedAT:d.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,n,o){const r=e.toLowerCase();if(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&r.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&r.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const i=n.target.asArray();for(let s=0;s<i.length;s++){if(o&&!r.includes(i[s].toLowerCase()))return!1;if(!o&&r.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const n=this.getTokenKeys(),o=[];return n.accessToken.forEach(r=>{if(!this.accessTokenKeyMatchesFilter(r,e,!0))return;const i=this.getAccessTokenCredential(r);i&&this.credentialMatchesFilter(i,e)&&o.push(i)}),o}getRefreshToken(e,n,o,r,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const s=n?Pa:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ne.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(h=>{if(this.refreshTokenKeyMatchesFilter(h,a)){const d=this.getRefreshTokenCredential(h);d&&this.credentialMatchesFilter(d,a)&&l.push(d)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&r&&i&&r.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,n){const o=e.toLowerCase();return!(n.familyId&&o.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&o.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&o.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},o=this.getAppMetadataFilteredBy(n),r=Object.keys(o).map(s=>o[s]),i=r.length;if(i<1)return null;if(i>1)throw te(Cv);return r[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===Pa)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const o=e.oid||e.sub;return n===o}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var o;return n.toLowerCase()===((o=e.name)==null?void 0:o.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const r=Lk(this.staticAuthorityOptions,this.commonLogger);if(r.includes(n)&&r.includes(e.environment))return!0}const o=this.getAuthorityMetadataByAlias(n);return!!(o&&o.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var o;return((o=e.realm)==null?void 0:o.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==Ne.ACCESS_TOKEN&&e.credentialType!==Ne.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:qt.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(qh)!==-1}isAuthorityMetadata(e){return e.indexOf(Ma.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Ma.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const o in n)e[o]=n[o];return e}}class Kk extends Zo{setAccount(){throw te(Ve)}getAccount(){throw te(Ve)}getCachedAccountEntity(){throw te(Ve)}setIdTokenCredential(){throw te(Ve)}getIdTokenCredential(){throw te(Ve)}setAccessTokenCredential(){throw te(Ve)}getAccessTokenCredential(){throw te(Ve)}setRefreshTokenCredential(){throw te(Ve)}getRefreshTokenCredential(){throw te(Ve)}setAppMetadata(){throw te(Ve)}getAppMetadata(){throw te(Ve)}setServerTelemetry(){throw te(Ve)}getServerTelemetry(){throw te(Ve)}setAuthorityMetadata(){throw te(Ve)}getAuthorityMetadata(){throw te(Ve)}getAuthorityMetadataKeys(){throw te(Ve)}setThrottlingCache(){throw te(Ve)}getThrottlingCache(){throw te(Ve)}removeItem(){throw te(Ve)}containsKey(){throw te(Ve)}getKeys(){throw te(Ve)}getAccountKeys(){throw te(Ve)}getTokenKeys(){throw te(Ve)}async clear(){throw te(Ve)}updateCredentialCacheKey(){throw te(Ve)}removeOutdatedAccount(){throw te(Ve)}}const jk=300,oy={tokenRenewalOffsetSeconds:jk,preventCorsPreflight:!1},$k={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Yt.Info,correlationId:K.EMPTY_STRING},zk={claimsBasedCachingEnabled:!1},Wk={async sendGetRequestAsync(){throw te(Ve)},async sendPostRequestAsync(){throw te(Ve)}},Gk={sku:K.SKU,version:Zh,cpu:K.EMPTY_STRING,os:K.EMPTY_STRING},Vk={clientSecret:K.EMPTY_STRING,clientAssertion:void 0},Yk={azureCloudInstance:ed.None,tenant:`${K.DEFAULT_COMMON_TENANT}`},Qk={application:{appName:"",appVersion:""}};function Jk({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:o,storageInterface:r,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:h,serializableCache:d}){const p={...$k,...n};return{authOptions:Xk(t),systemOptions:{...oy,...e},loggerOptions:p,cacheOptions:{...zk,...o},storageInterface:r||new Kk(t.clientId,Il,new bi(p)),networkInterface:i||Wk,cryptoInterface:s||Il,clientCredentials:a||Vk,libraryInfo:{...Gk,...c},telemetry:{...Qk,...l},serverTelemetryManager:u||null,persistencePlugin:h||null,serializableCache:d||null}}function Xk(t){return{clientCapabilities:[],azureCloudOptions:Yk,skipAuthorityMetadataCache:!1,...t}}function dd(t){return t.authOptions.authority.options.protocolMode===Xo.OIDC}class Or extends It{constructor(e,n,o){super(e,n,o),this.name="ServerError",Object.setPrototypeOf(this,Or.prototype)}}class Ro{static generateThrottlingStorageKey(e){return`${La.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n){var i;const o=Ro.generateThrottlingStorageKey(n),r=e.getThrottlingCache(o);if(r){if(r.throttleTime<Date.now()){e.removeItem(o);return}throw new Or(((i=r.errorCodes)==null?void 0:i.join(" "))||K.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,n,o){if(Ro.checkResponseStatus(o)||Ro.checkResponseForRetryAfter(o)){const r={throttleTime:Ro.calculateThrottleTime(parseInt(o.headers[Io.RETRY_AFTER])),error:o.body.error,errorCodes:o.body.error_codes,errorMessage:o.body.error_description,subError:o.body.suberror};e.setThrottlingCache(Ro.generateThrottlingStorageKey(n),r)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Io.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,o=Date.now()/1e3;return Math.floor(Math.min(o+(n||La.DEFAULT_THROTTLE_TIME_SECONDS),o+La.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,o,r){const i={clientId:n,authority:o.authority,scopes:o.scopes,homeAccountIdentifier:r,claims:o.claims,authenticationScheme:o.authenticationScheme,resourceRequestMethod:o.resourceRequestMethod,resourceRequestUri:o.resourceRequestUri,shrClaims:o.shrClaims,sshKid:o.sshKid},s=this.generateThrottlingStorageKey(i);e.removeItem(s)}}class Zk{constructor(e,n){this.networkClient=e,this.cacheManager=n}async sendPostRequest(e,n,o){Ro.preProcess(this.cacheManager,e);let r;try{r=await this.networkClient.sendPostRequestAsync(n,o)}catch(i){throw i instanceof It?i:te(gv)}return Ro.postProcess(this.cacheManager,e,r),r}}const Fn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"},ps="client_id",eA="redirect_uri",ry="response_type",tA="response_mode",nA="grant_type",oA="claims",rA="scope",iA="refresh_token",sA="state",aA="nonce",cA="prompt",lA="code",uA="code_challenge",hA="code_challenge_method",dA="code_verifier",pA="client-request-id",fA="x-client-SKU",gA="x-client-VER",mA="x-client-OS",vA="x-client-CPU",yA="x-client-current-telemetry",_A="x-client-last-telemetry",bA="x-ms-lib-capability",CA="x-app-name",wA="x-app-ver",EA="post_logout_redirect_uri",TA="id_token_hint",SA="device_code",kA="client_secret",AA="client_assertion",IA="client_assertion_type",iy="token_type",sy="req_cnf",RA="assertion",OA="requested_token_use",ay="return_spa_code",NA="nativebroker",xA="logout_hint",PA="sid",MA="login_hint",LA="domain_hint";class Ei{static validateRedirectUri(e){if(!e)throw mt(Uv)}static validatePrompt(e){const n=[];for(const o in cn)n.push(cn[o]);if(n.indexOf(e)<0)throw mt(qv)}static validateClaims(e){try{JSON.parse(e)}catch{throw mt(od)}}static validateCodeChallengeParams(e,n){if(!e||!n)throw mt(rd);this.validateCodeChallengeMethod(n)}static validateCodeChallengeMethod(e){if([av.PLAIN,av.S256].indexOf(e)<0)throw mt(jv)}static sanitizeEQParams(e,n){return e?(n.forEach((o,r)=>{e[r]&&delete e[r]}),Object.fromEntries(Object.entries(e).filter(o=>o[1]!==""))):{}}}class Fa{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(ry,encodeURIComponent(K.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(ry,encodeURIComponent(`${K.TOKEN_RESPONSE_TYPE} ${K.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(tA,encodeURIComponent(e||ak.QUERY))}addNativeBroker(){this.parameters.set(NA,encodeURIComponent("1"))}addScopes(e,n=!0,o=Na){n&&!o.includes("openid")&&!e.includes("openid")&&o.push("openid");const r=n?[...e||[],...o]:e||[],i=new qt(r);this.parameters.set(rA,encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(ps,encodeURIComponent(e))}addRedirectUri(e){Ei.validateRedirectUri(e),this.parameters.set(eA,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Ei.validateRedirectUri(e),this.parameters.set(EA,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(TA,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(LA,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(MA,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(Io.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(Io.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(PA,encodeURIComponent(e))}addClaims(e,n){const o=this.addClientCapabilitiesToClaims(e,n);Ei.validateClaims(o),this.parameters.set(oA,encodeURIComponent(o))}addCorrelationId(e){this.parameters.set(pA,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(fA,e.sku),this.parameters.set(gA,e.version),e.os&&this.parameters.set(mA,e.os),e.cpu&&this.parameters.set(vA,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(CA,e.appName),e!=null&&e.appVersion&&this.parameters.set(wA,e.appVersion)}addPrompt(e){Ei.validatePrompt(e),this.parameters.set(`${cA}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(sA,encodeURIComponent(e))}addNonce(e){this.parameters.set(aA,encodeURIComponent(e))}addCodeChallengeParams(e,n){if(Ei.validateCodeChallengeParams(e,n),e&&n)this.parameters.set(uA,encodeURIComponent(e)),this.parameters.set(hA,encodeURIComponent(n));else throw mt(rd)}addAuthorizationCode(e){this.parameters.set(lA,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(SA,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(iA,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(dA,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(kA,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(AA,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(IA,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(RA,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(OA,encodeURIComponent(e))}addGrantType(e){this.parameters.set(nA,encodeURIComponent(e))}addClientInfo(){this.parameters.set(ck,"1")}addExtraQueryParameters(e){const n=Ei.sanitizeEQParams(e,this.parameters);Object.keys(n).forEach(o=>{this.parameters.set(o,e[o])})}addClientCapabilitiesToClaims(e,n){let o;if(!e)o={};else try{o=JSON.parse(e)}catch{throw mt(od)}return n&&n.length>0&&(o.hasOwnProperty(El.ACCESS_TOKEN)||(o[El.ACCESS_TOKEN]={}),o[El.ACCESS_TOKEN][El.XMS_CC]={values:n}),JSON.stringify(o)}addUsername(e){this.parameters.set(uv.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(uv.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(iy,gt.POP),this.parameters.set(sy,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(iy,gt.SSH),this.parameters.set(sy,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(yA,e.generateCurrentRequestHeaderValue()),this.parameters.set(_A,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(bA,La.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(xA,encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach((n,o)=>{e.push(`${o}=${n}`)}),e.join("&")}}class Ti{static async createDiscoveredInstance(e,n,o,r,i,s,a){s==null||s.addQueueMeasurement(F.AuthorityFactoryCreateDiscoveredInstance,a);const c=un.transformCIAMAuthority(ny(e)),l=Ti.createInstance(c,n,o,r,i,s,a);try{return await pe(l.resolveEndpointsAsync.bind(l),F.AuthorityResolveEndpointsAsync,i,s,a)(),l}catch{throw te(Jo)}}static createInstance(e,n,o,r,i,s,a){if(!e)throw mt(nd);return new un(e,n,o,r,i,s,a)}}class pd{constructor(e,n){this.config=Jk(e),this.logger=new bi(this.config.loggerOptions,Nv,Zh),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new Zk(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Io.CONTENT_TYPE]=K.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Fn.HOME_ACCOUNT_ID:try{const o=ds(e.credential);n[Io.CCS_HEADER]=`Oid:${o.uid}@${o.utid}`}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Fn.UPN:n[Io.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,o,r,i,s){var c,l,u,h;s&&((c=this.performanceClient)==null||c.addQueueMeasurement(s,i));const a=await this.networkManager.sendPostRequest(r,e,{body:n,headers:o});return(h=this.performanceClient)==null||h.addFields({refreshTokenSize:((l=a.body.refresh_token)==null?void 0:l.length)||0,httpVerToken:((u=a.headers)==null?void 0:u[Io.X_MS_HTTP_VERSION])||""},i),this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async updateAuthority(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.UpdateTokenEndpointAuthority,n);const o=`https://${e}/${this.authority.tenant}/`,r=await Ti.createDiscoveredInstance(o,this.networkClient,this.cacheManager,this.authority.options,this.logger,this.performanceClient,n);this.authority=r}createTokenQueryParameters(e){const n=new Fa;return e.tokenQueryParameters&&n.addExtraQueryParameters(e.tokenQueryParameters),n.createQueryString()}}const Dl="no_tokens_found",cy="native_account_unavailable",ly=["interaction_required","consent_required","login_required"],DA=["message_only","additional_action","basic_action","user_password_expired","consent_required"],UA={[Dl]:"No refresh token found in the cache. Please sign-in.",[cy]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API."};class Oo extends It{constructor(e,n,o,r,i,s,a){super(e,n,o),Object.setPrototypeOf(this,Oo.prototype),this.timestamp=r||K.EMPTY_STRING,this.traceId=i||K.EMPTY_STRING,this.correlationId=s||K.EMPTY_STRING,this.claims=a||K.EMPTY_STRING,this.name="InteractionRequiredAuthError"}}function uy(t,e,n){const o=!!t&&ly.indexOf(t)>-1,r=!!n&&DA.indexOf(n)>-1,i=!!e&&ly.some(s=>e.indexOf(s)>-1);return o||i||r}function hy(t){return new Oo(t,UA[t])}class fs{constructor(e,n,o,r,i){this.account=e||null,this.idToken=n||null,this.accessToken=o||null,this.refreshToken=r||null,this.appMetadata=i||null}}class fo{static setRequestState(e,n,o){const r=fo.generateLibraryState(e,o);return n?`${r}${K.RESOURCE_DELIM}${n}`:r}static generateLibraryState(e,n){if(!e)throw te(Qh);const o={id:e.createNewGuid()};n&&(o.meta=n);const r=JSON.stringify(o);return e.base64Encode(r)}static parseRequestState(e,n){if(!e)throw te(Qh);if(!n)throw te(hs);try{const o=n.split(K.RESOURCE_DELIM),r=o[0],i=o.length>1?o.slice(1).join(K.RESOURCE_DELIM):K.EMPTY_STRING,s=e.base64Decode(r),a=JSON.parse(s);return{userRequestState:i||K.EMPTY_STRING,libraryState:a}}catch{throw te(hs)}}}const FA={SW:"sw",UHW:"uhw"};class gs{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.PopTokenGenerateCnf,e.correlationId);const o=await pe(this.generateKid.bind(this),F.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),r=this.cryptoUtils.base64Encode(JSON.stringify(o));return{kid:o.kid,reqCnfString:r,reqCnfHash:await this.cryptoUtils.hashString(r)}}async generateKid(e){var n;return(n=this.performanceClient)==null||n.addQueueMeasurement(F.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:FA.SW}}async signPopToken(e,n,o){return this.signPayload(e,n,o)}async signPayload(e,n,o,r){var h;const{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:l}=o,u=(h=s?new at(s):void 0)==null?void 0:h.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:gn.nowSeconds(),m:i==null?void 0:i.toUpperCase(),u:u==null?void 0:u.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:u==null?void 0:u.AbsolutePath,q:u!=null&&u.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0,...r},n,l,o.correlationId)}}class ms{generateAppMetadataKey(){return ms.generateAppMetadataCacheKey(this.environment,this.clientId)}static generateAppMetadataCacheKey(e,n){return[qh,e,n].join(ln.CACHE_KEY_SEPARATOR).toLowerCase()}static createAppMetadataEntity(e,n,o){const r=new ms;return r.clientId=e,r.environment=n,o&&(r.familyId=o),r}static isAppMetadataEntity(e,n){return n?e.indexOf(qh)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment"):!1}}class HA{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Si{constructor(e,n,o,r,i,s,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=o,this.logger=r,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,n){if(!e.state||!n)throw e.state?te(kl,"Cached State"):te(kl,"Server State");let o,r;try{o=decodeURIComponent(e.state)}catch{throw te(hs,e.state)}try{r=decodeURIComponent(n)}catch{throw te(hs,e.state)}if(o!==r)throw te(yv);if(e.error||e.error_description||e.suberror)throw uy(e.error,e.error_description,e.suberror)?new Oo(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||""):new Or(e.error||"",e.error_description,e.suberror)}validateTokenResponse(e,n){if(e.error||e.error_description||e.suberror){const o=`${e.error_codes} - [${e.timestamp}]: ${e.error_description} - Correlation ID: ${e.correlation_id} - Trace ID: ${e.trace_id}`,r=new Or(e.error,o,e.suberror);if(n&&e.status&&e.status>=wl.SERVER_ERROR_RANGE_START&&e.status<=wl.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${r}`);return}else if(n&&e.status&&e.status>=wl.CLIENT_ERROR_RANGE_START&&e.status<=wl.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${r}`);return}throw uy(e.error,e.error_description,e.suberror)?new Oo(e.error,e.error_description,e.suberror,e.timestamp||K.EMPTY_STRING,e.trace_id||K.EMPTY_STRING,e.correlation_id||K.EMPTY_STRING,e.claims||K.EMPTY_STRING):r}}async handleServerTokenResponse(e,n,o,r,i,s,a,c,l){var m;(m=this.performanceClient)==null||m.addQueueMeasurement(F.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=Ci(e.id_token||K.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw te(_v);if(r.maxAge||r.maxAge===0){const _=u.auth_time;if(!_)throw te(zh);xv(_,r.maxAge)}}this.homeAccountIdentifier=jt.generateHomeAccountId(e.client_info||K.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,u);let h;i&&i.state&&(h=fo.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||r.sshKid||void 0;const d=this.generateCacheRecord(e,n,o,r,u,s,i);let p;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new HA(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(p)),a&&!c&&d.account){const _=d.account.generateAccountKey();if(!this.cacheStorage.getAccount(_,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Si.generateAuthenticationResult(this.cryptoObj,n,d,!1,r,u,h,void 0,l)}await this.cacheStorage.saveCacheRecord(d,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&p&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(p))}return Si.generateAuthenticationResult(this.cryptoObj,n,d,!1,r,u,h,e,l)}generateCacheRecord(e,n,o,r,i,s,a){const c=n.getPreferredCache();if(!c)throw te(Vh);const l=Qv(i);let u,h;e.id_token&&i&&(u=Rl(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),h=fd(this.cacheStorage,n,this.homeAccountIdentifier,i,this.cryptoObj.base64Decode,e.client_info,l,a,void 0,this.logger));let d=null;if(e.access_token){const _=e.scope?qt.fromString(e.scope):new qt(r.scopes||[]),T=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,b=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,C=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,y=o+T,v=y+b,w=C&&C>0?o+C:void 0;d=Ol(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||n.tenant,_.printScopes(),y,v,this.cryptoObj.base64Decode,w,e.token_type,s,e.key_id,r.claims,r.requestedClaimsHash)}let p=null;e.refresh_token&&(p=Pv(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s));let m=null;return e.foci&&(m=ms.createAppMetadataEntity(this.clientId,c,e.foci)),new fs(h,u,d,p,m)}static async generateAuthenticationResult(e,n,o,r,i,s,a,c,l){var y,v,w,A;let u=K.EMPTY_STRING,h=[],d=null,p,m,_=K.EMPTY_STRING;if(o.accessToken){if(o.accessToken.tokenType===gt.POP){const S=new gs(e),{secret:E,keyId:O}=o.accessToken;if(!O)throw te(Xh);u=await S.signPopToken(E,O,i)}else u=o.accessToken.secret;h=qt.fromString(o.accessToken.target).asArray(),d=new Date(Number(o.accessToken.expiresOn)*1e3),p=new Date(Number(o.accessToken.extendedExpiresOn)*1e3),o.accessToken.refreshOn&&(m=new Date(Number(o.accessToken.refreshOn)*1e3))}o.appMetadata&&(_=o.appMetadata.familyId===Pa?Pa:"");const T=(s==null?void 0:s.oid)||(s==null?void 0:s.sub)||"",b=(s==null?void 0:s.tid)||"";c!=null&&c.spa_accountid&&o.account&&(o.account.nativeAccountId=c==null?void 0:c.spa_accountid);const C=o.account?ld(o.account.getAccountInfo(),void 0,s):null;return{authority:n.canonicalAuthority,uniqueId:T,tenantId:b,scopes:h,account:C,idToken:((y=o==null?void 0:o.idToken)==null?void 0:y.secret)||"",idTokenClaims:s||{},accessToken:u,fromCache:r,expiresOn:d,extExpiresOn:p,refreshOn:m,correlationId:i.correlationId,requestId:l||K.EMPTY_STRING,familyId:_,tokenType:((v=o.accessToken)==null?void 0:v.tokenType)||K.EMPTY_STRING,state:a?a.userRequestState:K.EMPTY_STRING,cloudGraphHostName:((w=o.account)==null?void 0:w.cloudGraphHostName)||K.EMPTY_STRING,msGraphHost:((A=o.account)==null?void 0:A.msGraphHost)||K.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function fd(t,e,n,o,r,i,s,a,c,l){l==null||l.verbose("setCachedAccount called");const u=t.getAccountKeys().find(m=>m.startsWith(n));let h=null;u&&(h=t.getAccount(u,l));const d=h||jt.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,cloudGraphHostName:a==null?void 0:a.cloud_graph_host_name,msGraphHost:a==null?void 0:a.msgraph_host,nativeAccountId:c},e,r),p=d.tenantProfiles||[];if(s&&!p.find(m=>m.tenantId===s)){const m=cd(n,o);p.push(m)}return d.tenantProfiles=p,d}class dy extends pd{constructor(e,n){var o;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(o=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:o.defaultScopes}async getAuthCodeUrl(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(F.GetAuthCodeUrl,e.correlationId);const n=await pe(this.createAuthCodeUrlQueryString.bind(this),F.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return at.appendQueryString(this.authority.authorizationEndpoint,n)}async acquireToken(e,n){var a,c;if((a=this.performanceClient)==null||a.addQueueMeasurement(F.AuthClientAcquireToken,e.correlationId),!e.code)throw te(wv);const o=gn.nowSeconds(),r=await pe(this.executeTokenRequest.bind(this),F.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=(c=r.headers)==null?void 0:c[Io.X_MS_REQUEST_ID],s=new Si(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(r.body),pe(s.handleServerTokenResponse.bind(s),F.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,o,e,n,void 0,void 0,void 0,i)}handleFragmentResponse(e,n){if(new Si(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,n),!e.code)throw te(Av);return e}getLogoutUri(e){if(!e)throw mt(Kv);const n=this.createLogoutUrlQueryString(e);return at.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var l,u;(l=this.performanceClient)==null||l.addQueueMeasurement(F.AuthClientExecuteTokenRequest,n.correlationId);const o=this.createTokenQueryParameters(n),r=at.appendQueryString(e.tokenEndpoint,o),i=await pe(this.createTokenRequestBody.bind(this),F.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let s;if(n.clientInfo)try{const h=xl(n.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${h.uid}${ln.CLIENT_INFO_SEPARATOR}${h.utid}`,type:Fn.HOME_ACCOUNT_ID}}catch(h){this.logger.verbose("Could not parse client info for CCS Header: "+h)}const a=this.createTokenRequestHeaders(s||n.ccsCredential),c={clientId:((u=n.tokenBodyParameters)==null?void 0:u.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid};return pe(this.executePostToTokenEndpoint.bind(this),F.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(r,i,a,c,n.correlationId,F.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthClientCreateTokenRequestBody,e.correlationId);const n=new Fa;if(n.addClientId(((s=e.tokenBodyParameters)==null?void 0:s[ps])||this.config.authOptions.clientId),this.includeRedirectUri?n.addRedirectUri(e.redirectUri):Ei.validateRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.oidcDefaultScopes),n.addAuthorizationCode(e.code),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!dd(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&n.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;n.addClientAssertion(a.assertion),n.addClientAssertionType(a.assertionType)}if(n.addGrantType(cv.AUTHORIZATION_CODE_GRANT),n.addClientInfo(),e.authenticationScheme===gt.POP){const a=new gs(this.cryptoUtils,this.performanceClient),c=await pe(a.generateCnf.bind(a),F.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);n.addPopToken(c.reqCnfString)}else if(e.authenticationScheme===gt.SSH)if(e.sshJwk)n.addSshJwk(e.sshJwk);else throw mt(Nl);const o=e.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(o),(!ho.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const a=xl(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${a.uid}${ln.CLIENT_INFO_SEPARATOR}${a.utid}`,type:Fn.HOME_ACCOUNT_ID}}catch(a){this.logger.verbose("Could not parse client info for CCS Header: "+a)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Fn.HOME_ACCOUNT_ID:try{const a=ds(r.credential);n.addCcsOid(a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case Fn.UPN:n.addCcsUpn(r.credential);break}return e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[ay])&&n.addExtraQueryParameters({[ay]:"1"}),n.createQueryString()}async createAuthCodeUrlQueryString(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthClientCreateQueryString,e.correlationId);const n=new Fa;n.addClientId(((s=e.extraQueryParameters)==null?void 0:s[ps])||this.config.authOptions.clientId);const o=[...e.scopes||[],...e.extraScopesToConsent||[]];n.addScopes(o,!0,this.oidcDefaultScopes),n.addRedirectUri(e.redirectUri);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(r),n.addResponseMode(e.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),dd(this.config)||n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&n.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&n.addPrompt(e.prompt),e.domainHint&&n.addDomainHint(e.domainHint),e.prompt!==cn.SELECT_ACCOUNT)if(e.sid&&e.prompt===cn.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(e.sid);else if(e.account){const a=this.extractAccountSid(e.account),c=this.extractLoginHint(e.account);if(c){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),n.addLoginHint(c);try{const l=ds(e.account.homeAccountId);n.addCcsOid(l)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===cn.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(a);try{const l=ds(e.account.homeAccountId);n.addCcsOid(l)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(e.account.username);try{const l=ds(e.account.homeAccountId);n.addCcsOid(l)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&n.addNonce(e.nonce),e.state&&n.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker&&(n.addNativeBroker(),e.authenticationScheme===gt.POP)){const a=new gs(this.cryptoUtils),c=await pe(a.generateCnf.bind(a),F.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);n.addPopToken(c.reqCnfHash)}return n.createQueryString()}createLogoutUrlQueryString(e){const n=new Fa;return e.postLogoutRedirectUri&&n.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&n.addCorrelationId(e.correlationId),e.idTokenHint&&n.addIdTokenHint(e.idTokenHint),e.state&&n.addState(e.state),e.logoutHint&&n.addLogoutHint(e.logoutHint),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters),n.createQueryString()}extractAccountSid(e){var n;return((n=e.idTokenClaims)==null?void 0:n.sid)||null}extractLoginHint(e){var n;return((n=e.idTokenClaims)==null?void 0:n.login_hint)||null}}class gd extends pd{constructor(e,n){super(e,n)}async acquireToken(e){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(F.RefreshTokenClientAcquireToken,e.correlationId);const n=gn.nowSeconds(),o=await pe(this.executeTokenRequest.bind(this),F.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),r=(a=o.headers)==null?void 0:a[Io.X_MS_REQUEST_ID],i=new Si(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(o.body),pe(i.handleServerTokenResponse.bind(i),F.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,r)}async acquireTokenByRefreshToken(e){var n;if(!e)throw mt(Bv);if((n=this.performanceClient)==null||n.addQueueMeasurement(F.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw te(Gh);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await pe(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(o){const r=o instanceof Oo&&o.errorCode===Dl,i=o instanceof Or&&o.errorCode===lv.INVALID_GRANT_ERROR&&o.subError===lv.CLIENT_MISMATCH_ERROR;if(r||i)return pe(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw o}return pe(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const o=wi(this.cacheManager.getRefreshToken.bind(this.cacheManager),F.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,void 0,this.performanceClient,e.correlationId);if(!o)throw hy(Dl);const r={...e,refreshToken:o.secret,authenticationScheme:e.authenticationScheme||gt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Fn.HOME_ACCOUNT_ID}};return pe(this.acquireToken.bind(this),F.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(r)}async executeTokenRequest(e,n){var c,l;(c=this.performanceClient)==null||c.addQueueMeasurement(F.RefreshTokenClientExecuteTokenRequest,e.correlationId);const o=this.createTokenQueryParameters(e),r=at.appendQueryString(n.tokenEndpoint,o),i=await pe(this.createTokenRequestBody.bind(this),F.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:((l=e.tokenBodyParameters)==null?void 0:l.clientId)||this.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return pe(this.executePostToTokenEndpoint.bind(this),F.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(r,i,s,a,e.correlationId,F.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(F.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=e.correlationId,o=new Fa;if(o.addClientId(((i=e.tokenBodyParameters)==null?void 0:i[ps])||this.config.authOptions.clientId),e.redirectUri&&o.addRedirectUri(e.redirectUri),o.addScopes(e.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),o.addGrantType(cv.REFRESH_TOKEN_GRANT),o.addClientInfo(),o.addLibraryInfo(this.config.libraryInfo),o.addApplicationTelemetry(this.config.telemetry.application),o.addThrottling(),this.serverTelemetryManager&&!dd(this.config)&&o.addServerTelemetry(this.serverTelemetryManager),o.addCorrelationId(n),o.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&o.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;o.addClientAssertion(a.assertion),o.addClientAssertionType(a.assertionType)}if(e.authenticationScheme===gt.POP){const a=new gs(this.cryptoUtils,this.performanceClient),c=await pe(a.generateCnf.bind(a),F.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);o.addPopToken(c.reqCnfString)}else if(e.authenticationScheme===gt.SSH)if(e.sshJwk)o.addSshJwk(e.sshJwk);else throw mt(Nl);if((!ho.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Fn.HOME_ACCOUNT_ID:try{const a=ds(e.ccsCredential.credential);o.addCcsOid(a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case Fn.UPN:o.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&o.addExtraQueryParameters(e.tokenBodyParameters),o.createQueryString()}}class qA extends pd{constructor(e,n){super(e,n)}async acquireToken(e){try{const[n,o]=await this.acquireCachedToken(e);return o===Ir.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new gd(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),n}catch(n){if(n instanceof Al&&n.errorCode===Rr)return new gd(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw n}}async acquireCachedToken(e){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Ir.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ho.isEmptyObj(e.claims))throw this.setCacheOutcome(Ir.FORCE_REFRESH_OR_CLAIMS,e.correlationId),te(Rr);if(!e.account)throw te(Gh);const o=e.authority||this.authority.getPreferredCache(),r=this.cacheManager.readCacheRecord(e.account,e,o,this.performanceClient,e.correlationId);if(r.accessToken){if(gn.wasClockTurnedBack(r.accessToken.cachedAt)||gn.isTokenExpired(r.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Ir.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),te(Rr);r.accessToken.refreshOn&&gn.isTokenExpired(r.accessToken.refreshOn,0)&&(n=Ir.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Ir.NO_CACHED_ACCESS_TOKEN,e.correlationId),te(Rr);return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await pe(this.generateResultFromCacheRecord.bind(this),F.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(r,e),n]}setCacheOutcome(e,n){var o,r;(o=this.serverTelemetryManager)==null||o.setCacheOutcome(e),(r=this.performanceClient)==null||r.addFields({cacheOutcome:e},n),e!==Ir.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(F.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let o;if(e.idToken&&(o=Ci(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const i=o==null?void 0:o.auth_time;if(!i)throw te(zh);xv(i,n.maxAge)}return Si.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,o)}}class py{static isThrottlingEntity(e,n){let o=!1;e&&(o=e.indexOf(La.THROTTLING_PREFIX)===0);let r=!0;return n&&(r=n.hasOwnProperty("throttleTime")),o&&r}}const BA={sendGetRequestAsync:()=>Promise.reject(te(Ve)),sendPostRequestAsync:()=>Promise.reject(te(Ve))},fy="missing_kid_error",gy="missing_alg_error",KA={[fy]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[gy]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class md extends It{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,md.prototype)}}function my(t){return new md(t,KA[t])}class vd{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw my(fy);if(!e.alg)throw my(gy);const n=new vd({typ:e.typ||lk.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}class Ul{constructor(e,n){this.cacheOutcome=Ir.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||K.EMPTY_STRING,this.wrapperVer=e.wrapperVer||K.EMPTY_STRING,this.telemetryCacheKey=tn.CACHE_KEY+ln.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${tn.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer].join(tn.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),r=[e,o].join(tn.VALUE_SEPARATOR);return[tn.SCHEMA_VERSION,r,n].join(tn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Ul.maxErrorsToSend(e),o=e.failedRequests.slice(0,2*n).join(tn.VALUE_SEPARATOR),r=e.errors.slice(0,n).join(tn.VALUE_SEPARATOR),i=e.errors.length,s=n<i?tn.OVERFLOW_TRUE:tn.OVERFLOW_FALSE,a=[i,s].join(tn.VALUE_SEPARATOR);return[tn.SCHEMA_VERSION,e.cacheHits,o,r,a].join(tn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=tn.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof It?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(tn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=Ul.maxErrorsToSend(e),o=e.errors.length;if(n===o)this.cacheManager.removeItem(this.telemetryCacheKey);else{const r={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}}static maxErrorsToSend(e){let n,o=0,r=0;const i=e.errors.length;for(n=0;n<i;n++){const s=e.failedRequests[2*n]||K.EMPTY_STRING,a=e.failedRequests[2*n+1]||K.EMPTY_STRING,c=e.errors[n]||K.EMPTY_STRING;if(r+=s.toString().length+a.toString().length+c.length+3,r<tn.MAX_LAST_HEADER_BYTES)o+=1;else break}return o}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||K.EMPTY_STRING),e.push(this.regionSource||K.EMPTY_STRING),e.push(this.regionOutcome||K.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}}class vy{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class jA{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Hk.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new vy}}startPerformanceMeasurement(){return new vy}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const yd="pkce_not_created",yy="crypto_nonexistent",Fl="empty_navigate_uri",_y="hash_empty_error",_d="no_state_in_hash",by="hash_does_not_contain_known_properties",Cy="unable_to_parse_state",wy="state_interaction_type_mismatch",Ey="interaction_in_progress",Ty="popup_window_error",Sy="empty_window_error",ki="user_cancelled",$A="monitor_popup_timeout",ky="monitor_window_timeout",Ay="redirect_in_iframe",Iy="block_iframe_reload",Ry="block_nested_popups",zA="iframe_closed_prematurely",Hl="silent_logout_unsupported",Oy="no_account_error",Ny="silent_prompt_value_error",xy="no_token_request_cache_error",Py="unable_to_parse_token_request_cache_error",bd="no_cached_authority_error",WA="auth_request_not_set_error",GA="invalid_cache_type",My="non_browser_environment",vs="database_not_open",ql="no_network_connectivity",Ly="post_request_failed",Dy="get_request_failed",Cd="failed_to_parse_response",No="unable_to_load_token",wd="crypto_key_not_found",Uy="auth_code_required",Fy="auth_code_or_nativeAccountId_required",Hy="spa_code_and_nativeAccountId_present",Ed="database_unavailable",qy="unable_to_acquire_token_from_native_platform",By="native_handshake_timeout",Ky="native_extension_not_installed",Ha="native_connection_not_established",jy="uninitialized_public_client_application",$y="native_prompt_not_supported",zy="invalid_base64_string",er="For more visit: aka.ms/msaljs/browser-errors",VA={[yd]:"The PKCE code challenge and verifier could not be generated.",[yy]:"The crypto object or function is not available.",[Fl]:"Navigation URI is empty. Please check stack trace for more info.",[_y]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${er}`,[_d]:"Hash does not contain state. Please verify that the request originated from msal.",[by]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${er}`,[Cy]:"Unable to parse state. Please verify that the request originated from msal.",[wy]:"Hash contains state but the interaction type does not match the caller.",[Ey]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${er}`,[Ty]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Sy]:"window.open returned null or undefined window object.",[ki]:"User cancelled the flow.",[$A]:`Token acquisition in popup failed due to timeout.  ${er}`,[ky]:`Token acquisition in iframe failed due to timeout.  ${er}`,[Ay]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Iy]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${er}`,[Ry]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[zA]:"The iframe being monitored was closed prematurely.",[Hl]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Oy]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Ny]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[xy]:"No token request found in cache.",[Py]:"The cached token request could not be parsed.",[bd]:"No cached authority found.",[WA]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[GA]:"Invalid cache type",[My]:"Login and token requests are not supported in non-browser environments.",[vs]:"Database is not open!",[ql]:"No network connectivity. Check your internet connection.",[Ly]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Dy]:"Network request failed. Please check the network trace to determine root cause.",[Cd]:"Failed to parse network response. Check network trace.",[No]:"Error loading token to cache.",[wd]:"Cryptographic Key or Keypair not found in browser storage.",[Uy]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Fy]:"An authorization code or nativeAccountId must be provided to this flow.",[Hy]:"Request cannot contain both spa code and native account id.",[Ed]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[qy]:`Unable to acquire token from native platform.  ${er}`,[By]:"Timed out while attempting to establish connection to browser extension",[Ky]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Ha]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${er}`,[jy]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${er}`,[$y]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[zy]:"Invalid base64 encoded string."};class qa extends It{constructor(e){super(e,VA[e]),Object.setPrototypeOf(this,qa.prototype),this.name="BrowserAuthError"}}function ve(t){return new qa(t)}const go={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Ba={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},Ai={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},$t={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Wy={GET:"GET",POST:"POST"},lt={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},Nr={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},Bl={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Et={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var we;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(we||(we={}));const Gy={scopes:Na},Vy="jwk",Td="msal.db",YA=1,QA=`${Td}.keys`,Gn={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5};function JA(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function XA(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function Sd(){return window.parent!==window}function ZA(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${go.POPUP_NAME_PREFIX}.`)===0}function tr(){return window.location.href.split("?")[0].split("#")[0]}function eI(){const t=new at(window.location.href).getUrlComponents();return`${t.Protocol}//${t.HostNameAndPort}/`}function kd(){if(at.hashContainsKnownProperties(window.location.hash)&&Sd())throw ve(Iy)}function tI(t,e){const n=Sd();if(t===we.Redirect&&n&&!e)throw ve(Ay)}function nI(){if(ZA())throw ve(Ry)}function oI(t){if(!t)throw ve(My)}function Yy(t){if(!t)throw ve(jy)}function Qy(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const rI="modulepreload",iI=function(t){return"/"+t},Jy={},sI=function(t,e,n){if(!e||e.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(e.map(r=>{if(r=iI(r),r in Jy)return;Jy[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(n)for(let c=o.length-1;c>=0;c--){const l=o[c];if(l.href===r&&(!i||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":rI,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((c,l)=>{a.addEventListener("load",c),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r})};class Kl{navigateInternal(e,n){return Kl.defaultNavigateWindow(e,n)}navigateExternal(e,n){return Kl.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise(o=>{setTimeout(()=>{o(!0)},n.timeout)})}}class aI{async sendGetRequestAsync(e,n){let o;try{o=await fetch(e,{method:Wy.GET,headers:this.getFetchHeaders(n)})}catch{throw window.navigator.onLine?ve(Dy):ve(ql)}try{return{headers:this.getHeaderDict(o.headers),body:await o.json(),status:o.status}}catch{throw ve(Cd)}}async sendPostRequestAsync(e,n){const o=n&&n.body||K.EMPTY_STRING;let r;try{r=await fetch(e,{method:Wy.POST,headers:this.getFetchHeaders(n),body:o})}catch{throw window.navigator.onLine?ve(Ly):ve(ql)}try{return{headers:this.getHeaderDict(r.headers),body:await r.json(),status:r.status}}catch{throw ve(Cd)}}getFetchHeaders(e){const n=new Headers;if(!(e&&e.headers))return n;const o=e.headers;return Object.keys(o).forEach(r=>{n.append(r,o[r])}),n}getHeaderDict(e){const n={};return e.forEach((o,r)=>{n[r]=o}),n}}const cI=6e4,Ad=1e4,lI=3e4,uI=2e3;function hI({auth:t,cache:e,system:n,telemetry:o},r){const i={clientId:K.EMPTY_STRING,authority:`${K.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:K.EMPTY_STRING,authorityMetadata:K.EMPTY_STRING,redirectUri:K.EMPTY_STRING,postLogoutRedirectUri:K.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Xo.AAD,OIDCOptions:{serverResponseType:xa.FRAGMENT,defaultScopes:[K.OPENID_SCOPE,K.PROFILE_SCOPE,K.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:ed.None,tenant:K.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1},s={cacheLocation:$t.SessionStorage,temporaryCacheLocation:$t.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===$t.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:Yt.Info,piiLoggingEnabled:!1},c={...oy,loggerOptions:a,networkClient:r?new aI:BA,navigationClient:new Kl,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||cI,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||Ad,navigateFrameWait:0,redirectNavigationTimeout:lI,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||uI,pollIntervalMilliseconds:go.DEFAULT_POLL_INTERVAL_MS,...n,loggerOptions:(n==null?void 0:n.loggerOptions)||a},l={application:{appName:K.EMPTY_STRING,appVersion:K.EMPTY_STRING},client:new jA};if((t==null?void 0:t.protocolMode)!==Xo.OIDC&&(t!=null&&t.OIDCOptions)&&new bi(c.loggerOptions).warning(JSON.stringify(mt(Gv))),(t==null?void 0:t.protocolMode)&&t.protocolMode!==Xo.AAD&&(c==null?void 0:c.allowNativeBroker))throw mt(Vv);return{auth:{...i,...t,OIDCOptions:{...i.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...s,...e},system:c,telemetry:{...l,...o}}}const dI="@azure/msal-browser",Id="3.6.0";class pI{constructor(e){this.browserEnvironment=typeof window<"u",this.config=hI(e,this.browserEnvironment),this.logger=new bi(this.config.system.loggerOptions,dI,Id),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class Ii extends pI{getModuleName(){return Ii.MODULE_NAME}getId(){return Ii.ID}async initialize(){return this.available=typeof window<"u",this.available}}Ii.MODULE_NAME="",Ii.ID="StandardOperatingContext";async function fI(t){const e=new Ii(t);return await e.initialize(),(await sI(()=>Promise.resolve().then(()=>nR),void 0)).StandardController.createController(e)}function Rd(t){return encodeURIComponent(Od(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function jl(t){return Xy(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Od(t){return Xy(new TextEncoder().encode(t))}function Xy(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}function xo(t){return new TextDecoder().decode(gI(t))}function gI(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw ve(zy)}const n=atob(e);return Uint8Array.from(n,o=>o.codePointAt(0)||0)}const mI="RSASSA-PKCS1-v1_5",Zy="SHA-256",vI=2048,yI=new Uint8Array([1,0,1]),Nd={name:mI,hash:Zy,modulusLength:vI,publicExponent:yI};function _I(t){if("crypto"in window)t.verbose("BrowserCrypto: modern crypto interface available");else throw t.error("BrowserCrypto: crypto interface is unavailable"),ve(yy)}async function e_(t,e,n){e==null||e.addQueueMeasurement(F.Sha256Digest,n);const o=new TextEncoder().encode(t);return window.crypto.subtle.digest(Zy,o)}function bI(t){return window.crypto.getRandomValues(t)}function xr(){return window.crypto.randomUUID()}async function CI(t,e){return window.crypto.subtle.generateKey(Nd,t,e)}async function xd(t){return window.crypto.subtle.exportKey(Vy,t)}async function wI(t,e,n){return window.crypto.subtle.importKey(Vy,t,Nd,e,n)}async function EI(t,e){return window.crypto.subtle.sign(Nd,t,e)}class TI{constructor(){this.dbName=Td,this.version=YA,this.tableName=QA,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const o=window.indexedDB.open(this.dbName,this.version);o.addEventListener("upgradeneeded",r=>{r.target.result.createObjectStore(this.tableName)}),o.addEventListener("success",r=>{const i=r;this.db=i.target.result,this.dbOpen=!0,e()}),o.addEventListener("error",()=>n(ve(Ed)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,o)=>{if(!this.db)return o(ve(vs));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",i=>{const s=i;this.closeConnection(),n(s.target.result)}),r.addEventListener("error",i=>{this.closeConnection(),o(i)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((o,r)=>{if(!this.db)return r(ve(vs));const i=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);i.addEventListener("success",()=>{this.closeConnection(),o()}),i.addEventListener("error",s=>{this.closeConnection(),r(s)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,o)=>{if(!this.db)return o(ve(vs));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",()=>{this.closeConnection(),n()}),r.addEventListener("error",i=>{this.closeConnection(),o(i)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(ve(vs));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();o.addEventListener("success",r=>{const i=r;this.closeConnection(),e(i.target.result)}),o.addEventListener("error",r=>{this.closeConnection(),n(r)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,o)=>{if(!this.db)return o(ve(vs));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",i=>{const s=i;this.closeConnection(),n(s.target.result===1)}),r.addEventListener("error",i=>{this.closeConnection(),o(i)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const o=window.indexedDB.deleteDatabase(Td);o.addEventListener("success",()=>e(!0)),o.addEventListener("blocked",()=>e(!0)),o.addEventListener("error",()=>n(!1))})}}class Pd{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,n){this.cache.set(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,o)=>{e.push(o)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class t_{constructor(e,n){this.inMemoryCache=new Pd,this.indexedDBCache=new TI,this.logger=e,this.storeName=n}handleDatabaseAccessError(e){if(e instanceof qa&&e.errorCode===Ed)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(o){this.handleDatabaseAccessError(o)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(o){this.handleDatabaseAccessError(o)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(o){this.handleDatabaseAccessError(o)}return n}clearInMemory(){this.logger.verbose(`Deleting in-memory keystore ${this.storeName}`),this.inMemoryCache.clear(),this.logger.verbose(`In-memory keystore ${this.storeName} deleted`)}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}const n_={asymmetricKeys:"asymmetricKeys",symmetricKeys:"symmetricKeys"};class SI{constructor(e){this.logger=e,this.asymmetricKeys=new t_(this.logger,n_.asymmetricKeys),this.symmetricKeys=new t_(this.logger,n_.symmetricKeys)}async clear(){this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory();try{return await this.asymmetricKeys.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}}class ys{constructor(e,n){this.logger=e,_I(e),this.cache=new SI(this.logger),this.performanceClient=n}createNewGuid(){return xr()}base64Encode(e){return Od(e)}base64Decode(e){return xo(e)}async getPublicKeyThumbprint(e){var u;const n=(u=this.performanceClient)==null?void 0:u.startMeasurement(F.CryptoOptsGetPublicKeyThumbprint,e.correlationId),o=await CI(ys.EXTRACTABLE,ys.POP_KEY_USAGES),r=await xd(o.publicKey),i={e:r.e,kty:r.kty,n:r.n},s=o_(i),a=await this.hashString(s),c=await xd(o.privateKey),l=await wI(c,!1,["sign"]);return await this.cache.asymmetricKeys.setItem(a,{privateKey:l,publicKey:o.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){return await this.cache.asymmetricKeys.removeItem(e),!await this.cache.asymmetricKeys.containsKey(e)}async clearKeystore(){return this.cache.clear()}async signJwt(e,n,o,r){var C;const i=(C=this.performanceClient)==null?void 0:C.startMeasurement(F.CryptoOptsSignJwt,r),s=await this.cache.asymmetricKeys.getItem(n);if(!s)throw ve(wd);const a=await xd(s.publicKey),c=o_(a),l=Rd(JSON.stringify({kid:n})),u=vd.getShrHeaderString({...o==null?void 0:o.header,alg:a.alg,kid:l}),h=Rd(u);e.cnf={jwk:JSON.parse(c)};const d=Rd(JSON.stringify(e)),p=`${h}.${d}`,m=new TextEncoder().encode(p),_=await EI(s.privateKey,m),T=jl(new Uint8Array(_)),b=`${p}.${T}`;return i&&i.end({success:!0}),b}async hashString(e){const n=await e_(e),o=new Uint8Array(n);return jl(o)}}ys.POP_KEY_USAGES=["sign","verify"],ys.EXTRACTABLE=!0;function o_(t){return JSON.stringify(t,Object.keys(t).sort())}const r_="storage_not_supported",kI="stubbed_public_client_application_called",i_="in_mem_redirect_unavailable",AI={[r_]:"Given storage configuration option was not supported.",[kI]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[i_]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Md extends It{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Md.prototype)}}function s_(t){return new Md(t,AI[t])}class a_{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==$t.LocalStorage&&e!==$t.SessionStorage||!window[e])throw s_(r_)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,n){this.windowStorage.setItem(e,n)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}}function c_(t,e){if(!e)return null;try{return fo.parseRequestState(t,e).libraryState.meta}catch{throw te(hs)}}class Ld extends Zo{constructor(e,n,o,r,i){super(e,o,r,i),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=n,this.logger=r,this.internalStorage=new Pd,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),n.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps())}setupBrowserStorage(e){switch(e){case $t.LocalStorage:case $t.SessionStorage:try{return new a_(e)}catch(n){this.logger.verbose(n);break}}return this.cacheConfig.cacheLocation=$t.MemoryStorage,new Pd}setupTemporaryCacheStorage(e,n){switch(n){case $t.LocalStorage:case $t.SessionStorage:try{return new a_(e||$t.SessionStorage)}catch(o){return this.logger.verbose(o),this.internalStorage}case $t.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const e=`${K.CACHE_PREFIX}.${en.ID_TOKEN}`,n=`${K.CACHE_PREFIX}.${en.CLIENT_INFO}`,o=`${K.CACHE_PREFIX}.${en.ERROR}`,r=`${K.CACHE_PREFIX}.${en.ERROR_DESC}`,i=this.browserStorage.getItem(e),s=this.browserStorage.getItem(n),a=this.browserStorage.getItem(o),c=this.browserStorage.getItem(r),l=[i,s,a,c];[en.ID_TOKEN,en.CLIENT_INFO,en.ERROR,en.ERROR_DESC].forEach((u,h)=>this.migrateCacheEntry(u,l[h]))}migrateCacheEntry(e,n){n&&this.setTemporaryCache(e,n,!0)}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(Nr.ACCOUNT_KEYS),n=this.getItem(`${Nr.TOKEN_KEYS}.${this.clientId}`);if(e&&n){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(o=>{if(this.isCredentialKey(o)){const r=this.getItem(o);if(r){const i=this.validateAndParseJson(r);if(i&&i.hasOwnProperty("credentialType"))switch(i.credentialType){case Ne.ID_TOKEN:if(Lv(i)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${o} found, saving key to token key map`);const s=i,a=this.updateCredentialCacheKey(o,s);this.addTokenKey(a,Ne.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${o}`);break;case Ne.ACCESS_TOKEN:case Ne.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(Mv(i)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${o} found, saving key to token key map`);const s=i,a=this.updateCredentialCacheKey(o,s);this.addTokenKey(a,Ne.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${o}`);break;case Ne.REFRESH_TOKEN:if(Dv(i)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${o} found, saving key to token key map`);const s=i,a=this.updateCredentialCacheKey(o,s);this.addTokenKey(a,Ne.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${o}`);break}}}if(this.isAccountKey(o)){const r=this.getItem(o);if(r){const i=this.validateAndParseJson(r);i&&jt.isAccountEntity(i)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${o} found, saving key to account key map`),this.addAccountKeyToMap(o))}}})}validateAndParseJson(e){try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,n){this.browserStorage.setItem(e,n)}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const o=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,o,n)}getCachedAccountEntity(e){const n=this.getItem(e);if(!n)return this.removeAccountKeyFromMap(e),null;const o=this.validateAndParseJson(n);return!o||!jt.isAccountEntity(o)?(this.removeAccountKeyFromMap(e),null):Zo.toObject(new jt,o)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();this.setItem(n,JSON.stringify(e)),this.addAccountKeyToMap(n)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(Nr.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const n=this.getAccountKeys();n.indexOf(e)===-1?(n.push(e),this.setItem(Nr.ACCOUNT_KEYS,JSON.stringify(n)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const n=this.getAccountKeys(),o=n.indexOf(e);o>-1?(n.splice(o,1),this.setItem(Nr.ACCOUNT_KEYS,JSON.stringify(n)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,Ne.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,Ne.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,Ne.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${Nr.TOKEN_KEYS}.${this.clientId}`);if(e){const n=this.validateAndParseJson(e);if(n&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("accessToken")&&n.hasOwnProperty("refreshToken"))return n;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,n){this.logger.trace("BrowserCacheManager addTokenKey called");const o=this.getTokenKeys();switch(n){case Ne.ID_TOKEN:o.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(e));break;case Ne.ACCESS_TOKEN:o.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),o.accessToken.push(e));break;case Ne.REFRESH_TOKEN:o.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${n}`),te(Jh)}this.setItem(`${Nr.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(o))}removeTokenKey(e,n){this.logger.trace("BrowserCacheManager removeTokenKey called");const o=this.getTokenKeys();switch(n){case Ne.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const r=o.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case Ne.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const i=o.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case Ne.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const s=o.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${n}`),te(Jh)}this.setItem(`${Nr.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(o))}getIdTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ne.ID_TOKEN),null;const o=this.validateAndParseJson(n);return!o||!Lv(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ne.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=Da(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,Ne.ID_TOKEN)}getAccessTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ne.ACCESS_TOKEN),null;const o=this.validateAndParseJson(n);return!o||!Mv(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ne.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=Da(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,Ne.ACCESS_TOKEN)}getRefreshTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ne.REFRESH_TOKEN),null;const o=this.validateAndParseJson(n);return!o||!Dv(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ne.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=Da(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,Ne.REFRESH_TOKEN)}getAppMetadata(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const o=this.validateAndParseJson(n);return!o||!ms.isAppMetadataEntity(e,o)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),Zo.toObject(new ms,o))}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const n=e.generateAppMetadataKey();this.setItem(n,JSON.stringify(e))}getServerTelemetry(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const o=this.validateAndParseJson(n);return!o||!Rk(e,o)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),o)}setServerTelemetry(e,n){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n))}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const o=this.validateAndParseJson(n);return o&&hd.isAuthorityMetadataEntity(e,o)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),Zo.toObject(new hd,o)):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(e,n){this.internalStorage.setItem(Bl.WRAPPER_SKU,e),this.internalStorage.setItem(Bl.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(Bl.WRAPPER_SKU)||K.EMPTY_STRING,n=this.internalStorage.getItem(Bl.WRAPPER_VER)||K.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(){const e=this.generateCacheKey(en.ACTIVE_ACCOUNT_FILTERS),n=this.getItem(e);if(!n){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const r=this.generateCacheKey(en.ACTIVE_ACCOUNT),i=this.getItem(r);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const s=this.getAccountInfoFilteredBy({localAccountId:i});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}const o=this.validateAndParseJson(n);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const n=this.generateCacheKey(en.ACTIVE_ACCOUNT_FILTERS),o=this.generateCacheKey(en.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(n,JSON.stringify(r)),this.browserStorage.setItem(o,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(n),this.browserStorage.removeItem(o)}getThrottlingCache(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const o=this.validateAndParseJson(n);return!o||!py.isThrottlingEntity(e,o)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),Zo.toObject(new py,o))}setThrottlingCache(e,n){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n))}getTemporaryCache(e,n){const o=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.getItemCookie(o);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const r=this.temporaryCacheStorage.getItem(o);if(!r){if(this.cacheConfig.cacheLocation===$t.LocalStorage){const i=this.browserStorage.getItem(o);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,n,o){const r=o?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(r,n))}removeItem(e){this.browserStorage.removeItem(e),this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}containsKey(e){return this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e)}getKeys(){return[...this.browserStorage.getKeys(),...this.temporaryCacheStorage.getKeys()]}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.getKeys().forEach(e=>{(this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e))&&(e.indexOf(K.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e){e.addQueueMeasurement(F.ClearTokensAndKeysWithClaims);const n=this.getTokenKeys(),o=[];n.accessToken.forEach(r=>{const i=this.getAccessTokenCredential(r);i!=null&&i.requestedClaimsHash&&r.includes(i.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(r))}),await Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(e,n,o){let r=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=Lax;`;if(o){const i=this.getCookieExpirationTime(o);r+=`expires=${i};`}this.cacheConfig.secureCookies&&(r+="Secure;"),document.cookie=r}getItemCookie(e){const n=`${encodeURIComponent(e)}=`,o=document.cookie.split(";");for(let r=0;r<o.length;r++){let i=o[r];for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(n)===0)return decodeURIComponent(i.substring(n.length,i.length))}return K.EMPTY_STRING}clearMsalCookies(){const e=`${K.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(n=>{for(;n.charAt(0)===" ";)n=n.substring(1);if(n.indexOf(e)===0){const o=n.split("=")[0];this.clearItemCookie(o)}})}clearItemCookie(e){this.setItemCookie(e,K.EMPTY_STRING,-1)}getCookieExpirationTime(e){const n=new Date;return new Date(n.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}getCache(){return this.browserStorage}setCache(){}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):ho.startsWith(e,K.CACHE_PREFIX)||ho.startsWith(e,en.ADAL_ID_TOKEN)?e:`${K.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:n}}=fo.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${lt.AUTHORITY}.${n}`)}generateNonceKey(e){const{libraryState:{id:n}}=fo.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${lt.NONCE_IDTOKEN}.${n}`)}generateStateKey(e){const{libraryState:{id:n}}=fo.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${lt.REQUEST_STATE}.${n}`)}getCachedAuthority(e){const n=this.generateStateKey(e),o=this.getTemporaryCache(n);if(!o)return null;const r=this.generateAuthorityKey(o);return this.getTemporaryCache(r)}updateCacheEntries(e,n,o,r,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,n,!1);const c=this.generateAuthorityKey(e);if(this.setTemporaryCache(c,o,!1),i){const l={credential:i.homeAccountId,type:Fn.HOME_ACCOUNT_ID};this.setTemporaryCache(lt.CCS_CREDENTIAL,JSON.stringify(l),!0)}else if(r){const l={credential:r,type:Fn.UPN};this.setTemporaryCache(lt.CCS_CREDENTIAL,JSON.stringify(l),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.getKeys().forEach(n=>{n.indexOf(e)!==-1&&this.removeItem(n)}),this.removeItem(this.generateStateKey(e)),this.removeItem(this.generateNonceKey(e)),this.removeItem(this.generateAuthorityKey(e))),this.removeItem(this.generateCacheKey(lt.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(lt.ORIGIN_URI)),this.removeItem(this.generateCacheKey(lt.URL_HASH)),this.removeItem(this.generateCacheKey(lt.CORRELATION_ID)),this.removeItem(this.generateCacheKey(lt.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(lt.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const n=this.generateStateKey(e),o=this.temporaryCacheStorage.getItem(n);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${o}`),this.resetRequestCache(o||K.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(n=>{if(n.indexOf(lt.REQUEST_STATE)===-1)return;const o=this.temporaryCacheStorage.getItem(n);if(!o)return;const r=c_(this.cryptoImpl,o);r&&r.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${o}`),this.resetRequestCache(o))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const n=Od(JSON.stringify(e));this.setTemporaryCache(lt.REQUEST_PARAMS,n,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache(lt.REQUEST_PARAMS,!0);if(!n)throw ve(xy);let o;try{o=JSON.parse(xo(n))}catch(r){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${r}`),ve(Py)}if(this.removeItem(this.generateCacheKey(lt.REQUEST_PARAMS)),!o.authority){const r=this.generateAuthorityKey(e),i=this.getTemporaryCache(r);if(!i)throw ve(bd);o.authority=i}return o}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(lt.NATIVE_REQUEST,!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress();return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${K.CACHE_PREFIX}.${lt.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const n=`${K.CACHE_PREFIX}.${lt.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw ve(Ey);this.setTemporaryCache(n,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeItem(n)}getLegacyLoginHint(){const e=this.getTemporaryCache(en.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(en.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const n=this.getTemporaryCache(en.ID_TOKEN,!0);n&&(this.removeItem(this.generateCacheKey(en.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const o=n||e;if(o){const r=Ci(o,xo);if(r.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),r.preferred_username;if(r.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),r.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,n){const o=Da(n);if(e!==o){const r=this.getItem(e);if(r)return this.removeItem(e),this.setItem(o,r),this.logger.verbose(`Updated an outdated ${n.credentialType} cache key`),o;this.logger.error(`Attempted to update an outdated ${n.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}getRedirectRequestContext(){return this.getTemporaryCache(lt.REDIRECT_CONTEXT,!0)}setRedirectRequestContext(e){this.setTemporaryCache(lt.REDIRECT_CONTEXT,e,!0)}async hydrateCache(e,n){var a,c,l,u,h;const o=Rl((a=e.account)==null?void 0:a.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let r;n.claims&&(r=await this.cryptoImpl.hashString(n.claims));const i=Ol((l=e.account)==null?void 0:l.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),((u=e.expiresOn)==null?void 0:u.getTime())||0,((h=e.extExpiresOn)==null?void 0:h.getTime())||0,xo,void 0,e.tokenType,void 0,n.sshKid,n.claims,r),s=new fs(void 0,o,i);return this.saveCacheRecord(s)}}const II=(t,e)=>{const n={cacheLocation:$t.MemoryStorage,temporaryCacheLocation:$t.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Ld(t,n,Il,e)},Le={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};class RI{constructor(e,n){this.eventCallbacks=new Map,this.logger=e,this.browserCrypto=n,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(e){if(typeof window<"u"){const n=xr();return this.eventCallbacks.set(n,e),this.logger.verbose(`Event callback registered with id: ${n}`),n}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(e,n,o,r){if(typeof window<"u"){const i={eventType:e,interactionType:n||null,payload:o||null,error:r||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${e}`),this.eventCallbacks.forEach((s,a)=>{this.logger.verbose(`Emitting event to callback ${a}: ${e}`),s.apply(null,[i])})}}handleAccountCacheChange(e){try{const n=e.newValue||e.oldValue;if(!n)return;const o=JSON.parse(n);if(typeof o!="object"||!jt.isAccountEntity(o))return;const r=Zo.toObject(new jt,o).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(Le.ACCOUNT_ADDED,void 0,r)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(Le.ACCOUNT_REMOVED,void 0,r))}catch{return}}}class l_{constructor(e,n,o,r,i,s,a,c,l){this.config=e,this.browserStorage=n,this.browserCrypto=o,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=l||xr(),this.logger=r.clone(go.MSAL_SKU,Id,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){jt.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(jt.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}async initializeBaseRequest(e,n){this.performanceClient.addQueueMeasurement(F.InitializeBaseRequest,this.correlationId);const o=e.authority||this.config.auth.authority;n&&await this.validateRequestAuthority(o,n);const r=[...e&&e.scopes||[]],i={...e,correlationId:this.correlationId,authority:o,scopes:r};if(!i.authenticationScheme)i.authenticationScheme=gt.BEARER,this.logger.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(i.authenticationScheme===gt.SSH){if(!e.sshJwk)throw mt(Nl);if(!e.sshKid)throw mt(Wv)}this.logger.verbose(`Authentication Scheme set to "${i.authenticationScheme}" as configured in Auth request`)}return this.config.cache.claimsBasedCachingEnabled&&e.claims&&!ho.isEmptyObj(e.claims)&&(i.requestedClaimsHash=await this.browserCrypto.hashString(e.claims)),i}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri||tr();return at.getAbsoluteUrl(n,tr())}async validateRequestAuthority(e,n){if(!(await this.getDiscoveredAuthority(e)).isAlias(n.environment))throw mt(Yv)}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const o={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Ul(o,this.browserStorage)}async getDiscoveredAuthority(e){this.logger.verbose("getDiscoveredAuthority called");const n={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata};return e?(this.logger.verbose("Creating discovered authority with request authority"),Ti.createDiscoveredInstance(e,this.config.system.networkClient,this.browserStorage,n,this.logger)):(this.logger.verbose("Creating discovered authority with configured authority"),Ti.createDiscoveredInstance(this.config.auth.authority,this.config.system.networkClient,this.browserStorage,n,this.logger))}}const OI=32;async function NI(t,e,n){t.addQueueMeasurement(F.GeneratePkceCodes,n);const o=wi(xI,F.GenerateCodeVerifier,e,t,n)(t,e,n),r=await pe(PI,F.GenerateCodeChallengeFromVerifier,e,t,n)(o,t,e,n);return{verifier:o,challenge:r}}function xI(t,e,n){try{const o=new Uint8Array(OI);return wi(bI,F.GetRandomValues,e,t,n)(o),jl(o)}catch{throw ve(yd)}}async function PI(t,e,n,o){e.addQueueMeasurement(F.GenerateCodeChallengeFromVerifier,o);try{const r=await pe(e_,F.Sha256Digest,n,e,o)(t,e,o);return jl(new Uint8Array(r))}catch{throw ve(yd)}}class _s extends l_{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const n=await pe(NI,F.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),o={...e,redirectUri:e.redirectUri,code:K.EMPTY_STRING,codeVerifier:n.verifier};return e.codeChallenge=n.challenge,e.codeChallengeMethod=K.S256_CODE_CHALLENGE_METHOD,o}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||xr(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const o=this.getLogoutHintFromIdTokenClaims(e.account);o&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=o)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=at.getAbsoluteUrl(e.postLogoutRedirectUri,tr())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=at.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,tr())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=at.getAbsoluteUrl(tr(),tr())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e,n,o){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const r=await pe(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,n,o);return new dy(r,this.performanceClient)}async getClientConfiguration(e,n,o){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientGetClientConfiguration,this.correlationId);const r=await pe(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)(n,o),i=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:r,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:i.loggerCallback,piiLoggingEnabled:i.piiLoggingEnabled,logLevel:i.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:go.MSAL_SKU,version:Id,cpu:K.EMPTY_STRING,os:K.EMPTY_STRING},telemetry:this.config.telemetry}}async getDiscoveredAuthority(e,n){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},r=e||this.config.auth.authority,i=un.generateAuthority(r,n||this.config.auth.azureCloudOptions);return pe(Ti.createDiscoveredInstance.bind(Ti),F.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(i,this.config.system.networkClient,this.browserStorage,o,this.logger,this.performanceClient,this.correlationId)}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const o=this.getRedirectUri(e.redirectUri),r={interactionType:n},i=fo.setRequestState(this.browserCrypto,e&&e.state||K.EMPTY_STRING,r),s={...await pe(this.initializeBaseRequest.bind(this),F.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(e),redirectUri:o,state:i,nonce:e.nonce||xr(),responseMode:this.config.auth.OIDCOptions.serverResponseType},a=e.account||this.browserStorage.getActiveAccount();if(a&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${a.homeAccountId}`,this.correlationId),s.account=a),!s.loginHint&&!a){const c=this.browserStorage.getLegacyLoginHint();c&&(s.loginHint=c)}return s}}const MI="ContentError",u_="user_switch",LI="USER_INTERACTION_REQUIRED",DI="USER_CANCEL",UI="NO_NETWORK",FI="PERSISTENT_ERROR",HI="DISABLED",qI="ACCOUNT_UNAVAILABLE",BI=-2147186943,KI={[u_]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class nr extends It{constructor(e,n,o){super(e,n),Object.setPrototypeOf(this,nr.prototype),this.name="NativeAuthError",this.ext=o}}function bs(t){if(t.ext&&t.ext.status&&(t.ext.status===FI||t.ext.status===HI)||t.ext&&t.ext.error&&t.ext.error===BI)return!0;switch(t.errorCode){case MI:return!0;default:return!1}}function Dd(t,e,n){if(n&&n.status)switch(n.status){case qI:return hy(cy);case LI:return new Oo(t,e);case DI:return ve(ki);case UI:return ve(ql)}return new nr(t,KI[t]||e,n)}class h_ extends _s{async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(Et.acquireTokenSilent_silentFlow),o=await this.createSilentFlowClient(n,e.authority,e.azureCloudOptions);this.logger.verbose("Silent auth client created");try{const r=(await pe(o.acquireCachedToken.bind(o),F.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),r}catch(r){throw r instanceof qa&&r.errorCode===wd&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),r}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n==null?void 0:n.account)}async createSilentFlowClient(e,n,o){const r=await pe(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,n,o);return new qA(r,this.performanceClient)}async initializeSilentRequest(e,n){this.performanceClient.addQueueMeasurement(F.InitializeSilentRequest,this.correlationId);const o=await pe(this.initializeBaseRequest.bind(this),F.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(e,n);return{...e,...o,account:n,forceRefresh:e.forceRefresh||!1}}}const Ud={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class Cs extends l_{constructor(e,n,o,r,i,s,a,c,l,u,h,d){super(e,n,o,r,i,s,c,l,d),this.apiId=a,this.accountId=u,this.nativeMessageHandler=l,this.nativeStorageManager=h,this.silentCacheClient=new h_(e,this.nativeStorageManager,o,r,i,s,c,l,d)}async acquireToken(e){this.performanceClient.addQueueMeasurement(F.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(F.NativeInteractionClientAcquireToken,e.correlationId),o=gn.nowSeconds(),r=await this.initializeNativeRequest(e);try{const c=await this.acquireTokensFromCache(this.accountId,r);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const i={method:Ai.GetToken,request:r},s=await this.nativeMessageHandler.sendMessage(i),a=this.validateNativeResponse(s);return this.handleNativeResponse(a,r,o).then(c=>(n.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),c)).catch(c=>{throw n.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError,isNativeBroker:!0}),c})}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:qt.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),te(Yh);const o=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!o)throw te(Yh);try{const r=this.createSilentCacheRequest(n,o),i=await this.silentCacheClient.acquireToken(r),s={...o,idTokenClaims:i==null?void 0:i.idTokenClaims};return{...i,account:s}}catch(r){throw r}}async acquireTokenRedirect(e){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const n=await this.initializeNativeRequest(e),o={method:Ai.GetToken,request:n};try{const s=await this.nativeMessageHandler.sendMessage(o);this.validateNativeResponse(s)}catch(s){if(s instanceof nr&&bs(s))throw s}this.browserStorage.setTemporaryCache(lt.NATIVE_REQUEST,JSON.stringify(n),!0);const r={apiId:Et.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);await this.navigationClient.navigateExternal(i,r)}async handleRedirectPromise(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const e=this.browserStorage.getCachedNativeRequest();if(!e)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),null;const{prompt:n,...o}=e;n&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(lt.NATIVE_REQUEST));const r={method:Ai.GetToken,request:o},i=gn.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const s=await this.nativeMessageHandler.sendMessage(r);this.validateNativeResponse(s);const a=this.handleNativeResponse(s,o,i);return this.browserStorage.setInteractionInProgress(!1),await a}catch(s){throw this.browserStorage.setInteractionInProgress(!1),s}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,o){if(this.logger.trace("NativeInteractionClient - handleNativeResponse called."),e.account.id!==n.accountId)throw Dd(u_);const r=await this.getDiscoveredAuthority(n.authority),i=Ci(e.id_token,xo),s=this.createHomeAccountIdentifier(e,i),a=fd(this.browserStorage,r,s,i,xo,e.client_info,i.tid,void 0,e.account.id,this.logger),c=await this.generateAuthenticationResult(e,n,i,a,r.canonicalAuthority,o);return this.cacheAccount(a),this.cacheNativeTokens(e,n,s,i,c.accessToken,c.tenantId,o),c}createHomeAccountIdentifier(e,n){return jt.generateHomeAccountId(e.client_info||K.EMPTY_STRING,po.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return e.scope?qt.fromString(e.scope):qt.fromString(n.scope)}async generatePopAccessToken(e,n){if(n.tokenType===gt.POP){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const o=new gs(this.browserCrypto),r={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw te(Xh);return o.signPopToken(e.access_token,n.keyId,r)}else return e.access_token}async generateAuthenticationResult(e,n,o,r,i,s){const a=this.addTelemetryFromNativeResponse(e),c=e.scope?qt.fromString(e.scope):qt.fromString(n.scope),l=e.account.properties||{},u=l.UID||o.oid||o.sub||K.EMPTY_STRING,h=l.TenantId||o.tid||K.EMPTY_STRING,d=ld(r.getAccountInfo(),void 0,o),p=await this.generatePopAccessToken(e,n),m=n.tokenType===gt.POP?gt.POP:gt.BEARER;return{authority:i,uniqueId:u,tenantId:h,scopes:c.asArray(),account:d,idToken:e.id_token,idTokenClaims:o,accessToken:p,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+e.expires_in)*1e3),tokenType:m,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(n=>{this.logger.error(`Error occurred while removing account context from browser storage. ${n}`)})}cacheNativeTokens(e,n,o,r,i,s,a){const c=Rl(o,n.authority,e.id_token||"",n.clientId,r.tid||""),l=n.tokenType===gt.POP?K.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,h=this.generateScopes(e,n),d=Ol(o,n.authority,i,n.clientId,r.tid||s,h.printScopes(),u,0,xo),p=new fs(void 0,c,d);this.nativeStorageManager.saveCacheRecord(p,n.storeInCache)}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw dv(Kh,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=e.authority||this.config.auth.authority;e.account&&await this.validateRequestAuthority(n,e.account);const o=new at(n);o.validateAsUri();const{scopes:r,...i}=e,s=new qt(r||[]);s.appendScopes(Na);const a=()=>{switch(this.apiId){case Et.ssoSilent:case Et.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),cn.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case cn.NONE:case cn.CONSENT:case cn.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),ve($y)}},c={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:o.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1};if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=Ba.MATS_TELEMETRY,e.authenticationScheme===gt.POP){const l={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},u=new gs(this.browserCrypto),h=await pe(u.generateCnf.bind(u),F.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(l,this.logger);c.reqCnf=h.reqCnfHash,c.keyId=h.kid}return c}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty(Ud.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(Ud.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(ps)){const n=e.extraParameters[ps],o=e.redirectUri,r=e.extraParameters[Ud.BROKER_REDIRECT_URI];e.extraParameters={child_client_id:n,child_redirect_uri:o},e.redirectUri=r}}}class Po{constructor(e,n,o,r){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=o,this.handshakeEvent=o.startMeasurement(F.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const n={channel:Ba.CHANNEL_ID,extensionId:this.extensionId,responseId:xr(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(n)}`),this.messageChannel.port1.postMessage(n),new Promise((o,r)=>{this.resolvers.set(n.responseId,{resolve:o,reject:r})})}static async createProvider(e,n,o){e.trace("NativeMessageHandler - createProvider called.");try{const r=new Po(e,n,o,Ba.PREFERRED_EXTENSION_ID);return await r.sendHandshakeRequest(),r}catch{const r=new Po(e,n,o);return await r.sendHandshakeRequest(),r}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Ba.CHANNEL_ID,extensionId:this.extensionId,responseId:xr(),body:{method:Ai.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,o)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:o}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(ve(By)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==Ba.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===Ai.HandshakeRequest){const o=this.handshakeResolvers.get(n.responseId);if(!o){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),o.reject(ve(Ky))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const n=e.data,o=this.resolvers.get(n.responseId),r=this.handshakeResolvers.get(n.responseId);try{const i=n.body.method;if(i===Ai.Response){if(!o)return;const s=n.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")o.reject(Dd(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?o.reject(Dd(s.result.code,s.result.description,s.result.ext)):o.resolve(s.result);else throw dv(Kh,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(i===Ai.HandshakeResponse){if(!r){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),o?o.reject(i):r&&r.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,n,o,r){if(n.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return n.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!o)return n.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(r)switch(r){case gt.BEARER:case gt.POP:return n.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return n.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class Fd{constructor(e,n,o,r,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=o,this.logger=r,this.performanceClient=i}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(F.HandleCodeResponse,n.correlationId);let o;try{o=this.authModule.handleFragmentResponse(e,n.state)}catch(r){throw r instanceof Or&&r.subError===ki?ve(ki):r}return pe(this.handleCodeResponseFromServer.bind(this),F.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(o,n)}async handleCodeResponseFromServer(e,n,o=!0){if(this.performanceClient.addQueueMeasurement(F.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await pe(this.authModule.updateAuthority.bind(this.authModule),F.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),o&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const r=this.createCcsCredentials(n);r&&(this.authCodeRequest.ccsCredential=r)}return await pe(this.authModule.acquireToken.bind(this.authModule),F.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Fn.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Fn.UPN}:null}}function d_(t,e,n){const o=Pl(t);if(!o)throw Jv(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),ve(by)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),ve(_y));return o}function jI(t,e,n){if(!t.state)throw ve(_d);const o=c_(e,t.state);if(!o)throw ve(Cy);if(o.interactionType!==n)throw ve(wy)}class $I extends _s{constructor(e,n,o,r,i,s,a,c,l,u){super(e,n,o,r,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{const n=this.generatePopupName(e.scopes||Na,e.authority||this.config.auth.authority),o=e.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,n,o);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");const r=this.openSizedPopup("about:blank",n,o);return this.acquireTokenPopupAsync(e,n,o,r)}}catch(n){return Promise.reject(n)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),o=this.generateLogoutPopupName(n),r=e&&e.authority,i=e&&e.mainWindowRedirectUri,s=(e==null?void 0:e.popupWindowAttributes)||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,o,s,r,void 0,i);{this.logger.verbose("asyncPopup set to false, opening popup");const a=this.openSizedPopup("about:blank",o,s);return this.logoutPopupAsync(n,o,s,r,a,i)}}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,o,r){this.logger.verbose("acquireTokenPopupAsync called");const i=this.initializeServerTelemetryManager(Et.acquireTokenPopup),s=await pe(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,we.Popup);Qy(s.authority);try{const a=await pe(this.initializeAuthorizationCodeRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(s),c=await pe(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(i,s.authority,s.azureCloudOptions),l=Po.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let u;l&&(u=this.performanceClient.startMeasurement(F.FetchAccountIdWithNativeBroker,e.correlationId));const h=await c.getAuthCodeUrl({...s,nativeBroker:l}),d=new Fd(c,this.browserStorage,a,this.logger,this.performanceClient),p={popup:r,popupName:n,popupWindowAttributes:o},m=this.initiateAuthRequest(h,p);this.eventHandler.emitEvent(Le.POPUP_OPENED,we.Popup,{popupWindow:m},null);const _=await this.monitorPopupForHash(m),T=wi(d_,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(Ro.removeThrottle(this.browserStorage,this.config.auth.clientId,a),T.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),u&&u.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw ve(Ha);const b=new Cs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Et.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,T.accountId,this.nativeStorage,s.correlationId),{userRequestState:C}=fo.parseRequestState(this.browserCrypto,s.state);return await b.acquireToken({...s,state:C,prompt:void 0})}return await d.handleCodeResponse(T,s)}catch(a){throw r&&r.close(),a instanceof It&&(a.setCorrelationId(this.correlationId),i.cacheFailedRequest(a)),a}}async logoutPopupAsync(e,n,o,r,i,s){var c,l;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Le.LOGOUT_START,we.Popup,e);const a=this.initializeServerTelemetryManager(Et.logoutPopup);try{await this.clearCacheOnLogout(e.account);const u=await pe(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(a,r);try{u.authority.endSessionEndpoint}catch{if((c=e.account)!=null&&c.homeAccountId&&e.postLogoutRedirectUri&&u.authority.protocolMode===Xo.OIDC){if(this.browserStorage.removeAccount((l=e.account)==null?void 0:l.homeAccountId),this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,we.Popup,e),s){const p={apiId:Et.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=at.getAbsoluteUrl(s,tr());await this.navigationClient.navigateInternal(m,p)}i&&i.close();return}}const h=u.getLogoutUri(e);this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,we.Popup,e);const d=this.openPopup(h,{popupName:n,popupWindowAttributes:o,popup:i});if(this.eventHandler.emitEvent(Le.POPUP_OPENED,we.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d).catch(()=>{}),s){const p={apiId:Et.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=at.getAbsoluteUrl(s,tr());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${m}`),await this.navigationClient.navigateInternal(m,p)}else this.logger.verbose("No main window navigation requested")}catch(u){throw i&&i.close(),u instanceof It&&(u.setCorrelationId(this.correlationId),a.cacheFailedRequest(u)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(Le.LOGOUT_FAILURE,we.Popup,null,u),this.eventHandler.emitEvent(Le.LOGOUT_END,we.Popup),u}this.eventHandler.emitEvent(Le.LOGOUT_END,we.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),ve(Fl)}monitorPopupForHash(e){return new Promise((n,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const r=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),o(ve(ki));return}let i="";try{i=e.location.href}catch{}if(!i||i==="about:blank")return;clearInterval(r);let s="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(a===xa.QUERY?s=e.location.search:s=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),n(s)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e)})}openPopup(e,n){try{let o;if(n.popup?(o=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),o.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),o=this.openSizedPopup(e,n.popupName,n.popupWindowAttributes)),!o)throw ve(Sy);return o.focus&&o.focus(),this.currentWindow=o,window.addEventListener("beforeunload",this.unloadWindow),o}catch(o){throw this.logger.error("error opening popup "+o.message),this.browserStorage.setInteractionInProgress(!1),ve(Ty)}}openSizedPopup(e,n,o){var d,p,m,_;const r=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let c=(d=o.popupSize)==null?void 0:d.width,l=(p=o.popupSize)==null?void 0:p.height,u=(m=o.popupPosition)==null?void 0:m.top,h=(_=o.popupPosition)==null?void 0:_.left;return(!c||c<0||c>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),c=go.POPUP_WIDTH),(!l||l<0||l>a)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),l=go.POPUP_HEIGHT),(!u||u<0||u>a)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),u=Math.max(0,a/2-go.POPUP_HEIGHT/2+i)),(!h||h<0||h>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,s/2-go.POPUP_WIDTH/2+r)),window.open(e,n,`width=${c}, height=${l}, top=${u}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(we.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,n){return`${go.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${go.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}class p_{constructor(e,n,o,r,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=o,this.logger=r,this.performanceClient=i}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){n.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(lt.ORIGIN_URI,n.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(lt.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const o={apiId:Et.acquireTokenRedirect,timeout:n.redirectTimeout,noHistory:!1};if(typeof n.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),n.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await n.navigationClient.navigateExternal(e,o);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await n.navigationClient.navigateExternal(e,o);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),ve(Fl)}async handleCodeResponse(e,n){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const o=this.browserStorage.generateStateKey(n),r=this.browserStorage.getTemporaryCache(o);if(!r)throw te(kl,"Cached State");let i;try{i=this.authModule.handleFragmentResponse(e,r)}catch(l){throw l instanceof Or&&l.subError===ki?ve(ki):l}const s=this.browserStorage.generateNonceKey(r),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&await pe(this.authModule.updateAuthority.bind(this.authModule),F.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId),i.nonce=a||void 0,i.state=r,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{const l=this.checkCcsCredentials();l&&(this.authCodeRequest.ccsCredential=l)}const c=await this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(n),c}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(lt.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}class zI extends _s{constructor(e,n,o,r,i,s,a,c,l,u){super(e,n,o,r,i,s,a,l,u),this.nativeStorage=c}async acquireToken(e){const n=await pe(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,we.Redirect);this.browserStorage.updateCacheEntries(n.state,n.nonce,n.authority,n.loginHint||"",n.account||null);const o=this.initializeServerTelemetryManager(Et.acquireTokenRedirect),r=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(n.state),this.eventHandler.emitEvent(Le.RESTORE_FROM_BFCACHE,we.Redirect))};try{const i=await pe(this.initializeAuthorizationCodeRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(n),s=await pe(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(o,n.authority,n.azureCloudOptions),a=new p_(s,this.browserStorage,i,this.logger,this.performanceClient),c=await s.getAuthCodeUrl({...n,nativeBroker:Po.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),l=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${l}`),window.addEventListener("pageshow",r),await a.initiateAuthRequest(c,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:l,onRedirectNavigate:e.onRedirectNavigate})}catch(i){throw i instanceof It&&(i.setCorrelationId(this.correlationId),o.cacheFailedRequest(i)),window.removeEventListener("pageshow",r),this.browserStorage.cleanRequestByState(n.state),i}}async handleRedirectPromise(e){const n=this.initializeServerTelemetryManager(Et.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[o,r]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(we.Redirect),null;const i=this.browserStorage.getTemporaryCache(lt.ORIGIN_URI,!0)||K.EMPTY_STRING,s=at.removeHashFromUrl(i),a=at.removeHashFromUrl(window.location.href);if(s===a&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),i.indexOf("#")>-1&&XA(i),await this.handleResponse(o,n);if(this.config.auth.navigateToLoginRequestUrl){if(!Sd()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(lt.URL_HASH,r,!0);const c={apiId:Et.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let l=!0;if(!i||i==="null"){const u=eI();this.browserStorage.setTemporaryCache(lt.ORIGIN_URI,u,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),l=await this.navigationClient.navigateInternal(u,c)}else this.logger.verbose(`Navigating to loginRequestUrl: ${i}`),l=await this.navigationClient.navigateInternal(i,c);if(!l)return await this.handleResponse(o,n)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,n);return null}catch(o){throw o instanceof It&&(o.setCorrelationId(this.correlationId),n.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(we.Redirect),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===xa.QUERY?n=window.location.search:n=window.location.hash);let o=Pl(n);if(o){try{jI(o,this.browserCrypto,we.Redirect)}catch(i){return i instanceof It&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return JA(window),this.logger.verbose("Hash contains known properties, returning response hash"),[o,n]}const r=this.browserStorage.getTemporaryCache(lt.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(lt.URL_HASH)),r&&(o=Pl(r),o)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[o,r]):[null,""]}async handleResponse(e,n){const o=e.state;if(!o)throw ve(_d);const r=this.browserStorage.getCachedRequest(o);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw ve(Ha);const a=new Cs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Et.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,r.correlationId),{userRequestState:c}=fo.parseRequestState(this.browserCrypto,o);return a.acquireToken({...r,state:c,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(o)})}const i=this.browserStorage.getCachedAuthority(o);if(!i)throw ve(bd);const s=await pe(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(n,i);return Ro.removeThrottle(this.browserStorage,this.config.auth.clientId,r),new p_(s,this.browserStorage,r,this.logger,this.performanceClient).handleCodeResponse(e,o)}async logout(e){var r,i;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),o=this.initializeServerTelemetryManager(Et.logout);try{this.eventHandler.emitEvent(Le.LOGOUT_START,we.Redirect,e),await this.clearCacheOnLogout(n.account);const s={apiId:Et.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=await pe(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(o,e&&e.authority);if(a.authority.protocolMode===Xo.OIDC)try{a.authority.endSessionEndpoint}catch{if((r=n.account)!=null&&r.homeAccountId){this.browserStorage.removeAccount((i=n.account)==null?void 0:i.homeAccountId),this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,we.Redirect,n);return}}const c=a.getLogoutUri(n);if(this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,we.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(c)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,s);return}}catch(s){throw s instanceof It&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),this.eventHandler.emitEvent(Le.LOGOUT_FAILURE,we.Redirect,null,s),this.eventHandler.emitEvent(Le.LOGOUT_END,we.Redirect),s}this.eventHandler.emitEvent(Le.LOGOUT_END,we.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return at.getAbsoluteUrl(n,tr())}}async function WI(t,e,n,o,r){if(e.addQueueMeasurement(F.SilentHandlerInitiateAuthRequest,o),!t)throw n.info("Navigate url is empty"),ve(Fl);return r?pe(VI,F.SilentHandlerLoadFrame,n,e,o)(t,r,e,o):wi(YI,F.SilentHandlerLoadFrameSync,n,e,o)(t)}async function GI(t,e,n,o,r,i,s){return o.addQueueMeasurement(F.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<Ad&&r.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Ad}ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(ve(ky))},e),u=window.setInterval(()=>{let h="";const d=t.contentWindow;try{h=d?d.location.href:""}catch{}if(!h||h==="about:blank")return;let p="";d&&(s===xa.QUERY?p=d.location.search:p=d.location.hash),window.clearTimeout(l),window.clearInterval(u),a(p)},n)}).finally(()=>{wi(QI,F.RemoveHiddenIframe,r,o,i)(t)})}function VI(t,e,n,o){return n.addQueueMeasurement(F.SilentHandlerLoadFrame,o),new Promise((r,i)=>{const s=f_();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=t,r(s)},e)})}function YI(t){const e=f_();return e.src=t,e}function f_(){const t=document.createElement("iframe");return t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function QI(t){document.body===t.parentNode&&document.body.removeChild(t)}class JI extends _s{constructor(e,n,o,r,i,s,a,c,l,u,h){super(e,n,o,r,i,s,c,u,h),this.apiId=a,this.nativeStorage=l}async acquireToken(e){if(this.performanceClient.addQueueMeasurement(F.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),e.prompt&&e.prompt!==cn.NONE&&e.prompt!==cn.NO_SESSION)throw ve(Ny);const n=await pe(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)({...e,prompt:e.prompt||cn.NONE},we.Silent);Qy(n.authority);const o=this.initializeServerTelemetryManager(this.apiId);try{const r=await pe(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)(o,n.authority,n.azureCloudOptions);return await pe(this.silentTokenHelper.bind(this),F.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(r,n)}catch(r){throw r instanceof It&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),r}}logout(){return Promise.reject(ve(Hl))}async silentTokenHelper(e,n){const o=n.correlationId;this.performanceClient.addQueueMeasurement(F.SilentIframeClientTokenHelper,o);const r=await pe(this.initializeAuthorizationCodeRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,o)(n),i=await pe(e.getAuthCodeUrl.bind(e),F.GetAuthCodeUrl,this.logger,this.performanceClient,o)({...n,nativeBroker:Po.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,n.authenticationScheme)}),s=new Fd(e,this.browserStorage,r,this.logger,this.performanceClient),a=await pe(WI,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,o)(i,this.performanceClient,this.logger,o,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,l=await pe(GI,F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,o)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,o,c),u=wi(d_,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,c,this.logger);if(u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw ve(Ha);const h=new Cs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,o),{userRequestState:d}=fo.parseRequestState(this.browserCrypto,n.state);return pe(h.acquireToken.bind(h),F.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,o)({...n,state:d,prompt:n.prompt||cn.NONE})}return pe(s.handleCodeResponse.bind(s),F.HandleCodeResponse,this.logger,this.performanceClient,o)(u,n)}}class XI extends _s{async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentRefreshClientAcquireToken,e.correlationId);const n=await pe(this.initializeBaseRequest.bind(this),F.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,e.account),o={...e,...n},r=this.initializeServerTelemetryManager(Et.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient(r,o.authority,o.azureCloudOptions);return pe(i.acquireTokenByRefreshToken.bind(i),F.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(o).catch(s=>{throw s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s),s})}logout(){return Promise.reject(ve(Hl))}async createRefreshTokenClient(e,n,o){const r=await pe(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,n,o);return new gd(r,this.performanceClient)}}class ZI{constructor(e,n,o,r){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=o,this.cryptoObj=r}loadExternalTokens(e,n,o){if(this.logger.info("TokenCache - loadExternalTokens called"),!n.id_token)throw ve(No);const r=Ci(n.id_token,xo);let i,s,a;if(e.account)a=jt.createFromAccountInfo(e.account),i=new fs(a,this.loadIdToken(n.id_token,a.homeAccountId,e.account.environment,e.account.tenantId),this.loadAccessToken(e,n,a.homeAccountId,e.account.environment,e.account.tenantId,o),this.loadRefreshToken(e,n,a.homeAccountId,e.account.environment));else if(e.authority){const c=un.generateAuthority(e.authority,e.azureCloudOptions),l={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};if(s=new un(c,this.config.system.networkClient,this.storage,l,this.logger),o.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),a=this.loadAccount(r,s,o.clientInfo),i=new fs(a,this.loadIdToken(n.id_token,a.homeAccountId,s.hostnameAndPort,s.tenant),this.loadAccessToken(e,n,a.homeAccountId,s.hostnameAndPort,s.tenant,o),this.loadRefreshToken(e,n,a.homeAccountId,s.hostnameAndPort));else if(n.client_info)this.logger.trace("TokenCache - homeAccountId from response"),a=this.loadAccount(r,s,n.client_info),i=new fs(a,this.loadIdToken(n.id_token,a.homeAccountId,s.hostnameAndPort,s.tenant),this.loadAccessToken(e,n,a.homeAccountId,s.hostnameAndPort,s.tenant,o),this.loadRefreshToken(e,n,a.homeAccountId,s.hostnameAndPort));else throw ve(No)}else throw ve(No);return this.generateAuthenticationResult(e,r,i,a,s)}loadAccount(e,n,o,r){if(this.isBrowserEnvironment){this.logger.verbose("TokenCache - loading account");let i;if(r?i=r:n.authorityType!==void 0&&o&&(i=jt.generateHomeAccountId(o,n.authorityType,this.logger,this.cryptoObj,e)),!i)throw ve(No);const s=e.tid,a=fd(this.storage,n,i,e,xo,o,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}else throw ve(No)}loadIdToken(e,n,o,r){const i=Rl(n,o,e,this.config.auth.clientId,r);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(i),i;throw ve(No)}loadAccessToken(e,n,o,r,i,s){if(!n.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!n.expires_in||!s.extendedExpiresOn)throw ve(No);const a=new qt(e.scopes).printScopes(),c=s.expiresOn||n.expires_in+new Date().getTime()/1e3,l=s.extendedExpiresOn,u=Ol(o,r,n.access_token,this.config.auth.clientId,i,a,c,l,xo);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(u),u;throw ve(No)}loadRefreshToken(e,n,o,r){if(!n.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;const i=Pv(o,r,n.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(i),i;throw ve(No)}generateAuthenticationResult(e,n,o,r,i){var d,p;let s=K.EMPTY_STRING,a=[],c=null,l;o!=null&&o.accessToken&&(s=o.accessToken.secret,a=qt.fromString(o.accessToken.target).asArray(),c=new Date(Number(o.accessToken.expiresOn)*1e3),l=new Date(Number(o.accessToken.extendedExpiresOn)*1e3));const u=n.oid||n.sub||K.EMPTY_STRING,h=n.tid||K.EMPTY_STRING;return{authority:i?i.canonicalAuthority:K.EMPTY_STRING,uniqueId:u,tenantId:h,scopes:a,account:r.getAccountInfo(),idToken:((d=o.idToken)==null?void 0:d.secret)||"",idTokenClaims:n||{},accessToken:s,fromCache:!0,expiresOn:c,correlationId:e.correlationId||K.EMPTY_STRING,requestId:K.EMPTY_STRING,extExpiresOn:l,familyId:K.EMPTY_STRING,tokenType:((p=o==null?void 0:o.accessToken)==null?void 0:p.tokenType)||K.EMPTY_STRING,state:K.EMPTY_STRING,cloudGraphHostName:r.cloudGraphHostName||K.EMPTY_STRING,msGraphHost:r.msGraphHost||K.EMPTY_STRING,code:void 0,fromNativeBroker:!1}}}class eR extends dy{constructor(e){super(e),this.includeRedirectUri=!1}}class tR extends _s{constructor(e,n,o,r,i,s,a,c,l,u){super(e,n,o,r,i,s,c,l,u),this.apiId=a}async acquireToken(e){if(!e.code)throw ve(Uy);const n=await pe(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,we.Silent),o=this.initializeServerTelemetryManager(this.apiId);try{const r={...n,code:e.code},i=await pe(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)(o,n.authority),s=new eR(i);this.logger.verbose("Auth code client created");const a=new Fd(s,this.browserStorage,r,this.logger,this.performanceClient);return await pe(a.handleCodeResponseFromServer.bind(a),F.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(r){throw r instanceof It&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),r}}logout(){return Promise.reject(ve(Hl))}}class $l{constructor(e){this.atsAsyncMeasurement=void 0,this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new ys(this.logger,this.performanceClient):Il,this.eventHandler=new RI(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new Ld(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,Bk(this.config.auth)):II(this.config.auth.clientId,this.logger);const n={cacheLocation:$t.MemoryStorage,temporaryCacheLocation:$t.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Ld(this.config.auth.clientId,n,this.browserCrypto,this.logger),this.tokenCache=new ZI(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e){const n=new $l(e);return await n.initialize(),n}trackPageVisibility(){this.atsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.atsAsyncMeasurement.increment({visibilityChangeCount:1}))}async initialize(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}const e=this.config.system.allowNativeBroker,n=this.performanceClient.startMeasurement(F.InitializeClientApplication);if(this.eventHandler.emitEvent(Le.INITIALIZE_START),e)try{this.nativeExtensionProvider=await Po.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(o){this.logger.verbose(o)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await pe(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),F.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient)(this.performanceClient)),this.initialized=!0,this.eventHandler.emitEvent(Le.INITIALIZE_END),n.end({allowNativeBroker:e,success:!0})}async handleRedirectPromise(e){this.logger.verbose("handleRedirectPromise called"),Yy(this.initialized);const n=this.getAllAccounts();if(this.isBrowserEnvironment){const o=e||"";let r=this.redirectResponse.get(o);if(typeof r>"u"){this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_START,we.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise");const i=this.browserStorage.getCachedNativeRequest();let s;if(i&&Po.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e)this.logger.trace("handleRedirectPromise - acquiring token from native platform"),s=new Cs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Et.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,i.accountId,this.nativeInternalStorage,i.correlationId).handleRedirectPromise();else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const a=this.browserStorage.getTemporaryCache(lt.CORRELATION_ID,!0)||K.EMPTY_STRING;s=this.createRedirectClient(a).handleRedirectPromise(e)}r=s.then(a=>(a&&(n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Le.LOGIN_SUCCESS,we.Redirect,a),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,we.Redirect,a),this.logger.verbose("handleRedirectResponse returned result, acquire token success"))),this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_END,we.Redirect),a)).catch(a=>{throw n.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,we.Redirect,null,a):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,we.Redirect,null,a),this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_END,we.Redirect),a}),this.redirectResponse.set(o,r)}else this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call");return r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n),this.preflightBrowserEnvironmentCheck(we.Redirect);const o=this.getAllAccounts().length>0;o?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,we.Redirect,e):this.eventHandler.emitEvent(Le.LOGIN_START,we.Redirect,e);let r;return this.nativeExtensionProvider&&this.canUseNative(e)?r=new Cs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Et.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e).catch(i=>{if(i instanceof nr&&bs(i))return this.nativeExtensionProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(i instanceof Oo)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw this.getBrowserStorage().setInteractionInProgress(!1),i}):r=this.createRedirectClient(n).acquireToken(e),r.catch(i=>{throw o?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,we.Redirect,null,i):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,we.Redirect,null,i),i})}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),o=this.performanceClient.startMeasurement(F.AcquireTokenPopup,n);try{this.logger.verbose("acquireTokenPopup called",n),this.preflightBrowserEnvironmentCheck(we.Popup)}catch(s){return Promise.reject(s)}const r=this.getAllAccounts();r.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,we.Popup,e):this.eventHandler.emitEvent(Le.LOGIN_START,we.Popup,e);let i;return this.canUseNative(e)?i=this.acquireTokenNative({...e,correlationId:n},Et.acquireTokenPopup).then(s=>(this.getBrowserStorage().setInteractionInProgress(!1),o.end({success:!0,isNativeBroker:!0,requestId:s.requestId}),s)).catch(s=>{if(s instanceof nr&&bs(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(n).acquireToken(e);if(s instanceof Oo)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e);throw this.getBrowserStorage().setInteractionInProgress(!1),s}):i=this.createPopupClient(n).acquireToken(e),i.then(s=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Le.LOGIN_SUCCESS,we.Popup,s):this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,we.Popup,s),o.add({accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),o.end({success:!0,requestId:s.requestId}),s)).catch(s=>(r.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,we.Popup,null,s):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,we.Popup,null,s),o.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var i;const n=this.getRequestCorrelationId(e),o={...e,prompt:e.prompt,correlationId:n};this.preflightBrowserEnvironmentCheck(we.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(F.SsoSilent,n),(i=this.ssoSilentMeasurement)==null||i.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(Le.SSO_SILENT_START,we.Silent,o);let r;return this.canUseNative(o)?r=this.acquireTokenNative(o,Et.ssoSilent).catch(s=>{if(s instanceof nr&&bs(s))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(o.correlationId).acquireToken(o);throw s}):r=this.createSilentIframeClient(o.correlationId).acquireToken(o),r.then(s=>{var a,c;return this.eventHandler.emitEvent(Le.SSO_SILENT_SUCCESS,we.Silent,s),(a=this.ssoSilentMeasurement)==null||a.add({accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),(c=this.ssoSilentMeasurement)==null||c.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId}),s}).catch(s=>{var a;throw this.eventHandler.emitEvent(Le.SSO_SILENT_FAILURE,we.Silent,null,s),(a=this.ssoSilentMeasurement)==null||a.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.preflightBrowserEnvironmentCheck(we.Silent),this.logger.trace("acquireTokenByCode called",n),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_START,we.Silent,e);const o=this.performanceClient.startMeasurement(F.AcquireTokenByCode,n);try{if(e.code&&e.nativeAccountId)throw ve(Hy);if(e.code){const r=e.code;let i=this.hybridAuthCodeResponses.get(r);return i?(this.logger.verbose("Existing acquireTokenByCode request found",n),o.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),i=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(s=>(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_SUCCESS,we.Silent,s),this.hybridAuthCodeResponses.delete(r),o.add({accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),o.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_FAILURE,we.Silent,null,s),o.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),s}),this.hybridAuthCodeResponses.set(r,i)),await i}else if(e.nativeAccountId){if(this.canUseNative(e,e.nativeAccountId))return await this.acquireTokenNative({...e,correlationId:n},Et.acquireTokenByCode,e.nativeAccountId).catch(r=>{throw r instanceof nr&&bs(r)&&(this.nativeExtensionProvider=void 0),r});throw ve(qy)}else throw ve(Fy)}catch(r){throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_FAILURE,we.Silent,null,r),o.end({errorCode:r instanceof It&&r.errorCode||void 0,subErrorCode:r instanceof It&&r.subError||void 0,success:!1}),r}}async acquireTokenByCodeAsync(e){var n;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(F.AcquireTokenByCodeAsync,e.correlationId),(n=this.acquireTokenByCodeAsyncMeasurement)==null||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>{var r;return(r=this.acquireTokenByCodeAsyncMeasurement)==null||r.end({success:!0,fromCache:o.fromCache,isNativeBroker:o.fromNativeBroker,requestId:o.requestId}),o}).catch(o=>{var r;throw(r=this.acquireTokenByCodeAsyncMeasurement)==null||r.end({errorCode:o.errorCode,subErrorCode:o.subError,success:!1}),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n,o){switch(this.performanceClient.addQueueMeasurement(F.AcquireTokenFromCache,n.correlationId),o){case Gn.Default:case Gn.AccessToken:case Gn.AccessTokenAndRefreshToken:return pe(e.acquireToken.bind(e),F.SilentCacheClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n);default:throw te(Rr)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(F.AcquireTokenByRefreshToken,e.correlationId),n){case Gn.Default:case Gn.AccessTokenAndRefreshToken:case Gn.RefreshToken:case Gn.RefreshTokenAndNetwork:const o=this.createSilentRefreshClient(e.correlationId);return pe(o.acquireToken.bind(o),F.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw te(Rr)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(F.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return pe(n.acquireToken.bind(n),F.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(we.Redirect),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(we.Popup),this.createPopupClient(n).logout(e)}catch(n){return Promise.reject(n)}}async clearCache(e){const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts(e):[]}getAccount(e){if(this.logger.trace("getAccount called"),Object.keys(e).length===0)return this.logger.warning("getAccount: No accountFilter provided"),null;const n=this.browserStorage.getAccountInfoFilteredBy(e);return n?(this.logger.verbose("getAccount: Account matching provided filter found, returning"),n):(this.logger.verbose("getAccount: No matching account found, returning null"),null)}getAccountByUsername(e){if(this.logger.trace("getAccountByUsername called"),!e)return this.logger.warning("getAccountByUsername: No username provided"),null;const n=this.browserStorage.getAccountInfoFilteredBy({username:e});return n?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${e}`),n):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)}getAccountByHomeId(e){if(this.logger.trace("getAccountByHomeId called"),!e)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;const n=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:e});return n?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${e}`),n):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)}getAccountByLocalId(e){if(this.logger.trace("getAccountByLocalId called"),!e)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;const n=this.browserStorage.getAccountInfoFilteredBy({localAccountId:e});return n?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${e}`),n):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)}setActiveAccount(e){this.browserStorage.setActiveAccount(e)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const o=jt.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(o),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}preflightBrowserEnvironmentCheck(e,n=!1){if(this.logger.verbose("preflightBrowserEnvironmentCheck started"),oI(this.isBrowserEnvironment),tI(e,this.config.system.allowRedirectInIframe),kd(),nI(),Yy(this.initialized),e===we.Redirect&&this.config.cache.cacheLocation===$t.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw s_(i_);(e===we.Redirect||e===we.Popup)&&this.preflightInteractiveRequest(!n)}preflightInteractiveRequest(e){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),kd(),e&&this.getBrowserStorage().setInteractionInProgress(!0)}async acquireTokenNative(e,n,o){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw ve(Ha);return new Cs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.nativeExtensionProvider,o||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,n){if(this.logger.trace("canUseNative called"),!Po.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case cn.NONE:case cn.CONSENT:case cn.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new $I(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new zI(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new JI(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Et.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new h_(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new XI(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new tR(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Et.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e){return this.eventHandler.addEventCallback(e)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}getBrowserStorage(){return this.browserStorage}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?xr():K.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||Gy})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||Gy})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),o=this.performanceClient.startMeasurement(F.AcquireTokenSilent,n);o.add({cacheLookupPolicy:e.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(we.Silent),this.logger.verbose("acquireTokenSilent called",n);const r=e.account||this.getActiveAccount();if(!r)throw ve(Oy);const i={clientId:this.config.auth.clientId,authority:e.authority||K.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:r.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},s=JSON.stringify(i),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n);const c=pe(this.acquireTokenSilentAsync.bind(this),F.AcquireTokenSilentAsync,this.logger,this.performanceClient,n)({...e,correlationId:n},r).then(l=>(this.activeSilentTokenRequests.delete(s),o.add({accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length}),o.end({success:!0,fromCache:l.fromCache,isNativeBroker:l.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:l.requestId}),l)).catch(l=>{throw this.activeSilentTokenRequests.delete(s),o.end({errorCode:l.errorCode,subErrorCode:l.subError,success:!1}),l});return this.activeSilentTokenRequests.set(s,c),c}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),o.discard(),a}async acquireTokenSilentAsync(e,n){var r;this.performanceClient.addQueueMeasurement(F.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,we.Silent,e),this.atsAsyncMeasurement=this.performanceClient.startMeasurement(F.AcquireTokenSilentAsync,e.correlationId),(r=this.atsAsyncMeasurement)==null||r.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility);let o;if(Po.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&n.nativeAccountId){this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform");const i={...e,account:n};o=this.acquireTokenNative(i,Et.acquireTokenSilent_silentFlow).catch(async s=>{if(s instanceof nr&&bs(s))return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,this.createSilentIframeClient(e.correlationId).acquireToken(e);throw s})}else{this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow");const i=this.createSilentCacheClient(e.correlationId),s=await pe(i.initializeSilentRequest.bind(i),F.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n),a=e.cacheLookupPolicy||Gn.Default;o=pe(this.acquireTokenFromCache.bind(this),F.AcquireTokenFromCache,this.logger,this.performanceClient,s.correlationId)(i,s,a).catch(c=>{if(e.cacheLookupPolicy===Gn.AccessToken)throw c;return kd(),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_NETWORK_START,we.Silent,s),pe(this.acquireTokenByRefreshToken.bind(this),F.AcquireTokenByRefreshToken,this.logger,this.performanceClient,s.correlationId)(s,a).catch(l=>{const u=!(l instanceof Oo)&&(l.errorCode===go.INVALID_GRANT_ERROR||l.errorCode===Rr)||l.errorCode===Dl,h=a===Gn.Default||a===Gn.Skip||a===Gn.RefreshTokenAndNetwork;if(u&&h)return this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",e.correlationId),pe(this.acquireTokenBySilentIframe.bind(this),F.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s);throw l})})}return o.then(i=>{var s;return this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,we.Silent,i),(s=this.atsAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i}).catch(i=>{var s;throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,we.Silent,null,i),(s=this.atsAsyncMeasurement)==null||s.end({errorCode:i.errorCode,subErrorCode:i.subError,success:!1}),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibility)})}}const nR=Object.freeze(Object.defineProperty({__proto__:null,StandardController:$l},Symbol.toStringTag,{value:"Module"}));class Hd{static async createPublicClientApplication(e){const n=await fI(e);return new Hd(e,n)}constructor(e,n){if(n)this.controller=n;else{const o=new Ii(e);this.controller=new $l(o)}}async initialize(){return this.controller.initialize()}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e){return this.controller.addEventCallback(e)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}const oR=async()=>{try{return(await At.get("/users/me")).data}catch(t){console.log(t)}},rR=async t=>{try{return(await At.get(`/users/${t}`)).data}catch(e){console.log(e)}},iR=async()=>{try{return(await At.get("/users")).data}catch(t){console.log(t)}},sR=async t=>{try{return(await At.get(`/users/${t}/cats`)).data}catch(e){console.log(e)}},aR=async t=>{try{return(await At.put(`/users/${t.id}`,t)).data}catch(e){console.log(e)}},cR=async t=>{try{return(await At.get(`users/${t}/permissions`)).data}catch(e){console.log(e)}},ws={getUserById:rR,getUsers:iR,editUser:aR,getCatsByUserId:sR,getCurrentUser:oR,getPermissions:cR},Pr=fr({user:null,permissions:[]}),g_=async()=>{const t=await ws.getCurrentUser();t&&(Pr.user=t)},m_=async()=>{if(!Pr.user)return;const t=await ws.getPermissions(Pr.user.id);t&&(Pr.permissions=t)},lR=()=>{Pr.user=null,localStorage.removeItem("token")},qd=t=>Pr.permissions.some(e=>e.name===t),Vn=Re(()=>Pr.user),v_=["openid","offline_access","8f374d27-54ee-40d1-bed8-ba2f8a4bd1f6"];let Mr;const uR=async()=>{let t;if(localStorage.msalConfig?t=JSON.parse(localStorage.msalConfig):(t=await sk.fetchConfig(),localStorage.msalConfig=JSON.stringify(t)),!t)return console.log("No config found");const e={auth:{authority:t.authority,clientId:t.clientId,knownAuthorities:[t.authorityDomain],redirectUri:t.redirectUri},cache:{cacheLocation:$t.LocalStorage}};return Mr=await Hd.createPublicClientApplication(e),Mr.addEventCallback(async n=>{n.eventType===Le.LOGIN_SUCCESS&&(await g_(),await m_())}),Mr};var Es=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ri=typeof window>"u"||"Deno"in window;function Yn(){}function hR(t,e){return typeof t=="function"?t(e):t}function Bd(t){return typeof t=="number"&&t>=0&&t!==1/0}function y_(t,e){return Math.max(t+(e||0)-Date.now(),0)}function __(t,e){const{type:n="all",exact:o,fetchStatus:r,predicate:i,queryKey:s,stale:a}=t;if(s){if(o){if(e.queryHash!==Kd(s,e.options))return!1}else if(!ja(e.queryKey,s))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof r<"u"&&r!==e.state.fetchStatus||i&&!i(e))}function b_(t,e){const{exact:n,status:o,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ka(e.options.mutationKey)!==Ka(i))return!1}else if(!ja(e.options.mutationKey,i))return!1}return!(o&&e.state.status!==o||r&&!r(e))}function Kd(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ka)(t)}function Ka(t){return JSON.stringify(t,(e,n)=>jd(n)?Object.keys(n).sort().reduce((o,r)=>(o[r]=n[r],o),{}):n)}function ja(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!ja(t[n],e[n])):!1}function C_(t,e){if(t===e)return t;const n=w_(t)&&w_(e);if(n||jd(t)&&jd(e)){const o=n?t.length:Object.keys(t).length,r=n?e:Object.keys(e),i=r.length,s=n?[]:{};let a=0;for(let c=0;c<i;c++){const l=n?c:r[c];s[l]=C_(t[l],e[l]),s[l]===t[l]&&a++}return o===i&&a===o?t:s}return e}function zl(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function w_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function jd(t){if(!E_(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!E_(n)||!n.hasOwnProperty("isPrototypeOf"))}function E_(t){return Object.prototype.toString.call(t)==="[object Object]"}function T_(t){return new Promise(e=>{setTimeout(e,t)})}function S_(t){T_(0).then(t)}function $d(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?C_(t,e):e}function dR(t,e,n=0){const o=[...t,e];return n&&o.length>n?o.slice(1):o}function pR(t,e,n=0){const o=[e,...t];return n&&o.length>n?o.slice(0,-1):o}var fR=(ww=class extends Es{constructor(){super();Ee(this,Di,void 0);Ee(this,Vr,void 0);Ee(this,Fs,void 0);de(this,Fs,e=>{if(!Ri&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){R(this,Vr)||this.setEventListener(R(this,Fs))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Vr))==null||e.call(this),de(this,Vr,void 0))}setEventListener(e){var n;de(this,Fs,e),(n=R(this,Vr))==null||n.call(this),de(this,Vr,e(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()}))}setFocused(e){R(this,Di)!==e&&(de(this,Di,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return typeof R(this,Di)=="boolean"?R(this,Di):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Di=new WeakMap,Vr=new WeakMap,Fs=new WeakMap,ww),Wl=new fR,gR=(Ew=class extends Es{constructor(){super();Ee(this,Hs,!0);Ee(this,Yr,void 0);Ee(this,qs,void 0);de(this,qs,e=>{if(!Ri&&window.addEventListener){const n=()=>e(!0),o=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",o,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",o)}}})}onSubscribe(){R(this,Yr)||this.setEventListener(R(this,qs))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Yr))==null||e.call(this),de(this,Yr,void 0))}setEventListener(e){var n;de(this,qs,e),(n=R(this,Yr))==null||n.call(this),de(this,Yr,e(this.setOnline.bind(this)))}setOnline(e){R(this,Hs)!==e&&(de(this,Hs,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,Hs)}},Hs=new WeakMap,Yr=new WeakMap,qs=new WeakMap,Ew),Gl=new gR;function mR(t){return Math.min(1e3*2**t,3e4)}function Vl(t){return(t??"online")==="online"?Gl.isOnline():!0}var k_=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function zd(t){return t instanceof k_}function A_(t){let e=!1,n=0,o=!1,r,i,s;const a=new Promise((T,b)=>{i=T,s=b}),c=T=>{var b;o||(p(new k_(T)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},u=()=>{e=!1},h=()=>!Wl.isFocused()||t.networkMode!=="always"&&!Gl.isOnline(),d=T=>{var b;o||(o=!0,(b=t.onSuccess)==null||b.call(t,T),r==null||r(),i(T))},p=T=>{var b;o||(o=!0,(b=t.onError)==null||b.call(t,T),r==null||r(),s(T))},m=()=>new Promise(T=>{var b;r=C=>{const y=o||!h();return y&&T(C),y},(b=t.onPause)==null||b.call(t)}).then(()=>{var T;r=void 0,o||((T=t.onContinue)==null||T.call(t))}),_=()=>{if(o)return;let T;try{T=t.fn()}catch(b){T=Promise.reject(b)}Promise.resolve(T).then(d).catch(b=>{var A;if(o)return;const C=t.retry??(Ri?0:3),y=t.retryDelay??mR,v=typeof y=="function"?y(n,b):y,w=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,b);if(e||!w){p(b);return}n++,(A=t.onFail)==null||A.call(t,n,b),T_(v).then(()=>{if(h())return m()}).then(()=>{e?p(b):_()})})};return Vl(t.networkMode)?_():m().then(_),{promise:a,cancel:c,continue:()=>r!=null&&r()?a:Promise.resolve(),cancelRetry:l,continueRetry:u}}function vR(){let t=[],e=0,n=c=>{c()},o=c=>{c()};const r=c=>{let l;e++;try{l=c()}finally{e--,e||a()}return l},i=c=>{e?t.push(c):S_(()=>{n(c)})},s=c=>(...l)=>{i(()=>{c(...l)})},a=()=>{const c=t;t=[],c.length&&S_(()=>{o(()=>{c.forEach(l=>{n(l)})})})};return{batch:r,batchCalls:s,schedule:i,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{o=c}}}var nn=vR(),I_=(Tw=class{constructor(){Ee(this,Ui,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bd(this.gcTime)&&de(this,Ui,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ri?1/0:5*60*1e3))}clearGcTimeout(){R(this,Ui)&&(clearTimeout(R(this,Ui)),de(this,Ui,void 0))}},Ui=new WeakMap,Tw),yR=(Sw=class extends I_{constructor(e){super();Ee(this,js);Ee(this,Co);Ee(this,Bs,void 0);Ee(this,Ks,void 0);Ee(this,eo,void 0);Ee(this,Qr,void 0);Ee(this,to,void 0);Ee(this,Xt,void 0);Ee(this,uc,void 0);Ee(this,Fi,void 0);de(this,Fi,!1),de(this,uc,e.defaultOptions),Ke(this,js,mu).call(this,e.options),de(this,Xt,[]),de(this,eo,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,de(this,Bs,e.state||_R(this.options)),this.state=R(this,Bs),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!R(this,Xt).length&&this.state.fetchStatus==="idle"&&R(this,eo).remove(this)}setData(e,n){const o=$d(this.state.data,e,this.options);return Ke(this,Co,cr).call(this,{data:o,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),o}setState(e,n){Ke(this,Co,cr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var o;const n=R(this,Qr);return(o=R(this,to))==null||o.cancel(e),n?n.then(Yn).catch(Yn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Bs))}isActive(){return R(this,Xt).some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||R(this,Xt).some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!y_(this.state.dataUpdatedAt,e)}onFocus(){var e,n;(e=R(this,Xt).find(o=>o.shouldFetchOnWindowFocus()))==null||e.refetch({cancelRefetch:!1}),(n=R(this,to))==null||n.continue()}onOnline(){var e,n;(e=R(this,Xt).find(o=>o.shouldFetchOnReconnect()))==null||e.refetch({cancelRefetch:!1}),(n=R(this,to))==null||n.continue()}addObserver(e){R(this,Xt).includes(e)||(R(this,Xt).push(e),this.clearGcTimeout(),R(this,eo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){R(this,Xt).includes(e)&&(de(this,Xt,R(this,Xt).filter(n=>n!==e)),R(this,Xt).length||(R(this,to)&&(R(this,Fi)?R(this,to).cancel({revert:!0}):R(this,to).cancelRetry()),this.scheduleGc()),R(this,eo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return R(this,Xt).length}invalidate(){this.state.isInvalidated||Ke(this,Co,cr).call(this,{type:"invalidate"})}fetch(e,n){var l,u,h,d;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(R(this,Qr))return(l=R(this,to))==null||l.continueRetry(),R(this,Qr)}if(e&&Ke(this,js,mu).call(this,e),!this.options.queryFn){const p=R(this,Xt).find(m=>m.options.queryFn);p&&Ke(this,js,mu).call(this,p.options)}const o=new AbortController,r={queryKey:this.queryKey,meta:this.meta},i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(de(this,Fi,!0),o.signal)})};i(r);const s=()=>this.options.queryFn?(de(this,Fi,!1),this.options.persister?this.options.persister(this.options.queryFn,r,this):this.options.queryFn(r)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(a),(u=this.options.behavior)==null||u.onFetch(a,this),de(this,Ks,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&Ke(this,Co,cr).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=p=>{var m,_,T,b;zd(p)&&p.silent||Ke(this,Co,cr).call(this,{type:"error",error:p}),zd(p)||((_=(m=R(this,eo).config).onError)==null||_.call(m,p,this),(b=(T=R(this,eo).config).onSettled)==null||b.call(T,this.state.data,p,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return de(this,to,A_({fn:a.fetchFn,abort:o.abort.bind(o),onSuccess:p=>{var m,_,T,b;if(typeof p>"u"){c(new Error(`${this.queryHash} data is undefined`));return}this.setData(p),(_=(m=R(this,eo).config).onSuccess)==null||_.call(m,p,this),(b=(T=R(this,eo).config).onSettled)==null||b.call(T,p,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(p,m)=>{Ke(this,Co,cr).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{Ke(this,Co,cr).call(this,{type:"pause"})},onContinue:()=>{Ke(this,Co,cr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode})),de(this,Qr,R(this,to).promise),R(this,Qr)}},Bs=new WeakMap,Ks=new WeakMap,eo=new WeakMap,Qr=new WeakMap,to=new WeakMap,Xt=new WeakMap,uc=new WeakMap,Fi=new WeakMap,js=new WeakSet,mu=function(e){this.options={...R(this,uc),...e},this.updateGcTime(this.options.gcTime)},Co=new WeakSet,cr=function(e){const n=o=>{switch(e.type){case"failed":return{...o,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:e.meta??null,fetchStatus:Vl(this.options.networkMode)?"fetching":"paused",...!o.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...o,data:e.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return zd(r)&&r.revert&&R(this,Ks)?{...R(this,Ks),fetchStatus:"idle"}:{...o,error:r,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...e.state}}};this.state=n(this.state),nn.batch(()=>{R(this,Xt).forEach(o=>{o.onQueryUpdate()}),R(this,eo).notify({query:this,type:"updated",action:e})})},Sw);function _R(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",o=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var R_=(kw=class extends Es{constructor(e={}){super();Ee(this,Ho,void 0);this.config=e,de(this,Ho,new Map)}build(e,n,o){const r=n.queryKey,i=n.queryHash??Kd(r,n);let s=this.get(i);return s||(s=new yR({cache:this,queryKey:r,queryHash:i,options:e.defaultQueryOptions(n),state:o,defaultOptions:e.getQueryDefaults(r)}),this.add(s)),s}add(e){R(this,Ho).has(e.queryHash)||(R(this,Ho).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=R(this,Ho).get(e.queryHash);n&&(e.destroy(),n===e&&R(this,Ho).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){nn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,Ho).get(e)}getAll(){return[...R(this,Ho).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(o=>__(n,o))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(o=>__(e,o)):n}notify(e){nn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){nn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){nn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ho=new WeakMap,kw),bR=(Aw=class extends I_{constructor(e){super();Ee(this,Bo);Ee(this,qo,void 0);Ee(this,hc,void 0);Ee(this,Hn,void 0);Ee(this,$s,void 0);this.mutationId=e.mutationId,de(this,hc,e.defaultOptions),de(this,Hn,e.mutationCache),de(this,qo,[]),this.state=e.state||O_(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...R(this,hc),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,qo).includes(e)||(R(this,qo).push(e),this.clearGcTimeout(),R(this,Hn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){de(this,qo,R(this,qo).filter(n=>n!==e)),this.scheduleGc(),R(this,Hn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,qo).length||(this.state.status==="pending"?this.scheduleGc():R(this,Hn).remove(this))}continue(){var e;return((e=R(this,$s))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,i,s,a,c,l,u,h,d,p,m,_,T,b,C,y,v,w,A,S;const n=()=>(de(this,$s,A_({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(E,O)=>{Ke(this,Bo,oi).call(this,{type:"failed",failureCount:E,error:O})},onPause:()=>{Ke(this,Bo,oi).call(this,{type:"pause"})},onContinue:()=>{Ke(this,Bo,oi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),R(this,$s).promise),o=this.state.status==="pending";try{if(!o){Ke(this,Bo,oi).call(this,{type:"pending",variables:e}),await((i=(r=R(this,Hn).config).onMutate)==null?void 0:i.call(r,e,this));const O=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,e));O!==this.state.context&&Ke(this,Bo,oi).call(this,{type:"pending",context:O,variables:e})}const E=await n();return await((l=(c=R(this,Hn).config).onSuccess)==null?void 0:l.call(c,E,e,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,E,e,this.state.context)),await((p=(d=R(this,Hn).config).onSettled)==null?void 0:p.call(d,E,null,this.state.variables,this.state.context,this)),await((_=(m=this.options).onSettled)==null?void 0:_.call(m,E,null,e,this.state.context)),Ke(this,Bo,oi).call(this,{type:"success",data:E}),E}catch(E){try{throw await((b=(T=R(this,Hn).config).onError)==null?void 0:b.call(T,E,e,this.state.context,this)),await((y=(C=this.options).onError)==null?void 0:y.call(C,E,e,this.state.context)),await((w=(v=R(this,Hn).config).onSettled)==null?void 0:w.call(v,void 0,E,this.state.variables,this.state.context,this)),await((S=(A=this.options).onSettled)==null?void 0:S.call(A,void 0,E,e,this.state.context)),E}finally{Ke(this,Bo,oi).call(this,{type:"error",error:E})}}}},qo=new WeakMap,hc=new WeakMap,Hn=new WeakMap,$s=new WeakMap,Bo=new WeakSet,oi=function(e){const n=o=>{switch(e.type){case"failed":return{...o,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Vl(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...o,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:e.error,failureCount:o.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),nn.batch(()=>{R(this,qo).forEach(o=>{o.onMutationUpdate(e)}),R(this,Hn).notify({mutation:this,type:"updated",action:e})})},Aw);function O_(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var N_=(Iw=class extends Es{constructor(e={}){super();Ee(this,no,void 0);Ee(this,dc,void 0);Ee(this,Hi,void 0);this.config=e,de(this,no,[]),de(this,dc,0)}build(e,n,o){const r=new bR({mutationCache:this,mutationId:++gu(this,dc)._,options:e.defaultMutationOptions(n),state:o});return this.add(r),r}add(e){R(this,no).push(e),this.notify({type:"added",mutation:e})}remove(e){de(this,no,R(this,no).filter(n=>n!==e)),this.notify({type:"removed",mutation:e})}clear(){nn.batch(()=>{R(this,no).forEach(e=>{this.remove(e)})})}getAll(){return R(this,no)}find(e){const n={exact:!0,...e};return R(this,no).find(o=>b_(n,o))}findAll(e={}){return R(this,no).filter(n=>b_(e,n))}notify(e){nn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){return de(this,Hi,(R(this,Hi)??Promise.resolve()).then(()=>{const e=R(this,no).filter(n=>n.state.isPaused);return nn.batch(()=>e.reduce((n,o)=>n.then(()=>o.continue().catch(Yn)),Promise.resolve()))}).then(()=>{de(this,Hi,void 0)})),R(this,Hi)}},no=new WeakMap,dc=new WeakMap,Hi=new WeakMap,Iw);function CR(t){return{onFetch:(e,n)=>{const o=async()=>{var m,_,T,b,C;const r=e.options,i=(T=(_=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:_.fetchMore)==null?void 0:T.direction,s=((b=e.state.data)==null?void 0:b.pages)||[],a=((C=e.state.data)==null?void 0:C.pageParams)||[],c={pages:[],pageParams:[]};let l=!1;const u=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?l=!0:e.signal.addEventListener("abort",()=>{l=!0}),e.signal)})},h=e.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`))),d=async(y,v,w)=>{if(l)return Promise.reject();if(v==null&&y.pages.length)return Promise.resolve(y);const A={queryKey:e.queryKey,pageParam:v,direction:w?"backward":"forward",meta:e.options.meta};u(A);const S=await h(A),{maxPages:E}=e.options,O=w?pR:dR;return{pages:O(y.pages,S,E),pageParams:O(y.pageParams,v,E)}};let p;if(i&&s.length){const y=i==="backward",v=y?wR:x_,w={pages:s,pageParams:a},A=v(r,w);p=await d(w,A,y)}else{p=await d(c,a[0]??r.initialPageParam);const y=t??s.length;for(let v=1;v<y;v++){const w=x_(r,p);p=await d(p,w)}}return p};e.options.persister?e.fetchFn=()=>{var r,i;return(i=(r=e.options).persister)==null?void 0:i.call(r,o,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=o}}}function x_(t,{pages:e,pageParams:n}){const o=e.length-1;return t.getNextPageParam(e[o],e,n[o],n)}function wR(t,{pages:e,pageParams:n}){var o;return(o=t.getPreviousPageParam)==null?void 0:o.call(t,e[0],e,n[0],n)}var ER=(Rw=class{constructor(t={}){Ee(this,Gt,void 0);Ee(this,Jr,void 0);Ee(this,Xr,void 0);Ee(this,zs,void 0);Ee(this,Ws,void 0);Ee(this,Zr,void 0);Ee(this,Gs,void 0);Ee(this,Vs,void 0);de(this,Gt,t.queryCache||new R_),de(this,Jr,t.mutationCache||new N_),de(this,Xr,t.defaultOptions||{}),de(this,zs,new Map),de(this,Ws,new Map),de(this,Zr,0)}mount(){gu(this,Zr)._++,R(this,Zr)===1&&(de(this,Gs,Wl.subscribe(()=>{Wl.isFocused()&&(this.resumePausedMutations(),R(this,Gt).onFocus())})),de(this,Vs,Gl.subscribe(()=>{Gl.isOnline()&&(this.resumePausedMutations(),R(this,Gt).onOnline())})))}unmount(){var t,e;gu(this,Zr)._--,R(this,Zr)===0&&((t=R(this,Gs))==null||t.call(this),de(this,Gs,void 0),(e=R(this,Vs))==null||e.call(this),de(this,Vs,void 0))}isFetching(t){return R(this,Gt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,Jr).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=R(this,Gt).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:n})=>{const o=n.data;return[e,o]})}setQueryData(t,e,n){var s;const o=(s=R(this,Gt).find({queryKey:t}))==null?void 0:s.state.data,r=hR(e,o);if(typeof r>"u")return;const i=this.defaultQueryOptions({queryKey:t});return R(this,Gt).build(this,i).setData(r,{...n,manual:!0})}setQueriesData(t,e,n){return nn.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:o})=>[o,this.setQueryData(o,e,n)]))}getQueryState(t){var e;return(e=R(this,Gt).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=R(this,Gt);nn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=R(this,Gt),o={type:"active",...t};return nn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries(o,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},o=nn.batch(()=>R(this,Gt).findAll(t).map(r=>r.cancel(n)));return Promise.all(o).then(Yn).catch(Yn)}invalidateQueries(t={},e={}){return nn.batch(()=>{if(R(this,Gt).findAll(t).forEach(o=>{o.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},o=nn.batch(()=>R(this,Gt).findAll(t).filter(r=>!r.isDisabled()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(Yn)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(o).then(Yn)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const n=R(this,Gt).build(this,e);return n.isStaleByTime(e.staleTime)?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Yn).catch(Yn)}fetchInfiniteQuery(t){return t.behavior=CR(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Yn).catch(Yn)}resumePausedMutations(){return R(this,Jr).resumePausedMutations()}getQueryCache(){return R(this,Gt)}getMutationCache(){return R(this,Jr)}getDefaultOptions(){return R(this,Xr)}setDefaultOptions(t){de(this,Xr,t)}setQueryDefaults(t,e){R(this,zs).set(Ka(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,zs).values()];let n={};return e.forEach(o=>{ja(t,o.queryKey)&&(n={...n,...o.defaultOptions})}),n}setMutationDefaults(t,e){R(this,Ws).set(Ka(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,Ws).values()];let n={};return e.forEach(o=>{ja(t,o.mutationKey)&&(n={...n,...o.defaultOptions})}),n}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...R(this,Xr).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Kd(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Xr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,Gt).clear(),R(this,Jr).clear()}},Gt=new WeakMap,Jr=new WeakMap,Xr=new WeakMap,zs=new WeakMap,Ws=new WeakMap,Zr=new WeakMap,Gs=new WeakMap,Vs=new WeakMap,Rw),TR=(Ow=class extends Es{constructor(e,n){super();Ee(this,$i);Ee(this,fc);Ee(this,gc);Ee(this,mc);Ee(this,vc);Ee(this,yc);Ee(this,_c);Ee(this,bc);Ee(this,uu);Ee(this,Nn,void 0);Ee(this,_t,void 0);Ee(this,Ys,void 0);Ee(this,hn,void 0);Ee(this,qi,void 0);Ee(this,Qs,void 0);Ee(this,Ko,void 0);Ee(this,pc,void 0);Ee(this,Js,void 0);Ee(this,Xs,void 0);Ee(this,Bi,void 0);Ee(this,Ki,void 0);Ee(this,ei,void 0);Ee(this,ji,void 0);de(this,_t,void 0),de(this,Ys,void 0),de(this,hn,void 0),de(this,ji,new Set),de(this,Nn,e),this.options=n,de(this,Ko,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,_t).addObserver(this),P_(R(this,_t),this.options)?Ke(this,$i,Tc).call(this):this.updateResult(),Ke(this,vc,Zp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Wd(R(this,_t),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Wd(R(this,_t),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ke(this,yc,ef).call(this),Ke(this,_c,tf).call(this),R(this,_t).removeObserver(this)}setOptions(e,n){const o=this.options,r=R(this,_t);if(this.options=R(this,Nn).defaultQueryOptions(e),zl(o,this.options)||R(this,Nn).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,_t),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),Ke(this,bc,nf).call(this);const i=this.hasListeners();i&&M_(R(this,_t),r,this.options,o)&&Ke(this,$i,Tc).call(this),this.updateResult(n),i&&(R(this,_t)!==r||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&Ke(this,fc,Qp).call(this);const s=Ke(this,gc,Jp).call(this);i&&(R(this,_t)!==r||this.options.enabled!==o.enabled||s!==R(this,ei))&&Ke(this,mc,Xp).call(this,s)}getOptimisticResult(e){const n=R(this,Nn).getQueryCache().build(R(this,Nn),e),o=this.createResult(n,e);return kR(this,o)&&(de(this,hn,o),de(this,Qs,this.options),de(this,qi,R(this,_t).state)),o}getCurrentResult(){return R(this,hn)}trackResult(e){const n={};return Object.keys(e).forEach(o=>{Object.defineProperty(n,o,{configurable:!1,enumerable:!0,get:()=>(R(this,ji).add(o),e[o])})}),n}getCurrentQuery(){return R(this,_t)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=R(this,Nn).defaultQueryOptions(e),o=R(this,Nn).getQueryCache().build(R(this,Nn),n);return o.isFetchingOptimistic=!0,o.fetch().then(()=>this.createResult(o,n))}fetch(e){return Ke(this,$i,Tc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,hn)))}createResult(e,n){var v;const o=R(this,_t),r=this.options,i=R(this,hn),s=R(this,qi),a=R(this,Qs),c=e!==o?e.state:R(this,Ys),{state:l}=e;let{error:u,errorUpdatedAt:h,fetchStatus:d,status:p}=l,m=!1,_;if(n._optimisticResults){const w=this.hasListeners(),A=!w&&P_(e,n),S=w&&M_(e,o,n,r);(A||S)&&(d=Vl(e.options.networkMode)?"fetching":"paused",l.dataUpdatedAt||(p="pending")),n._optimisticResults==="isRestoring"&&(d="idle")}if(n.select&&typeof l.data<"u")if(i&&l.data===(s==null?void 0:s.data)&&n.select===R(this,pc))_=R(this,Js);else try{de(this,pc,n.select),_=n.select(l.data),_=$d(i==null?void 0:i.data,_,n),de(this,Js,_),de(this,Ko,null)}catch(w){de(this,Ko,w)}else _=l.data;if(typeof n.placeholderData<"u"&&typeof _>"u"&&p==="pending"){let w;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))w=i.data;else if(w=typeof n.placeholderData=="function"?n.placeholderData((v=R(this,Xs))==null?void 0:v.state.data,R(this,Xs)):n.placeholderData,n.select&&typeof w<"u")try{w=n.select(w),de(this,Ko,null)}catch(A){de(this,Ko,A)}typeof w<"u"&&(p="success",_=$d(i==null?void 0:i.data,w,n),m=!0)}R(this,Ko)&&(u=R(this,Ko),_=R(this,Js),h=Date.now(),p="error");const T=d==="fetching",b=p==="pending",C=p==="error",y=b&&T;return{status:p,fetchStatus:d,isPending:b,isSuccess:p==="success",isError:C,isInitialLoading:y,isLoading:y,data:_,dataUpdatedAt:l.dataUpdatedAt,error:u,errorUpdatedAt:h,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>c.dataUpdateCount||l.errorUpdateCount>c.errorUpdateCount,isFetching:T,isRefetching:T&&!b,isLoadingError:C&&l.dataUpdatedAt===0,isPaused:d==="paused",isPlaceholderData:m,isRefetchError:C&&l.dataUpdatedAt!==0,isStale:Gd(e,n),refetch:this.refetch}}updateResult(e){const n=R(this,hn),o=this.createResult(R(this,_t),this.options);if(de(this,qi,R(this,_t).state),de(this,Qs,this.options),R(this,qi).data!==void 0&&de(this,Xs,R(this,_t)),zl(o,n))return;de(this,hn,o);const r={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!R(this,ji).size)return!0;const c=new Set(a??R(this,ji));return this.options.throwOnError&&c.add("error"),Object.keys(R(this,hn)).some(l=>{const u=l;return R(this,hn)[u]!==n[u]&&c.has(u)})};(e==null?void 0:e.listeners)!==!1&&i()&&(r.listeners=!0),Ke(this,uu,Mw).call(this,{...r,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ke(this,vc,Zp).call(this)}},Nn=new WeakMap,_t=new WeakMap,Ys=new WeakMap,hn=new WeakMap,qi=new WeakMap,Qs=new WeakMap,Ko=new WeakMap,pc=new WeakMap,Js=new WeakMap,Xs=new WeakMap,Bi=new WeakMap,Ki=new WeakMap,ei=new WeakMap,ji=new WeakMap,$i=new WeakSet,Tc=function(e){Ke(this,bc,nf).call(this);let n=R(this,_t).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Yn)),n},fc=new WeakSet,Qp=function(){if(Ke(this,yc,ef).call(this),Ri||R(this,hn).isStale||!Bd(this.options.staleTime))return;const e=y_(R(this,hn).dataUpdatedAt,this.options.staleTime)+1;de(this,Bi,setTimeout(()=>{R(this,hn).isStale||this.updateResult()},e))},gc=new WeakSet,Jp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,_t)):this.options.refetchInterval)??!1},mc=new WeakSet,Xp=function(e){Ke(this,_c,tf).call(this),de(this,ei,e),!(Ri||this.options.enabled===!1||!Bd(R(this,ei))||R(this,ei)===0)&&de(this,Ki,setInterval(()=>{(this.options.refetchIntervalInBackground||Wl.isFocused())&&Ke(this,$i,Tc).call(this)},R(this,ei)))},vc=new WeakSet,Zp=function(){Ke(this,fc,Qp).call(this),Ke(this,mc,Xp).call(this,Ke(this,gc,Jp).call(this))},yc=new WeakSet,ef=function(){R(this,Bi)&&(clearTimeout(R(this,Bi)),de(this,Bi,void 0))},_c=new WeakSet,tf=function(){R(this,Ki)&&(clearInterval(R(this,Ki)),de(this,Ki,void 0))},bc=new WeakSet,nf=function(){const e=R(this,Nn).getQueryCache().build(R(this,Nn),this.options);if(e===R(this,_t))return;const n=R(this,_t);de(this,_t,e),de(this,Ys,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},uu=new WeakSet,Mw=function(e){nn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(R(this,hn))}),R(this,Nn).getQueryCache().notify({query:R(this,_t),type:"observerResultsUpdated"})})},Ow);function SR(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function P_(t,e){return SR(t,e)||t.state.dataUpdatedAt>0&&Wd(t,e,e.refetchOnMount)}function Wd(t,e,n){if(e.enabled!==!1){const o=typeof n=="function"?n(t):n;return o==="always"||o!==!1&&Gd(t,e)}return!1}function M_(t,e,n,o){return n.enabled!==!1&&(t!==e||o.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Gd(t,n)}function Gd(t,e){return t.isStaleByTime(e.staleTime)}function kR(t,e){return!zl(t.getCurrentResult(),e)}var AR=(Nw=class extends Es{constructor(e,n){super();Ee(this,Zs);Ee(this,Cc);Ee(this,ti,void 0);Ee(this,yn,void 0);Ee(this,oo,void 0);Ee(this,sr,void 0);de(this,yn,void 0),de(this,ti,e),this.setOptions(n),this.bindMethods(),Ke(this,Zs,vu).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var o;const n=this.options;this.options=R(this,ti).defaultMutationOptions(e),zl(n,this.options)||R(this,ti).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,oo),observer:this}),(o=R(this,oo))==null||o.setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,oo))==null||e.removeObserver(this))}onMutationUpdate(e){Ke(this,Zs,vu).call(this),Ke(this,Cc,of).call(this,e)}getCurrentResult(){return R(this,yn)}reset(){de(this,oo,void 0),Ke(this,Zs,vu).call(this),Ke(this,Cc,of).call(this)}mutate(e,n){var o;return de(this,sr,n),(o=R(this,oo))==null||o.removeObserver(this),de(this,oo,R(this,ti).getMutationCache().build(R(this,ti),this.options)),R(this,oo).addObserver(this),R(this,oo).execute(e)}},ti=new WeakMap,yn=new WeakMap,oo=new WeakMap,sr=new WeakMap,Zs=new WeakSet,vu=function(){var n;const e=((n=R(this,oo))==null?void 0:n.state)??O_();de(this,yn,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Cc=new WeakSet,of=function(e){nn.batch(()=>{var n,o,r,i,s,a,c,l;R(this,sr)&&this.hasListeners()&&((e==null?void 0:e.type)==="success"?((o=(n=R(this,sr)).onSuccess)==null||o.call(n,e.data,R(this,yn).variables,R(this,yn).context),(i=(r=R(this,sr)).onSettled)==null||i.call(r,e.data,null,R(this,yn).variables,R(this,yn).context)):(e==null?void 0:e.type)==="error"&&((a=(s=R(this,sr)).onError)==null||a.call(s,e.error,R(this,yn).variables,R(this,yn).context),(l=(c=R(this,sr)).onSettled)==null||l.call(c,void 0,e.error,R(this,yn).variables,R(this,yn).context))),this.listeners.forEach(u=>{u(R(this,yn))})})},Nw),IR="VUE_QUERY_CLIENT";function L_(t){const e=t?`:${t}`:"";return`${IR}${e}`}function Vd(t,e){Object.keys(t).forEach(n=>{t[n]=e[n]})}function Yd(t,e){if(e){const n=e(t);if(n===void 0&&Mt(t)||n!==void 0)return n}if(Array.isArray(t))return t.map(n=>Yd(n,e));if(typeof t=="object"&&RR(t)){const n=Object.entries(t).map(([o,r])=>[o,Yd(r,e)]);return Object.fromEntries(n)}return t}function et(t){return Yd(t,e=>{if(Mt(e))return et(X(e))})}function RR(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function D_(t,e){return typeof t=="function"?t(...e):!!t}function U_(t=""){if(!gg())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const e=L_(t),n=En(e);if(!n)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return n}var OR=class extends R_{find(t){return super.find(et(t))}findAll(t={}){return super.findAll(et(t))}},NR=class extends N_{find(t){return super.find(et(t))}findAll(t={}){return super.findAll(et(t))}},xR=class extends ER{constructor(t={}){const e={defaultOptions:t.defaultOptions,queryCache:t.queryCache||new OR,mutationCache:t.mutationCache||new NR};super(e),this.isRestoring=ye(!1)}isFetching(t={}){return super.isFetching(et(t))}isMutating(t={}){return super.isMutating(et(t))}getQueryData(t){return super.getQueryData(et(t))}getQueriesData(t){return super.getQueriesData(et(t))}setQueryData(t,e,n={}){return super.setQueryData(et(t),e,et(n))}setQueriesData(t,e,n={}){return super.setQueriesData(et(t),e,et(n))}getQueryState(t){return super.getQueryState(et(t))}removeQueries(t={}){return super.removeQueries(et(t))}resetQueries(t={},e={}){return super.resetQueries(et(t),et(e))}cancelQueries(t={},e={}){return super.cancelQueries(et(t),et(e))}invalidateQueries(t={},e={}){return super.invalidateQueries(et(t),et(e))}refetchQueries(t={},e={}){return super.refetchQueries(et(t),et(e))}fetchQuery(t){return super.fetchQuery(et(t))}prefetchQuery(t){return super.prefetchQuery(et(t))}fetchInfiniteQuery(t){return super.fetchInfiniteQuery(et(t))}prefetchInfiniteQuery(t){return super.prefetchInfiniteQuery(et(t))}setDefaultOptions(t){super.setDefaultOptions(et(t))}setQueryDefaults(t,e){super.setQueryDefaults(et(t),et(e))}getQueryDefaults(t){return super.getQueryDefaults(et(t))}setMutationDefaults(t,e){super.setMutationDefaults(et(t),et(e))}getMutationDefaults(t){return super.getMutationDefaults(et(t))}},PR={install:(t,e={})=>{const n=L_(e.queryClientKey);let o;if("queryClient"in e&&e.queryClient)o=e.queryClient;else{const s="queryClientConfig"in e?e.queryClientConfig:void 0;o=new xR(s)}Ri||o.mount();let r=()=>{};if(e.clientPersister){o.isRestoring.value=!0;const[s,a]=e.clientPersister(o);r=s,a.then(()=>{var c;o.isRestoring.value=!1,(c=e.clientPersisterOnSuccess)==null||c.call(e,o)})}const i=()=>{o.unmount(),r()};if(t.onUnmount)t.onUnmount(i);else{const s=t.unmount;t.unmount=function(){i(),s()}}t.provide(n,o)}};function MR(t,e,n){const o=n||U_(),r=Re(()=>{const d=et(e);typeof d.enabled=="function"&&(d.enabled=d.enabled());const p=o.defaultQueryOptions(d);return p._optimisticResults=o.isRestoring.value?"isRestoring":"optimistic",p}),i=new t(o,r.value),s=fr(i.getCurrentResult());let a=()=>{};Pt(o.isRestoring,d=>{d||(a(),a=i.subscribe(p=>{Vd(s,p)}))},{immediate:!0});const c=()=>{i.setOptions(r.value),Vd(s,i.getCurrentResult())};Pt(r,c),Su(()=>{a()});const l=(...d)=>(c(),s.refetch(...d)),u=()=>new Promise((d,p)=>{let m=()=>{};const _=()=>{if(r.value.enabled!==!1){i.setOptions(r.value);const T=i.getOptimisticResult(r.value);T.isStale?(m(),i.fetchOptimistic(r.value).then(d,p)):(m(),d(T))}};_(),m=Pt(r,_)});Pt(()=>s.error,d=>{if(s.isError&&!s.isFetching&&D_(r.value.throwOnError,[d,i.getCurrentQuery()]))throw d});const h=Fu(sa(s));for(const d in s)typeof s[d]=="function"&&(h[d]=s[d]);return h.suspense=u,h.refetch=l,h}function mo(t,e){return MR(TR,t,e)}function Lr(t,e){const n=e||U_(),o=Re(()=>n.defaultMutationOptions(et(t))),r=new AR(n,o.value),i=fr(r.getCurrentResult()),s=r.subscribe(l=>{Vd(i,l)}),a=(l,u)=>{r.mutate(l,u).catch(()=>{})};Pt(o,()=>{r.setOptions(o.value)}),Su(()=>{s()});const c=Fu(sa(i));return Pt(()=>i.error,l=>{if(l&&D_(o.value.throwOnError,[l]))throw l}),{...c,mutate:a,mutateAsync:i.mutate,reset:i.reset}}const Ts=typeof window<"u";function LR(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const pt=Object.assign;function Qd(t,e){const n={};for(const o in e){const r=e[o];n[o]=vo(r)?r.map(t):t(r)}return n}const $a=()=>{},vo=Array.isArray,DR=/\/$/,UR=t=>t.replace(DR,"");function Jd(t,e,n="/"){let o,r={},i="",s="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(o=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=t(i)),a>-1&&(o=o||e.slice(0,a),s=e.slice(a,e.length)),o=BR(o??e,n),{fullPath:o+(i&&"?")+i+s,path:o,query:r,hash:s}}function FR(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function F_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function HR(t,e,n){const o=e.matched.length-1,r=n.matched.length-1;return o>-1&&o===r&&Ss(e.matched[o],n.matched[r])&&H_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ss(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function H_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!qR(t[n],e[n]))return!1;return!0}function qR(t,e){return vo(t)?q_(t,e):vo(e)?q_(e,t):t===e}function q_(t,e){return vo(e)?t.length===e.length&&t.every((n,o)=>n===e[o]):t.length===1&&t[0]===e}function BR(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),o=t.split("/"),r=o[o.length-1];(r===".."||r===".")&&o.push("");let i=n.length-1,s,a;for(s=0;s<o.length;s++)if(a=o[s],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+o.slice(s-(s===o.length?1:0)).join("/")}var za;(function(t){t.pop="pop",t.push="push"})(za||(za={}));var Wa;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Wa||(Wa={}));function KR(t){if(!t)if(Ts){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),UR(t)}const jR=/^[^#]+#/;function $R(t,e){return t.replace(jR,"#")+e}function zR(t,e){const n=document.documentElement.getBoundingClientRect(),o=t.getBoundingClientRect();return{behavior:e.behavior,left:o.left-n.left-(e.left||0),top:o.top-n.top-(e.top||0)}}const Yl=()=>({left:window.pageXOffset,top:window.pageYOffset});function WR(t){let e;if("el"in t){const n=t.el,o=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=zR(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function B_(t,e){return(history.state?history.state.position-e:-1)+t}const Xd=new Map;function GR(t,e){Xd.set(t,e)}function VR(t){const e=Xd.get(t);return Xd.delete(t),e}let YR=()=>location.protocol+"//"+location.host;function K_(t,e){const{pathname:n,search:o,hash:r}=e,i=t.indexOf("#");if(i>-1){let s=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(s);return a[0]!=="/"&&(a="/"+a),F_(a,"")}return F_(n,t)+o+r}function QR(t,e,n,o){let r=[],i=[],s=null;const a=({state:d})=>{const p=K_(t,location),m=n.value,_=e.value;let T=0;if(d){if(n.value=p,e.value=d,s&&s===m){s=null;return}T=_?d.position-_.position:0}else o(p);r.forEach(b=>{b(n.value,m,{delta:T,type:za.pop,direction:T?T>0?Wa.forward:Wa.back:Wa.unknown})})};function c(){s=n.value}function l(d){r.push(d);const p=()=>{const m=r.indexOf(d);m>-1&&r.splice(m,1)};return i.push(p),p}function u(){const{history:d}=window;d.state&&d.replaceState(pt({},d.state,{scroll:Yl()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function j_(t,e,n,o=!1,r=!1){return{back:t,current:e,forward:n,replaced:o,position:window.history.length,scroll:r?Yl():null}}function JR(t){const{history:e,location:n}=window,o={value:K_(t,n)},r={value:e.state};r.value||i(o.value,{back:null,current:o.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:YR()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),r.value=l}catch(p){console.error(p),n[u?"replace":"assign"](d)}}function s(c,l){const u=pt({},e.state,j_(r.value.back,c,r.value.forward,!0),l,{position:r.value.position});i(c,u,!0),o.value=c}function a(c,l){const u=pt({},r.value,e.state,{forward:c,scroll:Yl()});i(u.current,u,!0);const h=pt({},j_(o.value,c,null),{position:u.position+1},l);i(c,h,!1),o.value=c}return{location:o,state:r,push:a,replace:s}}function XR(t){t=KR(t);const e=JR(t),n=QR(t,e.state,e.location,e.replace);function o(i,s=!0){s||n.pauseListeners(),history.go(i)}const r=pt({location:"",base:t,go:o,createHref:$R.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function ZR(t){return typeof t=="string"||t&&typeof t=="object"}function $_(t){return typeof t=="string"||typeof t=="symbol"}const Dr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},z_=Symbol("");var W_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(W_||(W_={}));function ks(t,e){return pt(new Error,{type:t,[z_]:!0},e)}function or(t,e){return t instanceof Error&&z_ in t&&(e==null||!!(t.type&e))}const G_="[^/]+?",e1={sensitive:!1,strict:!1,start:!0,end:!0},t1=/[.+*?^${}()[\]/\\]/g;function n1(t,e){const n=pt({},e1,e),o=[];let r=n.start?"^":"";const i=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let h=0;h<l.length;h++){const d=l[h];let p=40+(n.sensitive?.25:0);if(d.type===0)h||(r+="/"),r+=d.value.replace(t1,"\\$&"),p+=40;else if(d.type===1){const{value:m,repeatable:_,optional:T,regexp:b}=d;i.push({name:m,repeatable:_,optional:T});const C=b||G_;if(C!==G_){p+=10;try{new RegExp(`(${C})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${m}" (${C}): `+v.message)}}let y=_?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;h||(y=T&&l.length<2?`(?:/${y})`:"/"+y),T&&(y+="?"),r+=y,p+=20,T&&(p+=-8),_&&(p+=-20),C===".*"&&(p+=-50)}u.push(p)}o.push(u)}if(n.strict&&n.end){const l=o.length-1;o[l][o[l].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const s=new RegExp(r,n.sensitive?"":"i");function a(l){const u=l.match(s),h={};if(!u)return null;for(let d=1;d<u.length;d++){const p=u[d]||"",m=i[d-1];h[m.name]=p&&m.repeatable?p.split("/"):p}return h}function c(l){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of d)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:_,optional:T}=p,b=m in l?l[m]:"";if(vo(b)&&!_)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const C=vo(b)?b.join("/"):b;if(!C)if(T)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);u+=C}}return u||"/"}return{re:s,score:o,keys:i,parse:a,stringify:c}}function o1(t,e){let n=0;for(;n<t.length&&n<e.length;){const o=e[n]-t[n];if(o)return o;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function r1(t,e){let n=0;const o=t.score,r=e.score;for(;n<o.length&&n<r.length;){const i=o1(o[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-o.length)===1){if(V_(o))return 1;if(V_(r))return-1}return r.length-o.length}function V_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const i1={type:0,value:""},s1=/[a-zA-Z0-9_]/;function a1(t){if(!t)return[[]];if(t==="/")return[[i1]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${n})/"${l}": ${p}`)}let n=0,o=n;const r=[];let i;function s(){i&&r.push(i),i=[]}let a=0,c,l="",u="";function h(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),s()):c===":"?(h(),n=1):d();break;case 4:d(),n=o;break;case 1:c==="("?n=2:s1.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),s(),r}function c1(t,e,n){const o=n1(a1(t.path),n),r=pt(o,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function l1(t,e){const n=[],o=new Map;e=J_({strict:!1,end:!0,sensitive:!1},e);function r(u){return o.get(u)}function i(u,h,d){const p=!d,m=u1(u);m.aliasOf=d&&d.record;const _=J_(e,u),T=[m];if("alias"in u){const y=typeof u.alias=="string"?[u.alias]:u.alias;for(const v of y)T.push(pt({},m,{components:d?d.record.components:m.components,path:v,aliasOf:d?d.record:m}))}let b,C;for(const y of T){const{path:v}=y;if(h&&v[0]!=="/"){const w=h.record.path,A=w[w.length-1]==="/"?"":"/";y.path=h.record.path+(v&&A+v)}if(b=c1(y,h,_),d?d.alias.push(b):(C=C||b,C!==b&&C.alias.push(b),p&&u.name&&!Q_(b)&&s(u.name)),m.children){const w=m.children;for(let A=0;A<w.length;A++)i(w[A],b,d&&d.children[A])}d=d||b,(b.record.components&&Object.keys(b.record.components).length||b.record.name||b.record.redirect)&&c(b)}return C?()=>{s(C)}:$a}function s(u){if($_(u)){const h=o.get(u);h&&(o.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(s),h.alias.forEach(s))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&o.delete(u.record.name),u.children.forEach(s),u.alias.forEach(s))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&r1(u,n[h])>=0&&(u.record.path!==n[h].record.path||!X_(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Q_(u)&&o.set(u.record.name,u)}function l(u,h){let d,p={},m,_;if("name"in u&&u.name){if(d=o.get(u.name),!d)throw ks(1,{location:u});_=d.record.name,p=pt(Y_(h.params,d.keys.filter(C=>!C.optional).map(C=>C.name)),u.params&&Y_(u.params,d.keys.map(C=>C.name))),m=d.stringify(p)}else if("path"in u)m=u.path,d=n.find(C=>C.re.test(m)),d&&(p=d.parse(m),_=d.record.name);else{if(d=h.name?o.get(h.name):n.find(C=>C.re.test(h.path)),!d)throw ks(1,{location:u,currentLocation:h});_=d.record.name,p=pt({},h.params,u.params),m=d.stringify(p)}const T=[];let b=d;for(;b;)T.unshift(b.record),b=b.parent;return{name:_,path:m,params:p,matched:T,meta:d1(T)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:s,getRoutes:a,getRecordMatcher:r}}function Y_(t,e){const n={};for(const o of e)o in t&&(n[o]=t[o]);return n}function u1(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:h1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function h1(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const o in t.components)e[o]=typeof n=="object"?n[o]:n;return e}function Q_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function d1(t){return t.reduce((e,n)=>pt(e,n.meta),{})}function J_(t,e){const n={};for(const o in t)n[o]=o in e?e[o]:t[o];return n}function X_(t,e){return e.children.some(n=>n===t||X_(t,n))}const Z_=/#/g,p1=/&/g,f1=/\//g,g1=/=/g,m1=/\?/g,eb=/\+/g,v1=/%5B/g,y1=/%5D/g,tb=/%5E/g,_1=/%60/g,nb=/%7B/g,b1=/%7C/g,ob=/%7D/g,C1=/%20/g;function Zd(t){return encodeURI(""+t).replace(b1,"|").replace(v1,"[").replace(y1,"]")}function w1(t){return Zd(t).replace(nb,"{").replace(ob,"}").replace(tb,"^")}function ep(t){return Zd(t).replace(eb,"%2B").replace(C1,"+").replace(Z_,"%23").replace(p1,"%26").replace(_1,"`").replace(nb,"{").replace(ob,"}").replace(tb,"^")}function E1(t){return ep(t).replace(g1,"%3D")}function T1(t){return Zd(t).replace(Z_,"%23").replace(m1,"%3F")}function S1(t){return t==null?"":T1(t).replace(f1,"%2F")}function Ql(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function k1(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<n.length;++o){const r=n[o].replace(eb," "),i=r.indexOf("="),s=Ql(i<0?r:r.slice(0,i)),a=i<0?null:Ql(r.slice(i+1));if(s in e){let c=e[s];vo(c)||(c=e[s]=[c]),c.push(a)}else e[s]=a}return e}function rb(t){let e="";for(let n in t){const o=t[n];if(n=E1(n),o==null){o!==void 0&&(e+=(e.length?"&":"")+n);continue}(vo(o)?o.map(r=>r&&ep(r)):[o&&ep(o)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function A1(t){const e={};for(const n in t){const o=t[n];o!==void 0&&(e[n]=vo(o)?o.map(r=>r==null?null:""+r):o==null?o:""+o)}return e}const I1=Symbol(""),ib=Symbol(""),Jl=Symbol(""),tp=Symbol(""),np=Symbol("");function Ga(){let t=[];function e(o){return t.push(o),()=>{const r=t.indexOf(o);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ur(t,e,n,o,r){const i=o&&(o.enterCallbacks[r]=o.enterCallbacks[r]||[]);return()=>new Promise((s,a)=>{const c=h=>{h===!1?a(ks(4,{from:n,to:e})):h instanceof Error?a(h):ZR(h)?a(ks(2,{from:e,to:h})):(i&&o.enterCallbacks[r]===i&&typeof h=="function"&&i.push(h),s())},l=t.call(o&&o.instances[r],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function op(t,e,n,o){const r=[];for(const i of t)for(const s in i.components){let a=i.components[s];if(!(e!=="beforeRouteEnter"&&!i.instances[s]))if(R1(a)){const c=(a.__vccOpts||a)[e];c&&r.push(Ur(c,n,o,i,s))}else{let c=a();r.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${i.path}"`));const u=LR(l)?l.default:l;i.components[s]=u;const h=(u.__vccOpts||u)[e];return h&&Ur(h,n,o,i,s)()}))}}return r}function R1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function sb(t){const e=En(Jl),n=En(tp),o=Re(()=>e.resolve(X(t.to))),r=Re(()=>{const{matched:c}=o.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Ss.bind(null,u));if(d>-1)return d;const p=ab(c[l-2]);return l>1&&ab(u)===p&&h[h.length-1].path!==p?h.findIndex(Ss.bind(null,c[l-2])):d}),i=Re(()=>r.value>-1&&P1(n.params,o.value.params)),s=Re(()=>r.value>-1&&r.value===n.matched.length-1&&H_(n.params,o.value.params));function a(c={}){return x1(c)?e[X(t.replace)?"replace":"push"](X(t.to)).catch($a):Promise.resolve()}return{route:o,href:Re(()=>o.value.href),isActive:i,isExactActive:s,navigate:a}}const O1=vt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:sb,setup(t,{slots:e}){const n=fr(sb(t)),{options:o}=En(Jl),r=Re(()=>({[cb(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[cb(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:is("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),N1=O1;function x1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function P1(t,e){for(const n in e){const o=e[n],r=t[n];if(typeof o=="string"){if(o!==r)return!1}else if(!vo(r)||r.length!==o.length||o.some((i,s)=>i!==r[s]))return!1}return!0}function ab(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const cb=(t,e,n)=>t??e??n,M1=vt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const o=En(np),r=Re(()=>t.route||o.value),i=En(ib,0),s=Re(()=>{let l=X(i);const{matched:u}=r.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=Re(()=>r.value.matched[s.value]);Ca(ib,Re(()=>s.value+1)),Ca(I1,a),Ca(np,r);const c=ye();return Pt(()=>[c.value,a.value,t.name],([l,u,h],[d,p,m])=>{u&&(u.instances[h]=l,p&&p!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),l&&u&&(!p||!Ss(u,p)||!d)&&(u.enterCallbacks[h]||[]).forEach(_=>_(l))},{flush:"post"}),()=>{const l=r.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return lb(n.default,{Component:d,route:l});const p=h.props[u],m=p?p===!0?l.params:typeof p=="function"?p(l):p:null,_=is(d,pt({},m,e,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return lb(n.default,{Component:_,route:l})||_}}});function lb(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const L1=M1;function D1(t){const e=l1(t.routes,t),n=t.parseQuery||k1,o=t.stringifyQuery||rb,r=t.history,i=Ga(),s=Ga(),a=Ga(),c=Du(Dr);let l=Dr;Ts&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Qd.bind(null,$=>""+$),h=Qd.bind(null,S1),d=Qd.bind(null,Ql);function p($,le){let se,_e;return $_($)?(se=e.getRecordMatcher($),_e=le):_e=$,e.addRoute(_e,se)}function m($){const le=e.getRecordMatcher($);le&&e.removeRoute(le)}function _(){return e.getRoutes().map($=>$.record)}function T($){return!!e.getRecordMatcher($)}function b($,le){if(le=pt({},le||c.value),typeof $=="string"){const g=Jd(n,$,le.path),k=e.resolve({path:g.path},le),U=r.createHref(g.fullPath);return pt(g,k,{params:d(k.params),hash:Ql(g.hash),redirectedFrom:void 0,href:U})}let se;if("path"in $)se=pt({},$,{path:Jd(n,$.path,le.path).path});else{const g=pt({},$.params);for(const k in g)g[k]==null&&delete g[k];se=pt({},$,{params:h(g)}),le.params=h(le.params)}const _e=e.resolve(se,le),We=$.hash||"";_e.params=u(d(_e.params));const I=FR(o,pt({},$,{hash:w1(We),path:_e.path})),f=r.createHref(I);return pt({fullPath:I,hash:We,query:o===rb?A1($.query):$.query||{}},_e,{redirectedFrom:void 0,href:f})}function C($){return typeof $=="string"?Jd(n,$,c.value.path):pt({},$)}function y($,le){if(l!==$)return ks(8,{from:le,to:$})}function v($){return S($)}function w($){return v(pt(C($),{replace:!0}))}function A($){const le=$.matched[$.matched.length-1];if(le&&le.redirect){const{redirect:se}=le;let _e=typeof se=="function"?se($):se;return typeof _e=="string"&&(_e=_e.includes("?")||_e.includes("#")?_e=C(_e):{path:_e},_e.params={}),pt({query:$.query,hash:$.hash,params:"path"in _e?{}:$.params},_e)}}function S($,le){const se=l=b($),_e=c.value,We=$.state,I=$.force,f=$.replace===!0,g=A(se);if(g)return S(pt(C(g),{state:typeof g=="object"?pt({},We,g.state):We,force:I,replace:f}),le||se);const k=se;k.redirectedFrom=le;let U;return!I&&HR(o,_e,se)&&(U=ks(16,{to:k,from:_e}),Be(_e,_e,!0,!1)),(U?Promise.resolve(U):L(k,_e)).catch(H=>or(H)?or(H,2)?H:ke(H):he(H,k,_e)).then(H=>{if(H){if(or(H,2))return S(pt({replace:f},C(H.to),{state:typeof H.to=="object"?pt({},We,H.to.state):We,force:I}),le||k)}else H=x(k,_e,!0,f,We);return z(k,_e,H),H})}function E($,le){const se=y($,le);return se?Promise.reject(se):Promise.resolve()}function O($){const le=He.values().next().value;return le&&typeof le.runWithContext=="function"?le.runWithContext($):$()}function L($,le){let se;const[_e,We,I]=U1($,le);se=op(_e.reverse(),"beforeRouteLeave",$,le);for(const g of _e)g.leaveGuards.forEach(k=>{se.push(Ur(k,$,le))});const f=E.bind(null,$,le);return se.push(f),ct(se).then(()=>{se=[];for(const g of i.list())se.push(Ur(g,$,le));return se.push(f),ct(se)}).then(()=>{se=op(We,"beforeRouteUpdate",$,le);for(const g of We)g.updateGuards.forEach(k=>{se.push(Ur(k,$,le))});return se.push(f),ct(se)}).then(()=>{se=[];for(const g of I)if(g.beforeEnter)if(vo(g.beforeEnter))for(const k of g.beforeEnter)se.push(Ur(k,$,le));else se.push(Ur(g.beforeEnter,$,le));return se.push(f),ct(se)}).then(()=>($.matched.forEach(g=>g.enterCallbacks={}),se=op(I,"beforeRouteEnter",$,le),se.push(f),ct(se))).then(()=>{se=[];for(const g of s.list())se.push(Ur(g,$,le));return se.push(f),ct(se)}).catch(g=>or(g,8)?g:Promise.reject(g))}function z($,le,se){a.list().forEach(_e=>O(()=>_e($,le,se)))}function x($,le,se,_e,We){const I=y($,le);if(I)return I;const f=le===Dr,g=Ts?history.state:{};se&&(_e||f?r.replace($.fullPath,pt({scroll:f&&g&&g.scroll},We)):r.push($.fullPath,We)),c.value=$,Be($,le,se,f),ke()}let j;function ae(){j||(j=r.listen(($,le,se)=>{if(!it.listening)return;const _e=b($),We=A(_e);if(We){S(pt(We,{replace:!0}),_e).catch($a);return}l=_e;const I=c.value;Ts&&GR(B_(I.fullPath,se.delta),Yl()),L(_e,I).catch(f=>or(f,12)?f:or(f,2)?(S(f.to,_e).then(g=>{or(g,20)&&!se.delta&&se.type===za.pop&&r.go(-1,!1)}).catch($a),Promise.reject()):(se.delta&&r.go(-se.delta,!1),he(f,_e,I))).then(f=>{f=f||x(_e,I,!1),f&&(se.delta&&!or(f,8)?r.go(-se.delta,!1):se.type===za.pop&&or(f,20)&&r.go(-1,!1)),z(_e,I,f)}).catch($a)}))}let ie=Ga(),G=Ga(),fe;function he($,le,se){ke($);const _e=G.list();return _e.length?_e.forEach(We=>We($,le,se)):console.error($),Promise.reject($)}function Ye(){return fe&&c.value!==Dr?Promise.resolve():new Promise(($,le)=>{ie.add([$,le])})}function ke($){return fe||(fe=!$,ae(),ie.list().forEach(([le,se])=>$?se($):le()),ie.reset()),$}function Be($,le,se,_e){const{scrollBehavior:We}=t;if(!Ts||!We)return Promise.resolve();const I=!se&&VR(B_($.fullPath,0))||(_e||!se)&&history.state&&history.state.scroll||null;return ui().then(()=>We($,le,I)).then(f=>f&&WR(f)).catch(f=>he(f,$,le))}const nt=$=>r.go($);let Pe;const He=new Set,it={currentRoute:c,listening:!0,addRoute:p,removeRoute:m,hasRoute:T,getRoutes:_,resolve:b,options:t,push:v,replace:w,go:nt,back:()=>nt(-1),forward:()=>nt(1),beforeEach:i.add,beforeResolve:s.add,afterEach:a.add,onError:G.add,isReady:Ye,install($){const le=this;$.component("RouterLink",N1),$.component("RouterView",L1),$.config.globalProperties.$router=le,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>X(c)}),Ts&&!Pe&&c.value===Dr&&(Pe=!0,v(r.location).catch(We=>{}));const se={};for(const We in Dr)Object.defineProperty(se,We,{get:()=>c.value[We],enumerable:!0});$.provide(Jl,le),$.provide(tp,Nu(se)),$.provide(np,c);const _e=$.unmount;He.add($),$.unmount=function(){He.delete($),He.size<1&&(l=Dr,j&&j(),j=null,c.value=Dr,Pe=!1,fe=!1),_e()}}};function ct($){return $.reduce((le,se)=>le.then(()=>O(se)),Promise.resolve())}return it}function U1(t,e){const n=[],o=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let s=0;s<i;s++){const a=e.matched[s];a&&(t.matched.find(l=>Ss(l,a))?o.push(a):n.push(a));const c=t.matched[s];c&&(e.matched.find(l=>Ss(l,c))||r.push(c))}return[n,o,r]}function Va(){return En(Jl)}function Xl(){return En(tp)}const rp=typeof window<"u",Fr=(t,e=!1)=>e?Symbol.for(t):Symbol(t),F1=(t,e,n)=>H1({l:t,k:e,s:n}),H1=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),zt=t=>typeof t=="number"&&isFinite(t),q1=t=>pb(t)==="[object Date]",Hr=t=>pb(t)==="[object RegExp]",Zl=t=>Fe(t)&&Object.keys(t).length===0,on=Object.assign;let ub;const rr=()=>ub||(ub=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hb(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const B1=Object.prototype.hasOwnProperty;function Ya(t,e){return B1.call(t,e)}const Tt=Array.isArray,yt=t=>typeof t=="function",ge=t=>typeof t=="string",Qe=t=>typeof t=="boolean",ut=t=>t!==null&&typeof t=="object",K1=t=>ut(t)&&yt(t.then)&&yt(t.catch),db=Object.prototype.toString,pb=t=>db.call(t),Fe=t=>{if(!ut(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},j1=t=>t==null?"":Tt(t)||Fe(t)&&t.toString===db?JSON.stringify(t,null,2):String(t);function $1(t,e=""){return t.reduce((n,o,r)=>r===0?n+o:n+e+o,"")}function ip(t){let e=t;return()=>++e}function z1(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const eu=t=>!ut(t)||Tt(t);function Qa(t,e){if(eu(t)||eu(e))throw new Error("Invalid value");for(const n in t)Ya(t,n)&&(eu(t[n])||eu(e[n])?e[n]=t[n]:Qa(t[n],e[n]))}function W1(t,e,n){return{line:t,column:e,offset:n}}function sp(t,e,n){const o={start:t,end:e};return n!=null&&(o.source=n),o}const G1=/\{([0-9a-zA-Z]+)\}/g;function V1(t,...e){return e.length===1&&Y1(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(G1,(n,o)=>e.hasOwnProperty(o)?e[o]:"")}const fb=Object.assign,gb=t=>typeof t=="string",Y1=t=>t!==null&&typeof t=="object";function mb(t,e=""){return t.reduce((n,o,r)=>r===0?n+o:n+e+o,"")}const xe={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},Q1={[xe.EXPECTED_TOKEN]:"Expected token: '{0}'",[xe.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[xe.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[xe.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[xe.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[xe.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[xe.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[xe.EMPTY_PLACEHOLDER]:"Empty placeholder",[xe.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[xe.INVALID_LINKED_FORMAT]:"Invalid linked format",[xe.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[xe.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[xe.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[xe.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[xe.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[xe.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function As(t,e,n={}){const{domain:o,messages:r,args:i}=n,s=V1((r||Q1)[t]||"",...i||[]),a=new SyntaxError(String(s));return a.code=t,e&&(a.location=e),a.domain=o,a}function J1(t){throw t}const ir=" ",X1="\r",mn=`
`,Z1="\u2028",eO="\u2029";function tO(t){const e=t;let n=0,o=1,r=1,i=0;const s=S=>e[S]===X1&&e[S+1]===mn,a=S=>e[S]===mn,c=S=>e[S]===eO,l=S=>e[S]===Z1,u=S=>s(S)||a(S)||c(S)||l(S),h=()=>n,d=()=>o,p=()=>r,m=()=>i,_=S=>s(S)||c(S)||l(S)?mn:e[S],T=()=>_(n),b=()=>_(n+i);function C(){return i=0,u(n)&&(o++,r=0),s(n)&&n++,n++,r++,e[n]}function y(){return s(n+i)&&i++,i++,e[n+i]}function v(){n=0,o=1,r=1,i=0}function w(S=0){i=S}function A(){const S=n+i;for(;S!==n;)C();i=0}return{index:h,line:d,column:p,peekOffset:m,charAt:_,currentChar:T,currentPeek:b,next:C,peek:y,reset:v,resetPeek:w,skipToPeek:A}}const qr=void 0,nO=".",vb="'",oO="tokenizer";function rO(t,e={}){const n=e.location!==!1,o=tO(t),r=()=>o.index(),i=()=>W1(o.line(),o.column(),o.index()),s=i(),a=r(),c={currentType:14,offset:a,startLoc:s,endLoc:s,lastType:14,lastOffset:a,lastStartLoc:s,lastEndLoc:s,braceNest:0,inLinked:!1,text:""},l=()=>c,{onError:u}=e;function h(f,g,k,...U){const H=l();if(g.column+=k,g.offset+=k,u){const Y=n?sp(H.startLoc,g):null,ne=As(f,Y,{domain:oO,args:U});u(ne)}}function d(f,g,k){f.endLoc=i(),f.currentType=g;const U={type:g};return n&&(U.loc=sp(f.startLoc,f.endLoc)),k!=null&&(U.value=k),U}const p=f=>d(f,14);function m(f,g){return f.currentChar()===g?(f.next(),g):(h(xe.EXPECTED_TOKEN,i(),0,g),"")}function _(f){let g="";for(;f.currentPeek()===ir||f.currentPeek()===mn;)g+=f.currentPeek(),f.peek();return g}function T(f){const g=_(f);return f.skipToPeek(),g}function b(f){if(f===qr)return!1;const g=f.charCodeAt(0);return g>=97&&g<=122||g>=65&&g<=90||g===95}function C(f){if(f===qr)return!1;const g=f.charCodeAt(0);return g>=48&&g<=57}function y(f,g){const{currentType:k}=g;if(k!==2)return!1;_(f);const U=b(f.currentPeek());return f.resetPeek(),U}function v(f,g){const{currentType:k}=g;if(k!==2)return!1;_(f);const U=f.currentPeek()==="-"?f.peek():f.currentPeek(),H=C(U);return f.resetPeek(),H}function w(f,g){const{currentType:k}=g;if(k!==2)return!1;_(f);const U=f.currentPeek()===vb;return f.resetPeek(),U}function A(f,g){const{currentType:k}=g;if(k!==8)return!1;_(f);const U=f.currentPeek()===".";return f.resetPeek(),U}function S(f,g){const{currentType:k}=g;if(k!==9)return!1;_(f);const U=b(f.currentPeek());return f.resetPeek(),U}function E(f,g){const{currentType:k}=g;if(!(k===8||k===12))return!1;_(f);const U=f.currentPeek()===":";return f.resetPeek(),U}function O(f,g){const{currentType:k}=g;if(k!==10)return!1;const U=()=>{const Y=f.currentPeek();return Y==="{"?b(f.peek()):Y==="@"||Y==="%"||Y==="|"||Y===":"||Y==="."||Y===ir||!Y?!1:Y===mn?(f.peek(),U()):b(Y)},H=U();return f.resetPeek(),H}function L(f){_(f);const g=f.currentPeek()==="|";return f.resetPeek(),g}function z(f){const g=_(f),k=f.currentPeek()==="%"&&f.peek()==="{";return f.resetPeek(),{isModulo:k,hasSpace:g.length>0}}function x(f,g=!0){const k=(H=!1,Y="",ne=!1)=>{const re=f.currentPeek();return re==="{"?Y==="%"?!1:H:re==="@"||!re?Y==="%"?!0:H:re==="%"?(f.peek(),k(H,"%",!0)):re==="|"?Y==="%"||ne?!0:!(Y===ir||Y===mn):re===ir?(f.peek(),k(!0,ir,ne)):re===mn?(f.peek(),k(!0,mn,ne)):!0},U=k();return g&&f.resetPeek(),U}function j(f,g){const k=f.currentChar();return k===qr?qr:g(k)?(f.next(),k):null}function ae(f){return j(f,g=>{const k=g.charCodeAt(0);return k>=97&&k<=122||k>=65&&k<=90||k>=48&&k<=57||k===95||k===36})}function ie(f){return j(f,g=>{const k=g.charCodeAt(0);return k>=48&&k<=57})}function G(f){return j(f,g=>{const k=g.charCodeAt(0);return k>=48&&k<=57||k>=65&&k<=70||k>=97&&k<=102})}function fe(f){let g="",k="";for(;g=ie(f);)k+=g;return k}function he(f){T(f);const g=f.currentChar();return g!=="%"&&h(xe.EXPECTED_TOKEN,i(),0,g),f.next(),"%"}function Ye(f){let g="";for(;;){const k=f.currentChar();if(k==="{"||k==="}"||k==="@"||k==="|"||!k)break;if(k==="%")if(x(f))g+=k,f.next();else break;else if(k===ir||k===mn)if(x(f))g+=k,f.next();else{if(L(f))break;g+=k,f.next()}else g+=k,f.next()}return g}function ke(f){T(f);let g="",k="";for(;g=ae(f);)k+=g;return f.currentChar()===qr&&h(xe.UNTERMINATED_CLOSING_BRACE,i(),0),k}function Be(f){T(f);let g="";return f.currentChar()==="-"?(f.next(),g+=`-${fe(f)}`):g+=fe(f),f.currentChar()===qr&&h(xe.UNTERMINATED_CLOSING_BRACE,i(),0),g}function nt(f){T(f),m(f,"'");let g="",k="";const U=Y=>Y!==vb&&Y!==mn;for(;g=j(f,U);)g==="\\"?k+=Pe(f):k+=g;const H=f.currentChar();return H===mn||H===qr?(h(xe.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),H===mn&&(f.next(),m(f,"'")),k):(m(f,"'"),k)}function Pe(f){const g=f.currentChar();switch(g){case"\\":case"'":return f.next(),`\\${g}`;case"u":return He(f,g,4);case"U":return He(f,g,6);default:return h(xe.UNKNOWN_ESCAPE_SEQUENCE,i(),0,g),""}}function He(f,g,k){m(f,g);let U="";for(let H=0;H<k;H++){const Y=G(f);if(!Y){h(xe.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${g}${U}${f.currentChar()}`);break}U+=Y}return`\\${g}${U}`}function it(f){T(f);let g="",k="";const U=H=>H!=="{"&&H!=="}"&&H!==ir&&H!==mn;for(;g=j(f,U);)k+=g;return k}function ct(f){let g="",k="";for(;g=ae(f);)k+=g;return k}function $(f){const g=(k=!1,U)=>{const H=f.currentChar();return H==="{"||H==="%"||H==="@"||H==="|"||H==="("||H===")"||!H||H===ir?U:H===mn||H===nO?(U+=H,f.next(),g(k,U)):(U+=H,f.next(),g(!0,U))};return g(!1,"")}function le(f){T(f);const g=m(f,"|");return T(f),g}function se(f,g){let k=null;switch(f.currentChar()){case"{":return g.braceNest>=1&&h(xe.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),f.next(),k=d(g,2,"{"),T(f),g.braceNest++,k;case"}":return g.braceNest>0&&g.currentType===2&&h(xe.EMPTY_PLACEHOLDER,i(),0),f.next(),k=d(g,3,"}"),g.braceNest--,g.braceNest>0&&T(f),g.inLinked&&g.braceNest===0&&(g.inLinked=!1),k;case"@":return g.braceNest>0&&h(xe.UNTERMINATED_CLOSING_BRACE,i(),0),k=_e(f,g)||p(g),g.braceNest=0,k;default:let U=!0,H=!0,Y=!0;if(L(f))return g.braceNest>0&&h(xe.UNTERMINATED_CLOSING_BRACE,i(),0),k=d(g,1,le(f)),g.braceNest=0,g.inLinked=!1,k;if(g.braceNest>0&&(g.currentType===5||g.currentType===6||g.currentType===7))return h(xe.UNTERMINATED_CLOSING_BRACE,i(),0),g.braceNest=0,We(f,g);if(U=y(f,g))return k=d(g,5,ke(f)),T(f),k;if(H=v(f,g))return k=d(g,6,Be(f)),T(f),k;if(Y=w(f,g))return k=d(g,7,nt(f)),T(f),k;if(!U&&!H&&!Y)return k=d(g,13,it(f)),h(xe.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,k.value),T(f),k;break}return k}function _e(f,g){const{currentType:k}=g;let U=null;const H=f.currentChar();switch((k===8||k===9||k===12||k===10)&&(H===mn||H===ir)&&h(xe.INVALID_LINKED_FORMAT,i(),0),H){case"@":return f.next(),U=d(g,8,"@"),g.inLinked=!0,U;case".":return T(f),f.next(),d(g,9,".");case":":return T(f),f.next(),d(g,10,":");default:return L(f)?(U=d(g,1,le(f)),g.braceNest=0,g.inLinked=!1,U):A(f,g)||E(f,g)?(T(f),_e(f,g)):S(f,g)?(T(f),d(g,12,ct(f))):O(f,g)?(T(f),H==="{"?se(f,g)||U:d(g,11,$(f))):(k===8&&h(xe.INVALID_LINKED_FORMAT,i(),0),g.braceNest=0,g.inLinked=!1,We(f,g))}}function We(f,g){let k={type:14};if(g.braceNest>0)return se(f,g)||p(g);if(g.inLinked)return _e(f,g)||p(g);switch(f.currentChar()){case"{":return se(f,g)||p(g);case"}":return h(xe.UNBALANCED_CLOSING_BRACE,i(),0),f.next(),d(g,3,"}");case"@":return _e(f,g)||p(g);default:if(L(f))return k=d(g,1,le(f)),g.braceNest=0,g.inLinked=!1,k;const{isModulo:U,hasSpace:H}=z(f);if(U)return H?d(g,0,Ye(f)):d(g,4,he(f));if(x(f))return d(g,0,Ye(f));break}return k}function I(){const{currentType:f,offset:g,startLoc:k,endLoc:U}=c;return c.lastType=f,c.lastOffset=g,c.lastStartLoc=k,c.lastEndLoc=U,c.offset=r(),c.startLoc=i(),o.currentChar()===qr?d(c,14):We(o,c)}return{nextToken:I,currentOffset:r,currentPosition:i,context:l}}const iO="parser",sO=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function aO(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const o=parseInt(e||n,16);return o<=55295||o>=57344?String.fromCodePoint(o):"\uFFFD"}}}function cO(t={}){const e=t.location!==!1,{onError:n}=t;function o(b,C,y,v,...w){const A=b.currentPosition();if(A.offset+=v,A.column+=v,n){const S=e?sp(y,A):null,E=As(C,S,{domain:iO,args:w});n(E)}}function r(b,C,y){const v={type:b};return e&&(v.start=C,v.end=C,v.loc={start:y,end:y}),v}function i(b,C,y,v){v&&(b.type=v),e&&(b.end=C,b.loc&&(b.loc.end=y))}function s(b,C){const y=b.context(),v=r(3,y.offset,y.startLoc);return v.value=C,i(v,b.currentOffset(),b.currentPosition()),v}function a(b,C){const y=b.context(),{lastOffset:v,lastStartLoc:w}=y,A=r(5,v,w);return A.index=parseInt(C,10),b.nextToken(),i(A,b.currentOffset(),b.currentPosition()),A}function c(b,C){const y=b.context(),{lastOffset:v,lastStartLoc:w}=y,A=r(4,v,w);return A.key=C,b.nextToken(),i(A,b.currentOffset(),b.currentPosition()),A}function l(b,C){const y=b.context(),{lastOffset:v,lastStartLoc:w}=y,A=r(9,v,w);return A.value=C.replace(sO,aO),b.nextToken(),i(A,b.currentOffset(),b.currentPosition()),A}function u(b){const C=b.nextToken(),y=b.context(),{lastOffset:v,lastStartLoc:w}=y,A=r(8,v,w);return C.type!==12?(o(b,xe.UNEXPECTED_EMPTY_LINKED_MODIFIER,y.lastStartLoc,0),A.value="",i(A,v,w),{nextConsumeToken:C,node:A}):(C.value==null&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,Mo(C)),A.value=C.value||"",i(A,b.currentOffset(),b.currentPosition()),{node:A})}function h(b,C){const y=b.context(),v=r(7,y.offset,y.startLoc);return v.value=C,i(v,b.currentOffset(),b.currentPosition()),v}function d(b){const C=b.context(),y=r(6,C.offset,C.startLoc);let v=b.nextToken();if(v.type===9){const w=u(b);y.modifier=w.node,v=w.nextConsumeToken||b.nextToken()}switch(v.type!==10&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Mo(v)),v=b.nextToken(),v.type===2&&(v=b.nextToken()),v.type){case 11:v.value==null&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Mo(v)),y.key=h(b,v.value||"");break;case 5:v.value==null&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Mo(v)),y.key=c(b,v.value||"");break;case 6:v.value==null&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Mo(v)),y.key=a(b,v.value||"");break;case 7:v.value==null&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Mo(v)),y.key=l(b,v.value||"");break;default:o(b,xe.UNEXPECTED_EMPTY_LINKED_KEY,C.lastStartLoc,0);const w=b.context(),A=r(7,w.offset,w.startLoc);return A.value="",i(A,w.offset,w.startLoc),y.key=A,i(y,w.offset,w.startLoc),{nextConsumeToken:v,node:y}}return i(y,b.currentOffset(),b.currentPosition()),{node:y}}function p(b){const C=b.context(),y=C.currentType===1?b.currentOffset():C.offset,v=C.currentType===1?C.endLoc:C.startLoc,w=r(2,y,v);w.items=[];let A=null;do{const O=A||b.nextToken();switch(A=null,O.type){case 0:O.value==null&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Mo(O)),w.items.push(s(b,O.value||""));break;case 6:O.value==null&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Mo(O)),w.items.push(a(b,O.value||""));break;case 5:O.value==null&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Mo(O)),w.items.push(c(b,O.value||""));break;case 7:O.value==null&&o(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Mo(O)),w.items.push(l(b,O.value||""));break;case 8:const L=d(b);w.items.push(L.node),A=L.nextConsumeToken||null;break}}while(C.currentType!==14&&C.currentType!==1);const S=C.currentType===1?C.lastOffset:b.currentOffset(),E=C.currentType===1?C.lastEndLoc:b.currentPosition();return i(w,S,E),w}function m(b,C,y,v){const w=b.context();let A=v.items.length===0;const S=r(1,C,y);S.cases=[],S.cases.push(v);do{const E=p(b);A||(A=E.items.length===0),S.cases.push(E)}while(w.currentType!==14);return A&&o(b,xe.MUST_HAVE_MESSAGES_IN_PLURAL,y,0),i(S,b.currentOffset(),b.currentPosition()),S}function _(b){const C=b.context(),{offset:y,startLoc:v}=C,w=p(b);return C.currentType===14?w:m(b,y,v,w)}function T(b){const C=rO(b,fb({},t)),y=C.context(),v=r(0,y.offset,y.startLoc);return e&&v.loc&&(v.loc.source=b),v.body=_(C),t.onCacheKey&&(v.cacheKey=t.onCacheKey(b)),y.currentType!==14&&o(C,xe.UNEXPECTED_LEXICAL_ANALYSIS,y.lastStartLoc,0,b[y.offset]||""),i(v,C.currentOffset(),C.currentPosition()),v}return{parse:T}}function Mo(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"\u2026":e}function lO(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:o=>(n.helpers.add(o),o)}}function yb(t,e){for(let n=0;n<t.length;n++)ap(t[n],e)}function ap(t,e){switch(t.type){case 1:yb(t.cases,e),e.helper("plural");break;case 2:yb(t.items,e);break;case 6:ap(t.key,e),e.helper("linked"),e.helper("type");break;case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function uO(t,e={}){const n=lO(t);n.helper("normalize"),t.body&&ap(t.body,n);const o=n.context();t.helpers=Array.from(o.helpers)}function hO(t){const e=t.body;return e.type===2?_b(e):e.cases.forEach(n=>_b(n)),t}function _b(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const o=t.items[n];if(!(o.type===3||o.type===9)||o.value==null)break;e.push(o.value)}if(e.length===t.items.length){t.static=mb(e);for(let n=0;n<t.items.length;n++){const o=t.items[n];(o.type===3||o.type===9)&&delete o.value}}}}const dO="minifier";function Is(t){switch(t.t=t.type,t.type){case 0:const e=t;Is(e.body),e.b=e.body,delete e.body;break;case 1:const n=t,o=n.cases;for(let u=0;u<o.length;u++)Is(o[u]);n.c=o,delete n.cases;break;case 2:const r=t,i=r.items;for(let u=0;u<i.length;u++)Is(i[u]);r.i=i,delete r.items,r.static&&(r.s=r.static,delete r.static);break;case 3:case 9:case 8:case 7:const s=t;s.value&&(s.v=s.value,delete s.value);break;case 6:const a=t;Is(a.key),a.k=a.key,delete a.key,a.modifier&&(Is(a.modifier),a.m=a.modifier,delete a.modifier);break;case 5:const c=t;c.i=c.index,delete c.index;break;case 4:const l=t;l.k=l.key,delete l.key;break;default:throw As(xe.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:dO,args:[t.type]})}delete t.type}const pO="parser";function fO(t,e){const{sourceMap:n,filename:o,breakLineCode:r,needIndent:i}=e,s=e.location!==!1,a={filename:o,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:i,indentLevel:0};s&&t.loc&&(a.source=t.loc.source);const c=()=>a;function l(m,_){a.code+=m}function u(m,_=!0){const T=_?r:"";l(i?T+"  ".repeat(m):T)}function h(m=!0){const _=++a.indentLevel;m&&u(_)}function d(m=!0){const _=--a.indentLevel;m&&u(_)}function p(){u(a.indentLevel)}return{context:c,push:l,indent:h,deindent:d,newline:p,helper:m=>`_${m}`,needIndent:()=>a.needIndent}}function gO(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Rs(t,e.key),e.modifier?(t.push(", "),Rs(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function mO(t,e){const{helper:n,needIndent:o}=t;t.push(`${n("normalize")}([`),t.indent(o());const r=e.items.length;for(let i=0;i<r&&(Rs(t,e.items[i]),i!==r-1);i++)t.push(", ");t.deindent(o()),t.push("])")}function vO(t,e){const{helper:n,needIndent:o}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(o());const r=e.cases.length;for(let i=0;i<r&&(Rs(t,e.cases[i]),i!==r-1);i++)t.push(", ");t.deindent(o()),t.push("])")}}function yO(t,e){e.body?Rs(t,e.body):t.push("null")}function Rs(t,e){const{helper:n}=t;switch(e.type){case 0:yO(t,e);break;case 1:vO(t,e);break;case 2:mO(t,e);break;case 6:gO(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw As(xe.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:pO,args:[e.type]})}}const _O=(t,e={})=>{const n=gb(e.mode)?e.mode:"normal",o=gb(e.filename)?e.filename:"message.intl",r=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,s=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],c=fO(t,{mode:n,filename:o,sourceMap:r,breakLineCode:i,needIndent:s});c.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),c.indent(s),a.length>0&&(c.push(`const { ${mb(a.map(h=>`${h}: _${h}`),", ")} } = ctx`),c.newline()),c.push("return "),Rs(c,t),c.deindent(s),c.push("}"),delete t.helpers;const{code:l,map:u}=c.context();return{ast:t,code:l,map:u?u.toJSON():void 0}};function bO(t,e={}){const n=fb({},e),o=!!n.jit,r=!!n.minify,i=n.optimize==null?!0:n.optimize,s=cO(n).parse(t);return o?(i&&hO(s),r&&Is(s),{ast:s,code:""}):(uO(s,n),_O(s,n))}function CO(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(rr().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(rr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(rr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const Br=[];Br[0]={w:[0],i:[3,0],"[":[4],o:[7]},Br[1]={w:[1],".":[2],"[":[4],o:[7]},Br[2]={w:[2],i:[3,0],0:[3,0]},Br[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},Br[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},Br[5]={"'":[4,0],o:8,l:[5,0]},Br[6]={'"':[4,0],o:8,l:[6,0]};const wO=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function EO(t){return wO.test(t)}function TO(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function SO(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function kO(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:EO(e)?TO(e):"*"+e}function AO(t){const e=[];let n=-1,o=0,r=0,i,s,a,c,l,u,h;const d=[];d[0]=()=>{s===void 0?s=a:s+=a},d[1]=()=>{s!==void 0&&(e.push(s),s=void 0)},d[2]=()=>{d[0](),r++},d[3]=()=>{if(r>0)r--,o=4,d[0]();else{if(r=0,s===void 0||(s=kO(s),s===!1))return!1;d[1]()}};function p(){const m=t[n+1];if(o===5&&m==="'"||o===6&&m==='"')return n++,a="\\"+m,d[0](),!0}for(;o!==null;)if(n++,i=t[n],!(i==="\\"&&p())){if(c=SO(i),h=Br[o],l=h[c]||h.l||8,l===8||(o=l[0],l[1]!==void 0&&(u=d[l[1]],u&&(a=i,u()===!1))))return;if(o===7)return e}}const bb=new Map;function IO(t,e){return ut(t)?t[e]:null}function RO(t,e){if(!ut(t))return null;let n=bb.get(e);if(n||(n=AO(e),n&&bb.set(e,n)),!n)return null;const o=n.length;let r=t,i=0;for(;i<o;){const s=r[n[i]];if(s===void 0||yt(r))return null;r=s,i++}return r}const OO=t=>t,NO=t=>"",xO="text",PO=t=>t.length===0?"":$1(t),MO=j1;function Cb(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function LO(t){const e=zt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(zt(t.named.count)||zt(t.named.n))?zt(t.named.count)?t.named.count:zt(t.named.n)?t.named.n:e:e}function DO(t,e){e.count||(e.count=t),e.n||(e.n=t)}function UO(t={}){const e=t.locale,n=LO(t),o=ut(t.pluralRules)&&ge(e)&&yt(t.pluralRules[e])?t.pluralRules[e]:Cb,r=ut(t.pluralRules)&&ge(e)&&yt(t.pluralRules[e])?Cb:void 0,i=T=>T[o(n,T.length,r)],s=t.list||[],a=T=>s[T],c=t.named||{};zt(t.pluralIndex)&&DO(n,c);const l=T=>c[T];function u(T){return(yt(t.messages)?t.messages(T):ut(t.messages)?t.messages[T]:!1)||(t.parent?t.parent.message(T):NO)}const h=T=>t.modifiers?t.modifiers[T]:OO,d=Fe(t.processor)&&yt(t.processor.normalize)?t.processor.normalize:PO,p=Fe(t.processor)&&yt(t.processor.interpolate)?t.processor.interpolate:MO,m=Fe(t.processor)&&ge(t.processor.type)?t.processor.type:xO,_={list:a,named:l,plural:i,linked:(T,...b)=>{const[C,y]=b;let v="text",w="";b.length===1?ut(C)?(w=C.modifier||w,v=C.type||v):ge(C)&&(w=C||w):b.length===2&&(ge(C)&&(w=C||w),ge(y)&&(v=y||v));const A=u(T)(_),S=v==="vnode"&&Tt(A)&&w?A[0]:A;return w?h(w)(S,v):S},message:u,type:m,interpolate:p,normalize:d,values:on({},s,c)};return _}let Ja=null;function FO(t){Ja=t}function HO(t,e,n){Ja&&Ja.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const qO=BO("function:translate");function BO(t){return e=>Ja&&Ja.emit(t,e)}const KO={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8},wb=xe.__EXTEND_POINT__,Oi=ip(wb),yo={INVALID_ARGUMENT:wb,INVALID_DATE_ARGUMENT:Oi(),INVALID_ISO_DATE_ARGUMENT:Oi(),NOT_SUPPORT_NON_STRING_MESSAGE:Oi(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Oi(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Oi(),NOT_SUPPORT_LOCALE_TYPE:Oi(),__EXTEND_POINT__:Oi()};function Lo(t){return As(t,null,void 0)}function cp(t,e){return e.locale!=null?Eb(e.locale):Eb(t.locale)}let lp;function Eb(t){if(ge(t))return t;if(yt(t)){if(t.resolvedOnce&&lp!=null)return lp;if(t.constructor.name==="Function"){const e=t();if(K1(e))throw Lo(yo.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return lp=e}else throw Lo(yo.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Lo(yo.NOT_SUPPORT_LOCALE_TYPE)}function jO(t,e,n){return[...new Set([n,...Tt(e)?e:ut(e)?Object.keys(e):ge(e)?[e]:[n]])]}function Tb(t,e,n){const o=ge(n)?n:Os,r=t;r.__localeChainCache||(r.__localeChainCache=new Map);let i=r.__localeChainCache.get(o);if(!i){i=[];let s=[n];for(;Tt(s);)s=Sb(i,s,e);const a=Tt(e)||!Fe(e)?e:e.default?e.default:null;s=ge(a)?[a]:a,Tt(s)&&Sb(i,s,!1),r.__localeChainCache.set(o,i)}return i}function Sb(t,e,n){let o=!0;for(let r=0;r<e.length&&Qe(o);r++){const i=e[r];ge(i)&&(o=$O(t,e[r],n))}return o}function $O(t,e,n){let o;const r=e.split("-");do{const i=r.join("-");o=zO(t,i,n),r.splice(-1,1)}while(r.length&&o===!0);return o}function zO(t,e,n){let o=!1;if(!t.includes(e)&&(o=!0,e)){o=e[e.length-1]!=="!";const r=e.replace(/!/g,"");t.push(r),(Tt(n)||Fe(n))&&n[r]&&(o=n[r])}return o}const WO="9.8.0",tu=-1,Os="en-US",kb="",Ab=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function GO(){return{upper:(t,e)=>e==="text"&&ge(t)?t.toUpperCase():e==="vnode"&&ut(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&ge(t)?t.toLowerCase():e==="vnode"&&ut(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&ge(t)?Ab(t):e==="vnode"&&ut(t)&&"__v_isVNode"in t?Ab(t.children):t}}let Ib;function Rb(t){Ib=t}let Ob;function VO(t){Ob=t}let Nb;function YO(t){Nb=t}let xb=null;const RU=t=>{xb=t},QO=()=>xb;let Pb=null;const Mb=t=>{Pb=t},JO=()=>Pb;let Lb=0;function XO(t={}){const e=yt(t.onWarn)?t.onWarn:z1,n=ge(t.version)?t.version:WO,o=ge(t.locale)||yt(t.locale)?t.locale:Os,r=yt(o)?Os:o,i=Tt(t.fallbackLocale)||Fe(t.fallbackLocale)||ge(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:r,s=Fe(t.messages)?t.messages:{[r]:{}},a=Fe(t.datetimeFormats)?t.datetimeFormats:{[r]:{}},c=Fe(t.numberFormats)?t.numberFormats:{[r]:{}},l=on({},t.modifiers||{},GO()),u=t.pluralRules||{},h=yt(t.missing)?t.missing:null,d=Qe(t.missingWarn)||Hr(t.missingWarn)?t.missingWarn:!0,p=Qe(t.fallbackWarn)||Hr(t.fallbackWarn)?t.fallbackWarn:!0,m=!!t.fallbackFormat,_=!!t.unresolving,T=yt(t.postTranslation)?t.postTranslation:null,b=Fe(t.processor)?t.processor:null,C=Qe(t.warnHtmlMessage)?t.warnHtmlMessage:!0,y=!!t.escapeParameter,v=yt(t.messageCompiler)?t.messageCompiler:Ib,w=yt(t.messageResolver)?t.messageResolver:Ob||IO,A=yt(t.localeFallbacker)?t.localeFallbacker:Nb||jO,S=ut(t.fallbackContext)?t.fallbackContext:void 0,E=t,O=ut(E.__datetimeFormatters)?E.__datetimeFormatters:new Map,L=ut(E.__numberFormatters)?E.__numberFormatters:new Map,z=ut(E.__meta)?E.__meta:{};Lb++;const x={version:n,cid:Lb,locale:o,fallbackLocale:i,messages:s,modifiers:l,pluralRules:u,missing:h,missingWarn:d,fallbackWarn:p,fallbackFormat:m,unresolving:_,postTranslation:T,processor:b,warnHtmlMessage:C,escapeParameter:y,messageCompiler:v,messageResolver:w,localeFallbacker:A,fallbackContext:S,onWarn:e,__meta:z};return x.datetimeFormats=a,x.numberFormats=c,x.__datetimeFormatters=O,x.__numberFormatters=L,__INTLIFY_PROD_DEVTOOLS__&&HO(x,n,z),x}function up(t,e,n,o,r){const{missing:i,onWarn:s}=t;if(i!==null){const a=i(t,n,e,r);return ge(a)?a:e}else return e}function Xa(t,e,n){const o=t;o.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function hp(t){return e=>ZO(e,t)}function ZO(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const o=n,r=o.c||o.cases;return t.plural(r.reduce((i,s)=>[...i,Db(t,s)],[]))}else return Db(t,n)}function Db(t,e){const n=e.s||e.static;if(n)return t.type==="text"?n:t.normalize([n]);{const o=(e.i||e.items).reduce((r,i)=>[...r,dp(t,i)],[]);return t.normalize(o)}}function dp(t,e){const n=e.t||e.type;switch(n){case 3:const o=e;return o.v||o.value;case 9:const r=e;return r.v||r.value;case 4:const i=e;return t.interpolate(t.named(i.k||i.key));case 5:const s=e;return t.interpolate(t.list(s.i!=null?s.i:s.index));case 6:const a=e,c=a.m||a.modifier;return t.linked(dp(t,a.k||a.key),c?dp(t,c):void 0,t.type);case 7:const l=e;return l.v||l.value;case 8:const u=e;return u.v||u.value;default:throw new Error(`unhandled node type on format message part: ${n}`)}}const Ub=t=>t;let Ns=Object.create(null);const xs=t=>ut(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function Fb(t,e={}){let n=!1;const o=e.onError||J1;return e.onError=r=>{n=!0,o(r)},{...bO(t,e),detectError:n}}const eN=(t,e)=>{if(!ge(t))throw Lo(yo.NOT_SUPPORT_NON_STRING_MESSAGE);{Qe(e.warnHtmlMessage)&&e.warnHtmlMessage;const n=(e.onCacheKey||Ub)(t),o=Ns[n];if(o)return o;const{code:r,detectError:i}=Fb(t,e),s=new Function(`return ${r}`)();return i?s:Ns[n]=s}};function tN(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&ge(t)){Qe(e.warnHtmlMessage)&&e.warnHtmlMessage;const n=(e.onCacheKey||Ub)(t),o=Ns[n];if(o)return o;const{ast:r,detectError:i}=Fb(t,{...e,location:!1,jit:!0}),s=hp(r);return i?s:Ns[n]=s}else{const n=t.cacheKey;return n?Ns[n]||(Ns[n]=hp(t)):hp(t)}}const Hb=()=>"",Qn=t=>yt(t);function qb(t,...e){const{fallbackFormat:n,postTranslation:o,unresolving:r,messageCompiler:i,fallbackLocale:s,messages:a}=t,[c,l]=pp(...e),u=Qe(l.missingWarn)?l.missingWarn:t.missingWarn,h=Qe(l.fallbackWarn)?l.fallbackWarn:t.fallbackWarn,d=Qe(l.escapeParameter)?l.escapeParameter:t.escapeParameter,p=!!l.resolvedMessage,m=ge(l.default)||Qe(l.default)?Qe(l.default)?i?c:()=>c:l.default:n?i?c:()=>c:"",_=n||m!=="",T=cp(t,l);d&&nN(l);let[b,C,y]=p?[c,T,a[T]||{}]:Bb(t,c,T,s,h,u),v=b,w=c;if(!p&&!(ge(v)||xs(v)||Qn(v))&&_&&(v=m,w=v),!p&&(!(ge(v)||xs(v)||Qn(v))||!ge(C)))return r?tu:c;let A=!1;const S=()=>{A=!0},E=Qn(v)?v:Kb(t,c,C,v,w,S);if(A)return v;const O=iN(t,C,y,l),L=UO(O),z=oN(t,E,L),x=o?o(z,c):z;if(__INTLIFY_PROD_DEVTOOLS__){const j={timestamp:Date.now(),key:ge(c)?c:Qn(v)?v.key:"",locale:C||(Qn(v)?v.locale:""),format:ge(v)?v:Qn(v)?v.source:"",message:x};j.meta=on({},t.__meta,QO()||{}),qO(j)}return x}function nN(t){Tt(t.list)?t.list=t.list.map(e=>ge(e)?hb(e):e):ut(t.named)&&Object.keys(t.named).forEach(e=>{ge(t.named[e])&&(t.named[e]=hb(t.named[e]))})}function Bb(t,e,n,o,r,i){const{messages:s,onWarn:a,messageResolver:c,localeFallbacker:l}=t,u=l(t,o,n);let h={},d,p=null;const m="translate";for(let _=0;_<u.length&&(d=u[_],h=s[d]||{},(p=c(h,e))===null&&(p=h[e]),!(ge(p)||xs(p)||Qn(p)));_++){const T=up(t,e,d,i,m);T!==e&&(p=T)}return[p,d,h]}function Kb(t,e,n,o,r,i){const{messageCompiler:s,warnHtmlMessage:a}=t;if(Qn(o)){const l=o;return l.locale=l.locale||n,l.key=l.key||e,l}if(s==null){const l=()=>o;return l.locale=n,l.key=e,l}const c=s(o,rN(t,n,r,o,a,i));return c.locale=n,c.key=e,c.source=o,c}function oN(t,e,n){return e(n)}function pp(...t){const[e,n,o]=t,r={};if(!ge(e)&&!zt(e)&&!Qn(e)&&!xs(e))throw Lo(yo.INVALID_ARGUMENT);const i=zt(e)?String(e):(Qn(e),e);return zt(n)?r.plural=n:ge(n)?r.default=n:Fe(n)&&!Zl(n)?r.named=n:Tt(n)&&(r.list=n),zt(o)?r.plural=o:ge(o)?r.default=o:Fe(o)&&on(r,o),[i,r]}function rN(t,e,n,o,r,i){return{locale:e,key:n,warnHtmlMessage:r,onError:s=>{throw i&&i(s),s},onCacheKey:s=>F1(e,n,s)}}function iN(t,e,n,o){const{modifiers:r,pluralRules:i,messageResolver:s,fallbackLocale:a,fallbackWarn:c,missingWarn:l,fallbackContext:u}=t,h={locale:e,modifiers:r,pluralRules:i,messages:d=>{let p=s(n,d);if(p==null&&u){const[,,m]=Bb(u,d,e,a,c,l);p=s(m,d)}if(ge(p)||xs(p)){let m=!1;const _=Kb(t,d,e,p,d,()=>{m=!0});return m?Hb:_}else return Qn(p)?p:Hb}};return t.processor&&(h.processor=t.processor),o.list&&(h.list=o.list),o.named&&(h.named=o.named),zt(o.plural)&&(h.pluralIndex=o.plural),h}function jb(t,...e){const{datetimeFormats:n,unresolving:o,fallbackLocale:r,onWarn:i,localeFallbacker:s}=t,{__datetimeFormatters:a}=t,[c,l,u,h]=fp(...e),d=Qe(u.missingWarn)?u.missingWarn:t.missingWarn;Qe(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const p=!!u.part,m=cp(t,u),_=s(t,r,m);if(!ge(c)||c==="")return new Intl.DateTimeFormat(m,h).format(l);let T={},b,C=null;const y="datetime format";for(let A=0;A<_.length&&(b=_[A],T=n[b]||{},C=T[c],!Fe(C));A++)up(t,c,b,d,y);if(!Fe(C)||!ge(b))return o?tu:c;let v=`${b}__${c}`;Zl(h)||(v=`${v}__${JSON.stringify(h)}`);let w=a.get(v);return w||(w=new Intl.DateTimeFormat(b,on({},C,h)),a.set(v,w)),p?w.formatToParts(l):w.format(l)}const $b=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function fp(...t){const[e,n,o,r]=t,i={};let s={},a;if(ge(e)){const c=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw Lo(yo.INVALID_ISO_DATE_ARGUMENT);const l=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();a=new Date(l);try{a.toISOString()}catch{throw Lo(yo.INVALID_ISO_DATE_ARGUMENT)}}else if(q1(e)){if(isNaN(e.getTime()))throw Lo(yo.INVALID_DATE_ARGUMENT);a=e}else if(zt(e))a=e;else throw Lo(yo.INVALID_ARGUMENT);return ge(n)?i.key=n:Fe(n)&&Object.keys(n).forEach(c=>{$b.includes(c)?s[c]=n[c]:i[c]=n[c]}),ge(o)?i.locale=o:Fe(o)&&(s=o),Fe(r)&&(s=r),[i.key||"",a,i,s]}function zb(t,e,n){const o=t;for(const r in n){const i=`${e}__${r}`;o.__datetimeFormatters.has(i)&&o.__datetimeFormatters.delete(i)}}function Wb(t,...e){const{numberFormats:n,unresolving:o,fallbackLocale:r,onWarn:i,localeFallbacker:s}=t,{__numberFormatters:a}=t,[c,l,u,h]=gp(...e),d=Qe(u.missingWarn)?u.missingWarn:t.missingWarn;Qe(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const p=!!u.part,m=cp(t,u),_=s(t,r,m);if(!ge(c)||c==="")return new Intl.NumberFormat(m,h).format(l);let T={},b,C=null;const y="number format";for(let A=0;A<_.length&&(b=_[A],T=n[b]||{},C=T[c],!Fe(C));A++)up(t,c,b,d,y);if(!Fe(C)||!ge(b))return o?tu:c;let v=`${b}__${c}`;Zl(h)||(v=`${v}__${JSON.stringify(h)}`);let w=a.get(v);return w||(w=new Intl.NumberFormat(b,on({},C,h)),a.set(v,w)),p?w.formatToParts(l):w.format(l)}const Gb=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function gp(...t){const[e,n,o,r]=t,i={};let s={};if(!zt(e))throw Lo(yo.INVALID_ARGUMENT);const a=e;return ge(n)?i.key=n:Fe(n)&&Object.keys(n).forEach(c=>{Gb.includes(c)?s[c]=n[c]:i[c]=n[c]}),ge(o)?i.locale=o:Fe(o)&&(s=o),Fe(r)&&(s=r),[i.key||"",a,i,s]}function Vb(t,e,n){const o=t;for(const r in n){const i=`${e}__${r}`;o.__numberFormatters.has(i)&&o.__numberFormatters.delete(i)}}CO();const sN="9.8.0";function aN(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(rr().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(rr().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(rr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(rr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(rr().__INTLIFY_PROD_DEVTOOLS__=!1)}const cN=KO.__EXTEND_POINT__,Kr=ip(cN);Kr(),Kr(),Kr(),Kr(),Kr(),Kr(),Kr(),Kr();const Yb=yo.__EXTEND_POINT__,In=ip(Yb),Wt={UNEXPECTED_RETURN_TYPE:Yb,INVALID_ARGUMENT:In(),MUST_BE_CALL_SETUP_TOP:In(),NOT_INSTALLED:In(),NOT_AVAILABLE_IN_LEGACY_MODE:In(),REQUIRED_VALUE:In(),INVALID_VALUE:In(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:In(),NOT_INSTALLED_WITH_PROVIDE:In(),UNEXPECTED_ERROR:In(),NOT_COMPATIBLE_LEGACY_VUE_I18N:In(),BRIDGE_SUPPORT_VUE_2_ONLY:In(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:In(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:In(),__EXTEND_POINT__:In()};function Qt(t,...e){return As(t,null,void 0)}const mp=Fr("__translateVNode"),vp=Fr("__datetimeParts"),yp=Fr("__numberParts"),Qb=Fr("__setPluralRules"),Jb=Fr("__injectWithOption"),_p=Fr("__dispose");function Za(t){if(!ut(t))return t;for(const e in t)if(Ya(t,e))if(!e.includes("."))ut(t[e])&&Za(t[e]);else{const n=e.split("."),o=n.length-1;let r=t,i=!1;for(let s=0;s<o;s++){if(n[s]in r||(r[n[s]]={}),!ut(r[n[s]])){i=!0;break}r=r[n[s]]}i||(r[n[o]]=t[e],delete t[e]),ut(r[n[o]])&&Za(r[n[o]])}return t}function nu(t,e){const{messages:n,__i18n:o,messageResolver:r,flatJson:i}=e,s=Fe(n)?n:Tt(o)?{}:{[t]:{}};if(Tt(o)&&o.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:c,resource:l}=a;c?(s[c]=s[c]||{},Qa(l,s[c])):Qa(l,s)}else ge(a)&&Qa(JSON.parse(a),s)}),r==null&&i)for(const a in s)Ya(s,a)&&Za(s[a]);return s}function Xb(t){return t.type}function Zb(t,e,n){let o=ut(e.messages)?e.messages:{};"__i18nGlobal"in n&&(o=nu(t.locale.value,{messages:o,__i18n:n.__i18nGlobal}));const r=Object.keys(o);r.length&&r.forEach(i=>{t.mergeLocaleMessage(i,o[i])});{if(ut(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(s=>{t.mergeDateTimeFormat(s,e.datetimeFormats[s])})}if(ut(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(s=>{t.mergeNumberFormat(s,e.numberFormats[s])})}}}function eC(t){return Oe(yr,null,t,0)}const tC="__INTLIFY_META__",nC=()=>[],lN=()=>!1;let oC=0;function rC(t){return(e,n,o,r)=>t(n,o,kn()||void 0,r)}const OU=()=>{const t=kn();let e=null;return t&&(e=Xb(t)[tC])?{[tC]:e}:null};function bp(t={},e){const{__root:n,__injectWithOption:o}=t,r=n===void 0,i=t.flatJson;let s=Qe(t.inheritLocale)?t.inheritLocale:!0;const a=ye(n&&s?n.locale.value:ge(t.locale)?t.locale:Os),c=ye(n&&s?n.fallbackLocale.value:ge(t.fallbackLocale)||Tt(t.fallbackLocale)||Fe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),l=ye(nu(a.value,t)),u=ye(Fe(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),h=ye(Fe(t.numberFormats)?t.numberFormats:{[a.value]:{}});let d=n?n.missingWarn:Qe(t.missingWarn)||Hr(t.missingWarn)?t.missingWarn:!0,p=n?n.fallbackWarn:Qe(t.fallbackWarn)||Hr(t.fallbackWarn)?t.fallbackWarn:!0,m=n?n.fallbackRoot:Qe(t.fallbackRoot)?t.fallbackRoot:!0,_=!!t.fallbackFormat,T=yt(t.missing)?t.missing:null,b=yt(t.missing)?rC(t.missing):null,C=yt(t.postTranslation)?t.postTranslation:null,y=n?n.warnHtmlMessage:Qe(t.warnHtmlMessage)?t.warnHtmlMessage:!0,v=!!t.escapeParameter;const w=n?n.modifiers:Fe(t.modifiers)?t.modifiers:{};let A=t.pluralRules||n&&n.pluralRules,S;S=(()=>{r&&Mb(null);const P={version:sN,locale:a.value,fallbackLocale:c.value,messages:l.value,modifiers:w,pluralRules:A,missing:b===null?void 0:b,missingWarn:d,fallbackWarn:p,fallbackFormat:_,unresolving:!0,postTranslation:C===null?void 0:C,warnHtmlMessage:y,escapeParameter:v,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};P.datetimeFormats=u.value,P.numberFormats=h.value,P.__datetimeFormatters=Fe(S)?S.__datetimeFormatters:void 0,P.__numberFormatters=Fe(S)?S.__numberFormatters:void 0;const q=XO(P);return r&&Mb(q),q})(),Xa(S,a.value,c.value);function E(){return[a.value,c.value,l.value,u.value,h.value]}const O=Re({get:()=>a.value,set:P=>{a.value=P,S.locale=a.value}}),L=Re({get:()=>c.value,set:P=>{c.value=P,S.fallbackLocale=c.value,Xa(S,a.value,P)}}),z=Re(()=>l.value),x=Re(()=>u.value),j=Re(()=>h.value);function ae(){return yt(C)?C:null}function ie(P){C=P,S.postTranslation=P}function G(){return T}function fe(P){P!==null&&(b=rC(P)),T=P,S.missing=b}const he=(P,q,ce,be,Ue,ht)=>{E();let Je;try{__INTLIFY_PROD_DEVTOOLS__,r||(S.fallbackContext=n?JO():void 0),Je=P(S)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(S.fallbackContext=void 0)}if(ce!=="translate exists"&&zt(Je)&&Je===tu||ce==="translate exists"&&!Je){const[Nt,xn]=q();return n&&m?be(n):Ue(Nt)}else{if(ht(Je))return Je;throw Qt(Wt.UNEXPECTED_RETURN_TYPE)}};function Ye(...P){return he(q=>Reflect.apply(qb,null,[q,...P]),()=>pp(...P),"translate",q=>Reflect.apply(q.t,q,[...P]),q=>q,q=>ge(q))}function ke(...P){const[q,ce,be]=P;if(be&&!ut(be))throw Qt(Wt.INVALID_ARGUMENT);return Ye(q,ce,on({resolvedMessage:!0},be||{}))}function Be(...P){return he(q=>Reflect.apply(jb,null,[q,...P]),()=>fp(...P),"datetime format",q=>Reflect.apply(q.d,q,[...P]),()=>kb,q=>ge(q))}function nt(...P){return he(q=>Reflect.apply(Wb,null,[q,...P]),()=>gp(...P),"number format",q=>Reflect.apply(q.n,q,[...P]),()=>kb,q=>ge(q))}function Pe(P){return P.map(q=>ge(q)||zt(q)||Qe(q)?eC(String(q)):q)}const He={normalize:Pe,interpolate:P=>P,type:"vnode"};function it(...P){return he(q=>{let ce;const be=q;try{be.processor=He,ce=Reflect.apply(qb,null,[be,...P])}finally{be.processor=null}return ce},()=>pp(...P),"translate",q=>q[mp](...P),q=>[eC(q)],q=>Tt(q))}function ct(...P){return he(q=>Reflect.apply(Wb,null,[q,...P]),()=>gp(...P),"number format",q=>q[yp](...P),nC,q=>ge(q)||Tt(q))}function $(...P){return he(q=>Reflect.apply(jb,null,[q,...P]),()=>fp(...P),"datetime format",q=>q[vp](...P),nC,q=>ge(q)||Tt(q))}function le(P){A=P,S.pluralRules=A}function se(P,q){return he(()=>{if(!P)return!1;const ce=ge(q)?q:a.value,be=I(ce),Ue=S.messageResolver(be,P);return xs(Ue)||Qn(Ue)||ge(Ue)},()=>[P],"translate exists",ce=>Reflect.apply(ce.te,ce,[P,q]),lN,ce=>Qe(ce))}function _e(P){let q=null;const ce=Tb(S,c.value,a.value);for(let be=0;be<ce.length;be++){const Ue=l.value[ce[be]]||{},ht=S.messageResolver(Ue,P);if(ht!=null){q=ht;break}}return q}function We(P){return _e(P)??(n?n.tm(P)||{}:{})}function I(P){return l.value[P]||{}}function f(P,q){if(i){const ce={[P]:q};for(const be in ce)Ya(ce,be)&&Za(ce[be]);q=ce[P]}l.value[P]=q,S.messages=l.value}function g(P,q){l.value[P]=l.value[P]||{};const ce={[P]:q};for(const be in ce)Ya(ce,be)&&Za(ce[be]);q=ce[P],Qa(q,l.value[P]),S.messages=l.value}function k(P){return u.value[P]||{}}function U(P,q){u.value[P]=q,S.datetimeFormats=u.value,zb(S,P,q)}function H(P,q){u.value[P]=on(u.value[P]||{},q),S.datetimeFormats=u.value,zb(S,P,q)}function Y(P){return h.value[P]||{}}function ne(P,q){h.value[P]=q,S.numberFormats=h.value,Vb(S,P,q)}function re(P,q){h.value[P]=on(h.value[P]||{},q),S.numberFormats=h.value,Vb(S,P,q)}oC++,n&&rp&&(Pt(n.locale,P=>{s&&(a.value=P,S.locale=P,Xa(S,a.value,c.value))}),Pt(n.fallbackLocale,P=>{s&&(c.value=P,S.fallbackLocale=P,Xa(S,a.value,c.value))}));const Q={id:oC,locale:O,fallbackLocale:L,get inheritLocale(){return s},set inheritLocale(P){s=P,P&&n&&(a.value=n.locale.value,c.value=n.fallbackLocale.value,Xa(S,a.value,c.value))},get availableLocales(){return Object.keys(l.value).sort()},messages:z,get modifiers(){return w},get pluralRules(){return A||{}},get isGlobal(){return r},get missingWarn(){return d},set missingWarn(P){d=P,S.missingWarn=d},get fallbackWarn(){return p},set fallbackWarn(P){p=P,S.fallbackWarn=p},get fallbackRoot(){return m},set fallbackRoot(P){m=P},get fallbackFormat(){return _},set fallbackFormat(P){_=P,S.fallbackFormat=_},get warnHtmlMessage(){return y},set warnHtmlMessage(P){y=P,S.warnHtmlMessage=P},get escapeParameter(){return v},set escapeParameter(P){v=P,S.escapeParameter=P},t:Ye,getLocaleMessage:I,setLocaleMessage:f,mergeLocaleMessage:g,getPostTranslationHandler:ae,setPostTranslationHandler:ie,getMissingHandler:G,setMissingHandler:fe,[Qb]:le};return Q.datetimeFormats=x,Q.numberFormats=j,Q.rt=ke,Q.te=se,Q.tm=We,Q.d=Be,Q.n=nt,Q.getDateTimeFormat=k,Q.setDateTimeFormat=U,Q.mergeDateTimeFormat=H,Q.getNumberFormat=Y,Q.setNumberFormat=ne,Q.mergeNumberFormat=re,Q[Jb]=o,Q[mp]=it,Q[vp]=$,Q[yp]=ct,Q}function uN(t){const e=ge(t.locale)?t.locale:Os,n=ge(t.fallbackLocale)||Tt(t.fallbackLocale)||Fe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,o=yt(t.missing)?t.missing:void 0,r=Qe(t.silentTranslationWarn)||Hr(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=Qe(t.silentFallbackWarn)||Hr(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,s=Qe(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,c=Fe(t.modifiers)?t.modifiers:{},l=t.pluralizationRules,u=yt(t.postTranslation)?t.postTranslation:void 0,h=ge(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,d=!!t.escapeParameterHtml,p=Qe(t.sync)?t.sync:!0;let m=t.messages;if(Fe(t.sharedMessages)){const w=t.sharedMessages;m=Object.keys(w).reduce((A,S)=>{const E=A[S]||(A[S]={});return on(E,w[S]),A},m||{})}const{__i18n:_,__root:T,__injectWithOption:b}=t,C=t.datetimeFormats,y=t.numberFormats,v=t.flatJson;return{locale:e,fallbackLocale:n,messages:m,flatJson:v,datetimeFormats:C,numberFormats:y,missing:o,missingWarn:r,fallbackWarn:i,fallbackRoot:s,fallbackFormat:a,modifiers:c,pluralRules:l,postTranslation:u,warnHtmlMessage:h,escapeParameter:d,messageResolver:t.messageResolver,inheritLocale:p,__i18n:_,__root:T,__injectWithOption:b}}function Cp(t={},e){{const n=bp(uN(t)),{__extender:o}=t,r={id:n.id,get locale(){return n.locale.value},set locale(i){n.locale.value=i},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(i){n.fallbackLocale.value=i},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return n.getMissingHandler()},set missing(i){n.setMissingHandler(i)},get silentTranslationWarn(){return Qe(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(i){n.missingWarn=Qe(i)?!i:i},get silentFallbackWarn(){return Qe(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(i){n.fallbackWarn=Qe(i)?!i:i},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(i){n.fallbackFormat=i},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(i){n.setPostTranslationHandler(i)},get sync(){return n.inheritLocale},set sync(i){n.inheritLocale=i},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){n.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(i){n.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...i){const[s,a,c]=i,l={};let u=null,h=null;if(!ge(s))throw Qt(Wt.INVALID_ARGUMENT);const d=s;return ge(a)?l.locale=a:Tt(a)?u=a:Fe(a)&&(h=a),Tt(c)?u=c:Fe(c)&&(h=c),Reflect.apply(n.t,n,[d,u||h||{},l])},rt(...i){return Reflect.apply(n.rt,n,[...i])},tc(...i){const[s,a,c]=i,l={plural:1};let u=null,h=null;if(!ge(s))throw Qt(Wt.INVALID_ARGUMENT);const d=s;return ge(a)?l.locale=a:zt(a)?l.plural=a:Tt(a)?u=a:Fe(a)&&(h=a),ge(c)?l.locale=c:Tt(c)?u=c:Fe(c)&&(h=c),Reflect.apply(n.t,n,[d,u||h||{},l])},te(i,s){return n.te(i,s)},tm(i){return n.tm(i)},getLocaleMessage(i){return n.getLocaleMessage(i)},setLocaleMessage(i,s){n.setLocaleMessage(i,s)},mergeLocaleMessage(i,s){n.mergeLocaleMessage(i,s)},d(...i){return Reflect.apply(n.d,n,[...i])},getDateTimeFormat(i){return n.getDateTimeFormat(i)},setDateTimeFormat(i,s){n.setDateTimeFormat(i,s)},mergeDateTimeFormat(i,s){n.mergeDateTimeFormat(i,s)},n(...i){return Reflect.apply(n.n,n,[...i])},getNumberFormat(i){return n.getNumberFormat(i)},setNumberFormat(i,s){n.setNumberFormat(i,s)},mergeNumberFormat(i,s){n.mergeNumberFormat(i,s)},getChoiceIndex(i,s){return-1}};return r.__extender=o,r}}const wp={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function hN({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((n,o)=>[...n,...o.type===ze?o.children:[o]],[]):e.reduce((n,o)=>{const r=t[o];return r&&(n[o]=r()),n},{})}function iC(t){return ze}const dN=vt({name:"i18n-t",props:on({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>zt(t)||!isNaN(t)}},wp),setup(t,e){const{slots:n,attrs:o}=e,r=t.i18n||Jn({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(h=>h!=="_"),s={};t.locale&&(s.locale=t.locale),t.plural!==void 0&&(s.plural=ge(t.plural)?+t.plural:t.plural);const a=hN(e,i),c=r[mp](t.keypath,a,s),l=on({},o),u=ge(t.tag)||ut(t.tag)?t.tag:iC();return is(u,l,c)}}}),sC=dN;function pN(t){return Tt(t)&&!ge(t[0])}function aC(t,e,n,o){const{slots:r,attrs:i}=e;return()=>{const s={part:!0};let a={};t.locale&&(s.locale=t.locale),ge(t.format)?s.key=t.format:ut(t.format)&&(ge(t.format.key)&&(s.key=t.format.key),a=Object.keys(t.format).reduce((d,p)=>n.includes(p)?on({},d,{[p]:t.format[p]}):d,{}));const c=o(t.value,s,a);let l=[s.key];Tt(c)?l=c.map((d,p)=>{const m=r[d.type],_=m?m({[d.type]:d.value,index:p,parts:c}):[d.value];return pN(_)&&(_[0].key=`${d.type}-${p}`),_}):ge(c)&&(l=[c]);const u=on({},i),h=ge(t.tag)||ut(t.tag)?t.tag:iC();return is(h,u,l)}}const fN=vt({name:"i18n-n",props:on({value:{type:Number,required:!0},format:{type:[String,Object]}},wp),setup(t,e){const n=t.i18n||Jn({useScope:"parent",__useComponent:!0});return aC(t,e,Gb,(...o)=>n[yp](...o))}}),cC=fN,gN=vt({name:"i18n-d",props:on({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},wp),setup(t,e){const n=t.i18n||Jn({useScope:"parent",__useComponent:!0});return aC(t,e,$b,(...o)=>n[vp](...o))}}),lC=gN;function mN(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const o=n.__getInstance(e);return o!=null?o.__composer:t.global.__composer}}function vN(t){const e=n=>{const{instance:o,modifiers:r,value:i}=n;if(!o||!o.$)throw Qt(Wt.UNEXPECTED_ERROR);const s=mN(t,o.$),a=uC(i);return[Reflect.apply(s.t,s,[...hC(a)]),s]};return{created:(n,o)=>{const[r,i]=e(o);rp&&t.global===i&&(n.__i18nWatcher=Pt(i.locale,()=>{o.instance&&o.instance.$forceUpdate()})),n.__composer=i,n.textContent=r},unmounted:n=>{rp&&n.__i18nWatcher&&(n.__i18nWatcher(),n.__i18nWatcher=void 0,delete n.__i18nWatcher),n.__composer&&(n.__composer=void 0,delete n.__composer)},beforeUpdate:(n,{value:o})=>{if(n.__composer){const r=n.__composer,i=uC(o);n.textContent=Reflect.apply(r.t,r,[...hC(i)])}},getSSRProps:n=>{const[o]=e(n);return{textContent:o}}}}function uC(t){if(ge(t))return{path:t};if(Fe(t)){if(!("path"in t))throw Qt(Wt.REQUIRED_VALUE,"path");return t}else throw Qt(Wt.INVALID_VALUE)}function hC(t){const{path:e,locale:n,args:o,choice:r,plural:i}=t,s={},a=o||{};return ge(n)&&(s.locale=n),zt(r)&&(s.plural=r),zt(i)&&(s.plural=i),[e,a,s]}function yN(t,e,...n){const o=Fe(n[0])?n[0]:{},r=!!o.useI18nComponentName;(!Qe(o.globalInstall)||o.globalInstall)&&([r?"i18n":sC.name,"I18nT"].forEach(i=>t.component(i,sC)),[cC.name,"I18nN"].forEach(i=>t.component(i,cC)),[lC.name,"I18nD"].forEach(i=>t.component(i,lC))),t.directive("t",vN(e))}function _N(t,e,n){return{beforeCreate(){const o=kn();if(!o)throw Qt(Wt.UNEXPECTED_ERROR);const r=this.$options;if(r.i18n){const i=r.i18n;if(r.__i18n&&(i.__i18n=r.__i18n),i.__root=e,this===this.$root)this.$i18n=dC(t,i);else{i.__injectWithOption=!0,i.__extender=n.__vueI18nExtend,this.$i18n=Cp(i);const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}}else if(r.__i18n)if(this===this.$root)this.$i18n=dC(t,r);else{this.$i18n=Cp({__i18n:r.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;r.__i18nGlobal&&Zb(e,r,r),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,s)=>this.$i18n.te(i,s),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),n.__setInstance(o,this.$i18n)},mounted(){},unmounted(){const o=kn();if(!o)throw Qt(Wt.UNEXPECTED_ERROR);const r=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,r.__disposer&&(r.__disposer(),delete r.__disposer,delete r.__extender),n.__deleteInstance(o),delete this.$i18n}}}function dC(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[Qb](e.pluralizationRules||t.pluralizationRules);const n=nu(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(o=>t.mergeLocaleMessage(o,n[o])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(o=>t.mergeDateTimeFormat(o,e.datetimeFormats[o])),e.numberFormats&&Object.keys(e.numberFormats).forEach(o=>t.mergeNumberFormat(o,e.numberFormats[o])),t}const bN=Fr("global-vue-i18n");function CN(t={},e){const n=__VUE_I18N_LEGACY_API__&&Qe(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,o=Qe(t.globalInjection)?t.globalInjection:!0,r=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,i=new Map,[s,a]=wN(t,n),c=Fr("");function l(d){return i.get(d)||null}function u(d,p){i.set(d,p)}function h(d){i.delete(d)}{const d={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return r},async install(p,...m){if(p.__VUE_I18N_SYMBOL__=c,p.provide(p.__VUE_I18N_SYMBOL__,d),Fe(m[0])){const b=m[0];d.__composerExtend=b.__composerExtend,d.__vueI18nExtend=b.__vueI18nExtend}let _=null;!n&&o&&(_=NN(p,d.global)),__VUE_I18N_FULL_INSTALL__&&yN(p,d,...m),__VUE_I18N_LEGACY_API__&&n&&p.mixin(_N(a,a.__composer,d));const T=p.unmount;p.unmount=()=>{_&&_(),d.dispose(),T()}},get global(){return a},dispose(){s.stop()},__instances:i,__getInstance:l,__setInstance:u,__deleteInstance:h};return d}}function Jn(t={}){const e=kn();if(e==null)throw Qt(Wt.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Qt(Wt.NOT_INSTALLED);const n=EN(e),o=SN(n),r=Xb(e),i=TN(t,r);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw Qt(Wt.NOT_AVAILABLE_IN_LEGACY_MODE);return RN(e,i,o,t)}if(i==="global")return Zb(o,t,r),o;if(i==="parent"){let c=kN(n,e,t.__useComponent);return c==null&&(c=o),c}const s=n;let a=s.__getInstance(e);if(a==null){const c=on({},t);"__i18n"in r&&(c.__i18n=r.__i18n),o&&(c.__root=o),a=bp(c),s.__composerExtend&&(a[_p]=s.__composerExtend(a)),IN(s,e,a),s.__setInstance(e,a)}return a}function wN(t,e,n){const o=hf();{const r=__VUE_I18N_LEGACY_API__&&e?o.run(()=>Cp(t)):o.run(()=>bp(t));if(r==null)throw Qt(Wt.UNEXPECTED_ERROR);return[o,r]}}function EN(t){{const e=En(t.isCE?bN:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Qt(t.isCE?Wt.NOT_INSTALLED_WITH_PROVIDE:Wt.UNEXPECTED_ERROR);return e}}function TN(t,e){return Zl(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function SN(t){return t.mode==="composition"?t.global:t.global.__composer}function kN(t,e,n=!1){let o=null;const r=e.root;let i=AN(e,n);for(;i!=null;){const s=t;if(t.mode==="composition")o=s.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const a=s.__getInstance(i);a!=null&&(o=a.__composer,n&&o&&!o[Jb]&&(o=null))}if(o!=null||r===i)break;i=i.parent}return o}function AN(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function IN(t,e,n){Ln(()=>{},e),fi(()=>{const o=n;t.__deleteInstance(e);const r=o[_p];r&&(r(),delete o[_p])},e)}function RN(t,e,n,o={}){const r=e==="local",i=Du(null);if(r&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw Qt(Wt.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const s=Qe(o.inheritLocale)?o.inheritLocale:!ge(o.locale),a=ye(!r||s?n.locale.value:ge(o.locale)?o.locale:Os),c=ye(!r||s?n.fallbackLocale.value:ge(o.fallbackLocale)||Tt(o.fallbackLocale)||Fe(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:a.value),l=ye(nu(a.value,o)),u=ye(Fe(o.datetimeFormats)?o.datetimeFormats:{[a.value]:{}}),h=ye(Fe(o.numberFormats)?o.numberFormats:{[a.value]:{}}),d=r?n.missingWarn:Qe(o.missingWarn)||Hr(o.missingWarn)?o.missingWarn:!0,p=r?n.fallbackWarn:Qe(o.fallbackWarn)||Hr(o.fallbackWarn)?o.fallbackWarn:!0,m=r?n.fallbackRoot:Qe(o.fallbackRoot)?o.fallbackRoot:!0,_=!!o.fallbackFormat,T=yt(o.missing)?o.missing:null,b=yt(o.postTranslation)?o.postTranslation:null,C=r?n.warnHtmlMessage:Qe(o.warnHtmlMessage)?o.warnHtmlMessage:!0,y=!!o.escapeParameter,v=r?n.modifiers:Fe(o.modifiers)?o.modifiers:{},w=o.pluralRules||r&&n.pluralRules;function A(){return[a.value,c.value,l.value,u.value,h.value]}const S=Re({get:()=>i.value?i.value.locale.value:a.value,set:g=>{i.value&&(i.value.locale.value=g),a.value=g}}),E=Re({get:()=>i.value?i.value.fallbackLocale.value:c.value,set:g=>{i.value&&(i.value.fallbackLocale.value=g),c.value=g}}),O=Re(()=>i.value?i.value.messages.value:l.value),L=Re(()=>u.value),z=Re(()=>h.value);function x(){return i.value?i.value.getPostTranslationHandler():b}function j(g){i.value&&i.value.setPostTranslationHandler(g)}function ae(){return i.value?i.value.getMissingHandler():T}function ie(g){i.value&&i.value.setMissingHandler(g)}function G(g){return A(),g()}function fe(...g){return i.value?G(()=>Reflect.apply(i.value.t,null,[...g])):G(()=>"")}function he(...g){return i.value?Reflect.apply(i.value.rt,null,[...g]):""}function Ye(...g){return i.value?G(()=>Reflect.apply(i.value.d,null,[...g])):G(()=>"")}function ke(...g){return i.value?G(()=>Reflect.apply(i.value.n,null,[...g])):G(()=>"")}function Be(g){return i.value?i.value.tm(g):{}}function nt(g,k){return i.value?i.value.te(g,k):!1}function Pe(g){return i.value?i.value.getLocaleMessage(g):{}}function He(g,k){i.value&&(i.value.setLocaleMessage(g,k),l.value[g]=k)}function it(g,k){i.value&&i.value.mergeLocaleMessage(g,k)}function ct(g){return i.value?i.value.getDateTimeFormat(g):{}}function $(g,k){i.value&&(i.value.setDateTimeFormat(g,k),u.value[g]=k)}function le(g,k){i.value&&i.value.mergeDateTimeFormat(g,k)}function se(g){return i.value?i.value.getNumberFormat(g):{}}function _e(g,k){i.value&&(i.value.setNumberFormat(g,k),h.value[g]=k)}function We(g,k){i.value&&i.value.mergeNumberFormat(g,k)}const I={get id(){return i.value?i.value.id:-1},locale:S,fallbackLocale:E,messages:O,datetimeFormats:L,numberFormats:z,get inheritLocale(){return i.value?i.value.inheritLocale:s},set inheritLocale(g){i.value&&(i.value.inheritLocale=g)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(l.value)},get modifiers(){return i.value?i.value.modifiers:v},get pluralRules(){return i.value?i.value.pluralRules:w},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:d},set missingWarn(g){i.value&&(i.value.missingWarn=g)},get fallbackWarn(){return i.value?i.value.fallbackWarn:p},set fallbackWarn(g){i.value&&(i.value.missingWarn=g)},get fallbackRoot(){return i.value?i.value.fallbackRoot:m},set fallbackRoot(g){i.value&&(i.value.fallbackRoot=g)},get fallbackFormat(){return i.value?i.value.fallbackFormat:_},set fallbackFormat(g){i.value&&(i.value.fallbackFormat=g)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:C},set warnHtmlMessage(g){i.value&&(i.value.warnHtmlMessage=g)},get escapeParameter(){return i.value?i.value.escapeParameter:y},set escapeParameter(g){i.value&&(i.value.escapeParameter=g)},t:fe,getPostTranslationHandler:x,setPostTranslationHandler:j,getMissingHandler:ae,setMissingHandler:ie,rt:he,d:Ye,n:ke,tm:Be,te:nt,getLocaleMessage:Pe,setLocaleMessage:He,mergeLocaleMessage:it,getDateTimeFormat:ct,setDateTimeFormat:$,mergeDateTimeFormat:le,getNumberFormat:se,setNumberFormat:_e,mergeNumberFormat:We};function f(g){g.locale.value=a.value,g.fallbackLocale.value=c.value,Object.keys(l.value).forEach(k=>{g.mergeLocaleMessage(k,l.value[k])}),Object.keys(u.value).forEach(k=>{g.mergeDateTimeFormat(k,u.value[k])}),Object.keys(h.value).forEach(k=>{g.mergeNumberFormat(k,h.value[k])}),g.escapeParameter=y,g.fallbackFormat=_,g.fallbackRoot=m,g.fallbackWarn=p,g.missingWarn=d,g.warnHtmlMessage=C}return Xu(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw Qt(Wt.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const g=i.value=t.proxy.$i18n.__composer;e==="global"?(a.value=g.locale.value,c.value=g.fallbackLocale.value,l.value=g.messages.value,u.value=g.datetimeFormats.value,h.value=g.numberFormats.value):r&&f(g)}),I}const ON=["locale","fallbackLocale","availableLocales"],pC=["t","rt","d","n","tm","te"];function NN(t,e){const n=Object.create(null);return ON.forEach(o=>{const r=Object.getOwnPropertyDescriptor(e,o);if(!r)throw Qt(Wt.UNEXPECTED_ERROR);const i=Mt(r.value)?{get(){return r.value.value},set(s){r.value.value=s}}:{get(){return r.get&&r.get()}};Object.defineProperty(n,o,i)}),t.config.globalProperties.$i18n=n,pC.forEach(o=>{const r=Object.getOwnPropertyDescriptor(e,o);if(!r||!r.value)throw Qt(Wt.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${o}`,r)}),()=>{delete t.config.globalProperties.$i18n,pC.forEach(o=>{delete t.config.globalProperties[`$${o}`]})}}if(aN(),__INTLIFY_JIT_COMPILATION__?Rb(tN):Rb(eN),VO(RO),YO(Tb),__INTLIFY_PROD_DEVTOOLS__){const t=rr();t.__INTLIFY__=!0,FO(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const xN={class:"border w-100 p-2 bg-white"},PN={class:"nav align-items-center px-2 gap-1",style:{color:"black"}},MN=["src","onerror"],LN={key:1,style:{width:"32px",height:"32px","font-size":"14px"},class:"rounded-circle d-flex align-items-center justify-content-center bg-primary fw-bold"},DN={class:"dropdown-menu"},UN=["onKeyup"],FN=vt({__name:"Navigation",setup(t){const e=Xl(),n=Va(),{t:o,locale:r}=Jn(),i=ye(!1),s=()=>{Mr.loginRedirect({scopes:v_}).then(h=>console.log(h)).catch(h=>console.log(h))},a=()=>r.value==="fi"?r.value="en":r.value="fi",c=Re(()=>r.value==="fi"?"In English":"Suomeksi"),l=()=>{lR(),Mr.logout().then(h=>console.log(h)).catch(h=>console.log(h)),n.push("/")};Ln(async()=>{await Mr.handleRedirectPromise()});const u=ye();return(h,d)=>{const p=ju("router-link");return Z(),oe("nav",xN,[M("ul",PN,[X(Vn)?(Z(),oe("div",{key:0,tabindex:"0",role:"button",onKeyup:d[0]||(d[0]=Kt(()=>{var m;return(m=u.value)==null?void 0:m.click()},["enter"])),class:"dropdown focus-ring rounded-circle"},[M("div",{ref_key:"avatarRef",ref:u,class:"rounded-circle",type:"button","data-bs-toggle":"dropdown"},[X(Vn).avatarUrl&&!i.value?(Z(),oe("img",{key:0,class:"rounded-circle",height:"32",width:"32",style:{"object-fit":"fill"},src:X(Vn).avatarUrl,alt:"User avatar",onerror:i.value=!0},null,8,MN)):(Z(),oe("div",LN,Se(X(Vn).givenName[0]+X(Vn).surname[0]),1))],512),M("ul",DN,[Oe(p,{class:"dropdown-item",to:`/users/${X(Vn).id}`},{default:wt(()=>[$n(Se(X(o)("Navigation.profile")),1)]),_:1},8,["to"]),M("li",{tabIndex:"0",onClick:l,class:"dropdown-item"},Se(X(o)("Navigation.logout")),1)])],32)):Ge("",!0),X(Vn)?Ge("",!0):(Z(),oe("button",{key:1,onClick:s,"data-testid":"login-btn",class:"btn btn-primary"},Se(X(o)("Navigation.login")),1)),M("li",{class:ao(["nav-item rounded-3",{"nav-item-active":X(e).path.includes("catshows")}])},[Oe(p,{style:{color:"black"},class:"nav-link rounded-3",to:"/catshows"},{default:wt(()=>[$n(Se(X(o)("Navigation.catShows")),1)]),_:1})],2),M("li",{class:ao(["nav-item rounded-3",{"nav-item-active":X(e).path==="/cats"||X(e).path.startsWith("/cats/")}])},[Oe(p,{ref:"cats",style:{color:"black"},class:"nav-link rounded-3",to:"/cats"},{default:wt(()=>[$n(Se(X(o)("Navigation.cats")),1)]),_:1},512)],2),M("li",{class:ao(["nav-item rounded-3",{"nav-item-active":X(e).path.includes("users")}])},[Oe(p,{style:{color:"black"},class:"nav-link rounded-3",to:"/users"},{default:wt(()=>[$n(Se(X(o)("Navigation.members")),1)]),_:1})],2),M("a",{onKeyup:Kt(a,["enter"]),onClick:a,tabindex:"0",style:{cursor:"pointer"},class:"ms-auto focus-ring p-2 rounded-3"},Se(c.value),41,UN)])])}}});var HN=Object.defineProperty,qN=(t,e,n)=>e in t?HN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vn=(t,e,n)=>(qN(t,typeof e!="symbol"?e+"":e,n),n);let Ep=1;class BN{constructor(){vn(this,"subscribers"),vn(this,"toasts"),vn(this,"subscribe",e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)})),vn(this,"publish",e=>{this.subscribers.forEach(n=>n(e))}),vn(this,"addToast",e=>{this.publish(e),this.toasts=[...this.toasts,e]}),vn(this,"create",e=>{var n;const{message:o,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Ep++,s=this.toasts.findIndex(c=>c.id===i),a=e.dismissible===void 0?!0:e.dismissible;return s!==-1?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:o}),{...c,...e,id:i,dismissible:a,title:o}):c):this.addToast({title:o,...r,dismissible:a,id:i}),i}),vn(this,"dismiss",e=>(e||this.toasts.forEach(n=>{this.subscribers.forEach(o=>o({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e)),vn(this,"message",(e,n)=>this.create({...n,message:e})),vn(this,"error",(e,n)=>this.create({...n,type:"error",message:e})),vn(this,"success",(e,n)=>this.create({...n,type:"success",message:e})),vn(this,"info",(e,n)=>this.create({...n,type:"info",message:e})),vn(this,"warning",(e,n)=>this.create({...n,type:"warning",message:e})),vn(this,"loading",(e,n)=>this.create({...n,type:"loading",message:e})),vn(this,"promise",(e,n)=>{if(!n)return;let o;n.loading!==void 0&&(o=this.create({...n,promise:e,type:"loading",message:n.loading}));const r=e instanceof Promise?e:e();let i=o!==void 0;return r.then(s=>{if(n.success!==void 0){i=!1;const a=typeof n.success=="function"?n.success(s):n.success;this.create({id:o,type:"success",message:a})}}).catch(s=>{if(n.error!==void 0){i=!1;const a=typeof n.error=="function"?n.error(s):n.error;this.create({id:o,type:"error",message:a})}}).finally(()=>{var s;i&&(this.dismiss(o),o=void 0),(s=n.finally)==null||s.call(n)}),o}),vn(this,"custom",(e,n)=>{const o=(n==null?void 0:n.id)||Ep++;return this.publish({...n,id:o,title:e}),o}),this.subscribers=[],this.toasts=[]}}const _o=new BN,KN=(t,e)=>{const n=(e==null?void 0:e.id)||Ep++;return _o.publish({title:t,...e,id:n}),n},jN=KN,jr=Object.assign(jN,{success:_o.success,info:_o.info,warning:_o.warning,error:_o.error,custom:_o.custom,message:_o.message,promise:_o.promise,dismiss:_o.dismiss,loading:_o.loading}),$N=["data-visible"],zN={className:"sonner-spinner"},WN=vt({__name:"Loader",props:{visible:Boolean},setup(t){const e=Array(12).fill(0);return(n,o)=>(Z(),oe("div",{className:"sonner-loading-wrapper","data-visible":t.visible},[M("div",zN,[(Z(!0),oe(ze,null,sn(X(e),r=>(Z(),oe("div",{key:`spinner-bar-${r}`,className:"sonner-loading-bar"}))),128))])],8,$N))}}),ec=(t,e)=>{const n=t.__vccOpts||t;for(const[o,r]of e)n[o]=r;return n},GN={},VN={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},YN=M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"},null,-1),QN=[YN];function JN(t,e){return Z(),oe("svg",VN,QN)}const XN=ec(GN,[["render",JN]]),ZN={},ex={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},tx=M("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z","clip-rule":"evenodd"},null,-1),nx=[tx];function ox(t,e){return Z(),oe("svg",ex,nx)}const rx=ec(ZN,[["render",ox]]),ix={},sx={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ax=M("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"},null,-1),cx=[ax];function lx(t,e){return Z(),oe("svg",sx,cx)}const ux=ec(ix,[["render",lx]]),hx={},dx={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},px=M("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"},null,-1),fx=[px];function gx(t,e){return Z(),oe("svg",dx,fx)}const mx=ec(hx,[["render",gx]]),vx={},yx={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stoke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},_x=M("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),bx=M("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1),Cx=[_x,bx];function wx(t,e){return Z(),oe("svg",yx,Cx)}const Ex=ec(vx,[["render",wx]]),Tx=["aria-live","data-styled","data-mounted","data-promise","data-removed","data-visible","data-y-position","data-x-position","data-index","data-front","data-swiping","data-type","data-invert","data-swipe-out","data-expanded"],Sx=["data-disabled"],kx={key:1,"data-icon":""},Ax={"data-content":""},Ix={"data-title":""},Rx=4e3,Ox=14,Nx=20,xx=200,Px=vt({__name:"Toast",props:{toast:{type:Object,required:!0},toasts:{type:Array,required:!0},index:{type:Number,required:!0},expanded:{type:Boolean,required:!0},invert:{type:Boolean,required:!0},heights:{type:Array,required:!0},position:{type:String,required:!0},visibleToasts:{type:Number,required:!0},expandByDefault:{type:Boolean,required:!0},closeButton:{type:Boolean,required:!0},interacting:{type:Boolean,required:!0},duration:{type:Number,required:!1},descriptionClass:{type:String,required:!1}},emits:["update:heights","removeToast"],setup(t,{emit:e}){const n=t,o=Pe=>!!Pe.promise,r=ye(!1),i=ye(!1),s=ye(!1),a=ye(!1),c=ye(null),l=ye(0),u=ye(0),h=ye(null),d=ye(null),p=Re(()=>n.index===0),m=Re(()=>n.index+1<=n.visibleToasts),_=Re(()=>n.toast.type),T=Re(()=>n.toast.dismissible),b=n.toast.className||"",C=n.toast.descriptionClassName||"",y=n.toast.style||{},v=Re(()=>n.heights.findIndex(Pe=>Pe.toastId===n.toast.id)||0),w=Re(()=>n.toast.duration||n.duration||Rx),A=ye(0),S=ye(0),E=ye(w.value),O=ye(0),L=ye(null),z=Re(()=>n.position.split("-")),x=Re(()=>n.heights.reduce((Pe,He,it)=>it>=v.value?Pe:Pe+He.height,0)),j=Re(()=>n.toast.invert||n.invert),ae=Re(()=>c.value==="loading"),ie=Re(()=>c.value??(n.toast.type||null)),G=Re(()=>!o(n.toast)&&typeof n.toast.title=="object"),fe=Re(()=>{if(!o(n.toast))return null;switch(c.value){case"loading":return n.toast.loading;case"success":return typeof n.toast.success=="function"?h.value:n.toast.success;case"error":return typeof n.toast.error=="function"?h.value:n.toast.error;default:return null}});Ln(()=>r.value=!0),lo(()=>{S.value=v.value*Ox+x.value});function he(){var Pe,He;(!ae.value||T.value)&&(Ye(),(He=(Pe=n.toast).onDismiss)==null||He.call(Pe,n.toast))}function Ye(){i.value=!0,l.value=S.value;const Pe=n.heights.filter(He=>He.toastId!==n.toast.id);e("update:heights",Pe),setTimeout(()=>{e("removeToast",n.toast)},xx)}const ke=Pe=>{ae||(l.value=S.value,Pe.target.setPointerCapture(Pe.pointerId),Pe.target.tagName!=="BUTTON"&&(s.value=!0,L.value=Pe.clientY))},Be=Pe=>{var He,it,ct,$;if(a.value)return;const le=Number(((He=d.value)==null?void 0:He.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(le)>=Nx){l.value=S.value,(ct=(it=n.toast).onDismiss)==null||ct.call(it,n.toast),Ye(),a.value=!0;return}($=d.value)==null||$.style.setProperty("--swipe-amount","0px"),L.value=null,s.value=!0},nt=Pe=>{var He,it;if(!L.value)return;const ct=Pe.clientY-L.value;if(!(z.value[0]==="top"?ct<0:ct>0)){(He=d.value)==null||He.style.setProperty("--swipe-amount","0px");return}(it=d.value)==null||it.style.setProperty("--swipe-amount",`${ct}px`)};return lo(Pe=>{if(n.toast.promise&&c.value==="loading"||n.toast.duration===1/0)return;let He;const it=()=>{if(O.value<A.value){const $=new Date().getTime()-A.value;E.value=E.value-$}O.value=new Date().getTime()},ct=()=>{A.value=new Date().getTime(),He=setTimeout(()=>{var $,le;(le=($=n.toast).onAutoClose)==null||le.call($,n.toast),Ye()},E.value)};n.expanded||n.interacting?it():ct(),Pe(()=>{clearTimeout(He)})}),Ln(()=>{if(d.value){const Pe=d.value.getBoundingClientRect().height;u.value=Pe;const He=[{toastId:n.toast.id,height:Pe},...n.heights];e("update:heights",He)}}),fi(()=>{if(d.value){const Pe=n.heights.filter(He=>He.toastId!==n.toast.id);e("update:heights",Pe)}}),lo(()=>{n.toast.delete&&Ye()}),(Pe,He)=>(Z(),oe("li",{"aria-live":t.toast.important?"assertive":"polite","aria-atomic":"",role:"status",tabindex:"0",ref_key:"toastRef",ref:d,"data-sonner-toast":"",class:ao(X(b)),"data-styled":!G.value,"data-mounted":r.value,"data-promise":!!t.toast.promise,"data-removed":i.value,"data-visible":m.value,"data-y-position":z.value[0],"data-x-position":z.value[1],"data-index":n.index,"data-front":p.value,"data-swiping":s.value,"data-type":c.value!=="loading"&&c.value?c.value:_.value,"data-invert":j.value,"data-swipe-out":a.value,"data-expanded":!!(n.expanded||n.expandByDefault&&r.value),style:so({"--index":n.index,"--toasts-before":n.index,"--z-index":t.toasts.length-n.index,"--offset":`${i.value?l.value:S.value}px`,"--initial-height":n.expandByDefault?"auto":`${u.value}px`,...X(y)}),onPointerdown:ke,onPointerup:Be,onPointermove:nt},[n.closeButton&&!G.value?(Z(),oe("button",{key:0,"aria-label":"Close toast","data-close-button":"","data-disabled":ae.value,onClick:he},[Oe(Ex)],8,Sx)):Ge("",!0),_.value||t.toast.icon||t.toast.promise?(Z(),oe("div",kx,[typeof t.toast.promise=="function"||_.value==="loading"?(Z(),Ut(WN,{key:0,visible:c.value==="loading"||_.value==="loading"},null,8,["visible"])):Ge("",!0),ie.value==="success"?(Z(),Ut(XN,{key:1})):ie.value==="info"?(Z(),Ut(rx,{key:2})):ie.value==="warning"?(Z(),Ut(ux,{key:3})):ie.value==="error"?(Z(),Ut(mx,{key:4})):Ge("",!0)])):Ge("",!0),M("div",Ax,[M("div",Ix,[typeof t.toast.title=="string"?(Z(),oe(ze,{key:0},[$n(Se(t.toast.title),1)],64)):t.toast.title===void 0||t.toast.title===null?(Z(),oe(ze,{key:1},[$n(Se(fe.value),1)],64)):G.value?(Z(),Ut(jf(t.toast.title),{key:2,onCloseToast:He[0]||(He[0]=()=>{var it;Ye(),(it=t.toast.cancel)!=null&&it.onClick&&t.toast.cancel.onClick()})},null,32)):Ge("",!0)]),t.toast.description?(Z(),oe("div",{key:0,"data-description":"",class:ao(t.descriptionClass+X(C))},Se(t.toast.description),3)):Ge("",!0)]),t.toast.cancel?(Z(),oe("button",{key:2,"data-button":"","data-cancel":"",onClick:He[1]||(He[1]=()=>{var it;Ye(),(it=t.toast.cancel)!=null&&it.onClick&&t.toast.cancel.onClick()})},Se(t.toast.cancel.label),1)):Ge("",!0),t.toast.action?(Z(),oe("button",{key:3,"data-button":"",onClick:He[2]||(He[2]=()=>{var it;Ye(),(it=t.toast.action)==null||it.onClick()})},Se(t.toast.action.label),1)):Ge("",!0)],46,Tx))}}),Mx=["aria-label"],Lx=["dir","data-theme","data-rich-colors","data-y-position","data-x-position"],Dx=3,fC="32px",Ux=4e3,Fx=356,gC=14,Hx=vt({name:"Toaster",inheritAttrs:!1,__name:"Toaster",props:{invert:{type:Boolean,default:!1},theme:{default:"light"},position:{default:"bottom-right"},hotkey:{default:()=>["altKey","KeyT"]},richColors:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},duration:{default:Ux},gap:{default:gC},visibleToasts:{default:Dx},closeButton:{type:Boolean,default:!1},toastOptions:{default:()=>({})},className:{default:""},style:{default:()=>({})},offset:{default:fC},dir:{default:"auto"}},setup(t){const e=t,n=cg(),o=ye([]),r=ye([]),i=ye(!1),s=ye(!1),a=ye(e.theme!=="system"?e.theme:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),c=Re(()=>e.position.split("-")),l=ye(null),u=e.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,"");function h(p){o.value=o.value.filter(({id:m})=>m!==p.id)}function d(){if(typeof window>"u")return"ltr";const p=document.documentElement.getAttribute("dir");return p==="auto"||!p?window.getComputedStyle(document.documentElement).direction:p}return Ln(()=>{const p=_o.subscribe(m=>{if(m.dismiss){o.value=o.value.map(_=>_.id===m.id?{..._,delete:!0}:_);return}ui(()=>{const _=o.value.findIndex(T=>T.id===m.id);_!==-1?o.value.splice(_,1,m):o.value=[m,...o.value]})});fi(()=>{p()})}),Pt(()=>e.theme,p=>{if(p!=="system"){a.value=p;return}p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?a.value="dark":a.value="light"),!(typeof window>"u")&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:m})=>{m?a.value="dark":a.value="light"})}),lo(()=>{o.value.length<=1&&(i.value=!1)}),lo(p=>{function m(_){var T,b;e.hotkey.every(C=>_[C]||_.code===C)&&(i.value=!0,(T=l.value)==null||T.focus()),_.code==="Escape"&&(document.activeElement===l.value||(b=l.value)!=null&&b.contains(document.activeElement))&&(i.value=!1)}document.addEventListener("keydown",m),p(()=>{document.removeEventListener("keydown",m)})}),(p,m)=>{var _;return Z(),oe("section",{"aria-label":`Notifications ${X(u)}`,tabIndex:-1},[M("ol",{ref_key:"listRef",ref:l,"data-sonner-toaster":"",dir:p.dir==="auto"?d():p.dir,tabIndex:-1,"data-theme":p.theme,"data-rich-colors":p.richColors,"data-y-position":c.value[0],"data-x-position":c.value[1],style:so({"--front-toast-height":`${(_=r.value[0])==null?void 0:_.height}px`,"--offset":typeof p.offset=="number"?`${p.offset}px`:p.offset||fC,"--width":`${Fx}px`,"--gap":`${gC}px`,...X(n).style}),onMouseenter:m[1]||(m[1]=T=>i.value=!0),onMousemove:m[2]||(m[2]=T=>i.value=!0),onMouseleave:m[3]||(m[3]=()=>{s.value||(i.value=!1)}),onPointerdown:m[4]||(m[4]=T=>s.value=!1),onPointerup:m[5]||(m[5]=T=>s.value=!1)},[(Z(!0),oe(ze,null,sn(o.value,(T,b)=>{var C,y,v,w;return Z(),Ut(Px,{key:T.id,index:b,toast:T,duration:((C=p.toastOptions)==null?void 0:C.duration)??p.duration,className:(y=p.toastOptions)==null?void 0:y.className,descriptionClassName:(v=p.toastOptions)==null?void 0:v.descriptionClassName,invert:p.invert,visibleToasts:p.visibleToasts,closeButton:p.closeButton,interacting:s.value,position:p.position,style:so((w=p.toastOptions)==null?void 0:w.style),toasts:o.value,expandByDefault:p.expand,gap:p.gap,expanded:i.value,heights:r.value,"onUpdate:heights":m[0]||(m[0]=A=>r.value=A),onRemoveToast:h},null,8,["index","toast","duration","className","descriptionClassName","invert","visibleToasts","closeButton","interacting","position","style","toasts","expandByDefault","gap","expanded","heights"])}),128))],44,Lx)],8,Mx)}}}),qx=["onKeyup"],Bx={style:{height:"100vh"},class:"d-flex flex-column align-items-center"},Kx={id:"maincontent",tabIndex:"-1",class:"d-flex flex-column overflow-auto w-100 h-100"},jx=vt({__name:"App",setup(t){Ln(async()=>{console.log("TESTSTETSTTS"),await g_(),await m_()});const e=()=>{var n;return(n=document.querySelector("main"))==null?void 0:n.focus()};return(n,o)=>{const r=ju("RouterView");return Z(),oe(ze,null,[M("button",{onKeyup:Kt(e,["enter"]),onClick:e,class:"skip-link rounded-3 focus-ring btn bg-white"}," Skip to Main Content ",40,qx),M("div",Bx,[Oe(FN,{role:"navigation"}),Oe(X(Hx),{richColors:"",closeButton:"",expand:!0,position:"top-right"}),M("main",Kx,[Oe(r)])])],64)}}});var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $x(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var r=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,r.get?r:{enumerable:!0,get:function(){return t[o]}})}),n}var vC={exports:{}},yC={exports:{}},_C={exports:{}},bC;function zx(){return bC||(bC=1,function(t,e){(function(n,o){t.exports=o()})(Xn,function(){const n=new Map;return{set(o,r,i){n.has(o)||n.set(o,new Map);const s=n.get(o);if(!s.has(r)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(r,i)},get(o,r){return n.has(o)&&n.get(o).get(r)||null},remove(o,r){if(!n.has(o))return;const i=n.get(o);i.delete(r),i.size===0&&n.delete(o)}}})}(_C)),_C.exports}var CC={exports:{}},Tp={exports:{}},wC;function $r(){return wC||(wC=1,function(t,e){(function(n,o){o(e)})(Xn,function(n){const o="transitionend",r=E=>(E&&window.CSS&&window.CSS.escape&&(E=E.replace(/#([^\s"#']+)/g,(O,L)=>`#${CSS.escape(L)}`)),E),i=E=>E==null?`${E}`:Object.prototype.toString.call(E).match(/\s([a-z]+)/i)[1].toLowerCase(),s=E=>{do E+=Math.floor(Math.random()*1e6);while(document.getElementById(E));return E},a=E=>{if(!E)return 0;let{transitionDuration:O,transitionDelay:L}=window.getComputedStyle(E);const z=Number.parseFloat(O),x=Number.parseFloat(L);return!z&&!x?0:(O=O.split(",")[0],L=L.split(",")[0],(Number.parseFloat(O)+Number.parseFloat(L))*1e3)},c=E=>{E.dispatchEvent(new Event(o))},l=E=>!E||typeof E!="object"?!1:(typeof E.jquery<"u"&&(E=E[0]),typeof E.nodeType<"u"),u=E=>l(E)?E.jquery?E[0]:E:typeof E=="string"&&E.length>0?document.querySelector(r(E)):null,h=E=>{if(!l(E)||E.getClientRects().length===0)return!1;const O=getComputedStyle(E).getPropertyValue("visibility")==="visible",L=E.closest("details:not([open])");if(!L)return O;if(L!==E){const z=E.closest("summary");if(z&&z.parentNode!==L||z===null)return!1}return O},d=E=>!E||E.nodeType!==Node.ELEMENT_NODE||E.classList.contains("disabled")?!0:typeof E.disabled<"u"?E.disabled:E.hasAttribute("disabled")&&E.getAttribute("disabled")!=="false",p=E=>{if(!document.documentElement.attachShadow)return null;if(typeof E.getRootNode=="function"){const O=E.getRootNode();return O instanceof ShadowRoot?O:null}return E instanceof ShadowRoot?E:E.parentNode?p(E.parentNode):null},m=()=>{},_=E=>{E.offsetHeight},T=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,b=[],C=E=>{document.readyState==="loading"?(b.length||document.addEventListener("DOMContentLoaded",()=>{for(const O of b)O()}),b.push(E)):E()},y=()=>document.documentElement.dir==="rtl",v=E=>{C(()=>{const O=T();if(O){const L=E.NAME,z=O.fn[L];O.fn[L]=E.jQueryInterface,O.fn[L].Constructor=E,O.fn[L].noConflict=()=>(O.fn[L]=z,E.jQueryInterface)}})},w=(E,O=[],L=E)=>typeof E=="function"?E(...O):L,A=(E,O,L=!0)=>{if(!L){w(E);return}const z=5,x=a(O)+z;let j=!1;const ae=({target:ie})=>{ie===O&&(j=!0,O.removeEventListener(o,ae),w(E))};O.addEventListener(o,ae),setTimeout(()=>{j||c(O)},x)},S=(E,O,L,z)=>{const x=E.length;let j=E.indexOf(O);return j===-1?!L&&z?E[x-1]:E[0]:(j+=L?1:-1,z&&(j=(j+x)%x),E[Math.max(0,Math.min(j,x-1))])};n.defineJQueryPlugin=v,n.execute=w,n.executeAfterTransition=A,n.findShadowRoot=p,n.getElement=u,n.getNextActiveElement=S,n.getTransitionDurationFromElement=a,n.getUID=s,n.getjQuery=T,n.isDisabled=d,n.isElement=l,n.isRTL=y,n.isVisible=h,n.noop=m,n.onDOMContentLoaded=C,n.parseSelector=r,n.reflow=_,n.toType=i,n.triggerTransitionEnd=c,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})}(Tp,Tp.exports)),Tp.exports}var EC;function tc(){return EC||(EC=1,function(t,e){(function(n,o){t.exports=o($r())})(Xn,function(n){const o=/[^.]*(?=\..*)\.|.*/,r=/\..*/,i=/::\d+$/,s={};let a=1;const c={mouseenter:"mouseover",mouseleave:"mouseout"},l=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function u(A,S){return S&&`${S}::${a++}`||A.uidEvent||a++}function h(A){const S=u(A);return A.uidEvent=S,s[S]=s[S]||{},s[S]}function d(A,S){return function E(O){return w(O,{delegateTarget:A}),E.oneOff&&v.off(A,O.type,S),S.apply(A,[O])}}function p(A,S,E){return function O(L){const z=A.querySelectorAll(S);for(let{target:x}=L;x&&x!==this;x=x.parentNode)for(const j of z)if(j===x)return w(L,{delegateTarget:x}),O.oneOff&&v.off(A,L.type,S,E),E.apply(x,[L])}}function m(A,S,E=null){return Object.values(A).find(O=>O.callable===S&&O.delegationSelector===E)}function _(A,S,E){const O=typeof S=="string",L=O?E:S||E;let z=y(A);return l.has(z)||(z=A),[O,L,z]}function T(A,S,E,O,L){if(typeof S!="string"||!A)return;let[z,x,j]=_(S,E,O);S in c&&(x=(Ye=>function(ke){if(!ke.relatedTarget||ke.relatedTarget!==ke.delegateTarget&&!ke.delegateTarget.contains(ke.relatedTarget))return Ye.call(this,ke)})(x));const ae=h(A),ie=ae[j]||(ae[j]={}),G=m(ie,x,z?E:null);if(G){G.oneOff=G.oneOff&&L;return}const fe=u(x,S.replace(o,"")),he=z?p(A,E,x):d(A,x);he.delegationSelector=z?E:null,he.callable=x,he.oneOff=L,he.uidEvent=fe,ie[fe]=he,A.addEventListener(j,he,z)}function b(A,S,E,O,L){const z=m(S[E],O,L);z&&(A.removeEventListener(E,z,!!L),delete S[E][z.uidEvent])}function C(A,S,E,O){const L=S[E]||{};for(const[z,x]of Object.entries(L))z.includes(O)&&b(A,S,E,x.callable,x.delegationSelector)}function y(A){return A=A.replace(r,""),c[A]||A}const v={on(A,S,E,O){T(A,S,E,O,!1)},one(A,S,E,O){T(A,S,E,O,!0)},off(A,S,E,O){if(typeof S!="string"||!A)return;const[L,z,x]=_(S,E,O),j=x!==S,ae=h(A),ie=ae[x]||{},G=S.startsWith(".");if(typeof z<"u"){if(!Object.keys(ie).length)return;b(A,ae,x,z,L?E:null);return}if(G)for(const fe of Object.keys(ae))C(A,ae,fe,S.slice(1));for(const[fe,he]of Object.entries(ie)){const Ye=fe.replace(i,"");(!j||S.includes(Ye))&&b(A,ae,x,he.callable,he.delegationSelector)}},trigger(A,S,E){if(typeof S!="string"||!A)return null;const O=n.getjQuery(),L=y(S),z=S!==L;let x=null,j=!0,ae=!0,ie=!1;z&&O&&(x=O.Event(S,E),O(A).trigger(x),j=!x.isPropagationStopped(),ae=!x.isImmediatePropagationStopped(),ie=x.isDefaultPrevented());const G=w(new Event(S,{bubbles:j,cancelable:!0}),E);return ie&&G.preventDefault(),ae&&A.dispatchEvent(G),G.defaultPrevented&&x&&x.preventDefault(),G}};function w(A,S={}){for(const[E,O]of Object.entries(S))try{A[E]=O}catch{Object.defineProperty(A,E,{configurable:!0,get(){return O}})}return A}return v})}(CC)),CC.exports}var TC={exports:{}},SC={exports:{}},kC;function AC(){return kC||(kC=1,function(t,e){(function(n,o){t.exports=o()})(Xn,function(){function n(r){if(r==="true")return!0;if(r==="false")return!1;if(r===Number(r).toString())return Number(r);if(r===""||r==="null")return null;if(typeof r!="string")return r;try{return JSON.parse(decodeURIComponent(r))}catch{return r}}function o(r){return r.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`)}return{setDataAttribute(r,i,s){r.setAttribute(`data-bs-${o(i)}`,s)},removeDataAttribute(r,i){r.removeAttribute(`data-bs-${o(i)}`)},getDataAttributes(r){if(!r)return{};const i={},s=Object.keys(r.dataset).filter(a=>a.startsWith("bs")&&!a.startsWith("bsConfig"));for(const a of s){let c=a.replace(/^bs/,"");c=c.charAt(0).toLowerCase()+c.slice(1,c.length),i[c]=n(r.dataset[a])}return i},getDataAttribute(r,i){return n(r.getAttribute(`data-bs-${o(i)}`))}}})}(SC)),SC.exports}var IC;function Sp(){return IC||(IC=1,function(t,e){(function(n,o){t.exports=o(AC(),$r())})(Xn,function(n,o){class r{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(s){return s=this._mergeConfigObj(s),s=this._configAfterMerge(s),this._typeCheckConfig(s),s}_configAfterMerge(s){return s}_mergeConfigObj(s,a){const c=o.isElement(a)?n.getDataAttribute(a,"config"):{};return{...this.constructor.Default,...typeof c=="object"?c:{},...o.isElement(a)?n.getDataAttributes(a):{},...typeof s=="object"?s:{}}}_typeCheckConfig(s,a=this.constructor.DefaultType){for(const[c,l]of Object.entries(a)){const u=s[c],h=o.isElement(u)?"element":o.toType(u);if(!new RegExp(l).test(h))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${c}" provided type "${h}" but expected type "${l}".`)}}}return r})}(TC)),TC.exports}var RC;function Wx(){return RC||(RC=1,function(t,e){(function(n,o){t.exports=o(zx(),tc(),Sp(),$r())})(Xn,function(n,o,r,i){const s="5.3.2";class a extends r{constructor(l,u){super(),l=i.getElement(l),l&&(this._element=l,this._config=this._getConfig(u),n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n.remove(this._element,this.constructor.DATA_KEY),o.off(this._element,this.constructor.EVENT_KEY);for(const l of Object.getOwnPropertyNames(this))this[l]=null}_queueCallback(l,u,h=!0){i.executeAfterTransition(l,u,h)}_getConfig(l){return l=this._mergeConfigObj(l,this._element),l=this._configAfterMerge(l),this._typeCheckConfig(l),l}static getInstance(l){return n.get(i.getElement(l),this.DATA_KEY)}static getOrCreateInstance(l,u={}){return this.getInstance(l)||new this(l,typeof u=="object"?u:null)}static get VERSION(){return s}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(l){return`${l}${this.EVENT_KEY}`}}return a})}(yC)),yC.exports}var OC={exports:{}},NC;function ou(){return NC||(NC=1,function(t,e){(function(n,o){t.exports=o($r())})(Xn,function(n){const o=i=>{let s=i.getAttribute("data-bs-target");if(!s||s==="#"){let a=i.getAttribute("href");if(!a||!a.includes("#")&&!a.startsWith("."))return null;a.includes("#")&&!a.startsWith("#")&&(a=`#${a.split("#")[1]}`),s=a&&a!=="#"?n.parseSelector(a.trim()):null}return s},r={find(i,s=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(s,i))},findOne(i,s=document.documentElement){return Element.prototype.querySelector.call(s,i)},children(i,s){return[].concat(...i.children).filter(a=>a.matches(s))},parents(i,s){const a=[];let c=i.parentNode.closest(s);for(;c;)a.push(c),c=c.parentNode.closest(s);return a},prev(i,s){let a=i.previousElementSibling;for(;a;){if(a.matches(s))return[a];a=a.previousElementSibling}return[]},next(i,s){let a=i.nextElementSibling;for(;a;){if(a.matches(s))return[a];a=a.nextElementSibling}return[]},focusableChildren(i){const s=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(a=>`${a}:not([tabindex^="-"])`).join(",");return this.find(s,i).filter(a=>!n.isDisabled(a)&&n.isVisible(a))},getSelectorFromElement(i){const s=o(i);return s&&r.findOne(s)?s:null},getElementFromSelector(i){const s=o(i);return s?r.findOne(s):null},getMultipleElementsFromSelector(i){const s=o(i);return s?r.find(s):[]}};return r})}(OC)),OC.exports}var xC={exports:{}},PC;function Gx(){return PC||(PC=1,function(t,e){(function(n,o){t.exports=o(tc(),Sp(),$r())})(Xn,function(n,o,r){const i="backdrop",s="fade",a="show",c=`mousedown.bs.${i}`,l={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},u={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class h extends o{constructor(p){super(),this._config=this._getConfig(p),this._isAppended=!1,this._element=null}static get Default(){return l}static get DefaultType(){return u}static get NAME(){return i}show(p){if(!this._config.isVisible){r.execute(p);return}this._append();const m=this._getElement();this._config.isAnimated&&r.reflow(m),m.classList.add(a),this._emulateAnimation(()=>{r.execute(p)})}hide(p){if(!this._config.isVisible){r.execute(p);return}this._getElement().classList.remove(a),this._emulateAnimation(()=>{this.dispose(),r.execute(p)})}dispose(){this._isAppended&&(n.off(this._element,c),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const p=document.createElement("div");p.className=this._config.className,this._config.isAnimated&&p.classList.add(s),this._element=p}return this._element}_configAfterMerge(p){return p.rootElement=r.getElement(p.rootElement),p}_append(){if(this._isAppended)return;const p=this._getElement();this._config.rootElement.append(p),n.on(p,c,()=>{r.execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(p){r.executeAfterTransition(p,this._getElement(),this._config.isAnimated)}}return h})}(xC)),xC.exports}var kp={exports:{}},MC;function Vx(){return MC||(MC=1,function(t,e){(function(n,o){o(e,tc(),ou(),$r())})(Xn,function(n,o,r,i){const s=(a,c="hide")=>{const l=`click.dismiss${a.EVENT_KEY}`,u=a.NAME;o.on(document,l,`[data-bs-dismiss="${u}"]`,function(h){if(["A","AREA"].includes(this.tagName)&&h.preventDefault(),i.isDisabled(this))return;const d=r.getElementFromSelector(this)||this.closest(`.${u}`);a.getOrCreateInstance(d)[c]()})};n.enableDismissTrigger=s,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})}(kp,kp.exports)),kp.exports}var LC={exports:{}},DC;function Yx(){return DC||(DC=1,function(t,e){(function(n,o){t.exports=o(tc(),ou(),Sp())})(Xn,function(n,o,r){const i="focustrap",s=".bs.focustrap",a=`focusin${s}`,c=`keydown.tab${s}`,l="Tab",u="forward",h="backward",d={autofocus:!0,trapElement:null},p={autofocus:"boolean",trapElement:"element"};class m extends r{constructor(T){super(),this._config=this._getConfig(T),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return d}static get DefaultType(){return p}static get NAME(){return i}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),n.off(document,s),n.on(document,a,T=>this._handleFocusin(T)),n.on(document,c,T=>this._handleKeydown(T)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,n.off(document,s))}_handleFocusin(T){const{trapElement:b}=this._config;if(T.target===document||T.target===b||b.contains(T.target))return;const C=o.focusableChildren(b);C.length===0?b.focus():this._lastTabNavDirection===h?C[C.length-1].focus():C[0].focus()}_handleKeydown(T){T.key===l&&(this._lastTabNavDirection=T.shiftKey?h:u)}}return m})}(LC)),LC.exports}var UC={exports:{}},FC;function Qx(){return FC||(FC=1,function(t,e){(function(n,o){t.exports=o(AC(),ou(),$r())})(Xn,function(n,o,r){const i=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",s=".sticky-top",a="padding-right",c="margin-right";class l{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,a,d=>d+h),this._setElementAttributes(i,a,d=>d+h),this._setElementAttributes(s,c,d=>d-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,a),this._resetElementAttributes(i,a),this._resetElementAttributes(s,c)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,d,p){const m=this.getWidth(),_=T=>{if(T!==this._element&&window.innerWidth>T.clientWidth+m)return;this._saveInitialAttribute(T,d);const b=window.getComputedStyle(T).getPropertyValue(d);T.style.setProperty(d,`${p(Number.parseFloat(b))}px`)};this._applyManipulationCallback(h,_)}_saveInitialAttribute(h,d){const p=h.style.getPropertyValue(d);p&&n.setDataAttribute(h,d,p)}_resetElementAttributes(h,d){const p=m=>{const _=n.getDataAttribute(m,d);if(_===null){m.style.removeProperty(d);return}n.removeDataAttribute(m,d),m.style.setProperty(d,_)};this._applyManipulationCallback(h,p)}_applyManipulationCallback(h,d){if(r.isElement(h)){d(h);return}for(const p of o.find(h,this._element))d(p)}}return l})}(UC)),UC.exports}(function(t,e){(function(n,o){t.exports=o(Wx(),tc(),ou(),Gx(),Vx(),Yx(),$r(),Qx())})(Xn,function(n,o,r,i,s,a,c,l){const u="modal",h=".bs.modal",d=".data-api",p="Escape",m=`hide${h}`,_=`hidePrevented${h}`,T=`hidden${h}`,b=`show${h}`,C=`shown${h}`,y=`resize${h}`,v=`click.dismiss${h}`,w=`mousedown.dismiss${h}`,A=`keydown.dismiss${h}`,S=`click${h}${d}`,E="modal-open",O="fade",L="show",z="modal-static",x=".modal.show",j=".modal-dialog",ae=".modal-body",ie='[data-bs-toggle="modal"]',G={backdrop:!0,focus:!0,keyboard:!0},fe={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class he extends n{constructor(ke,Be){super(ke,Be),this._dialog=r.findOne(j,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new l,this._addEventListeners()}static get Default(){return G}static get DefaultType(){return fe}static get NAME(){return u}toggle(ke){return this._isShown?this.hide():this.show(ke)}show(ke){this._isShown||this._isTransitioning||o.trigger(this._element,b,{relatedTarget:ke}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(E),this._adjustDialog(),this._backdrop.show(()=>this._showElement(ke)))}hide(){!this._isShown||this._isTransitioning||o.trigger(this._element,m).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(L),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){o.off(window,h),o.off(this._dialog,h),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new i({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new a({trapElement:this._element})}_showElement(ke){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const Be=r.findOne(ae,this._dialog);Be&&(Be.scrollTop=0),c.reflow(this._element),this._element.classList.add(L);const nt=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,o.trigger(this._element,C,{relatedTarget:ke})};this._queueCallback(nt,this._dialog,this._isAnimated())}_addEventListeners(){o.on(this._element,A,ke=>{if(ke.key===p){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),o.on(window,y,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),o.on(this._element,w,ke=>{o.one(this._element,v,Be=>{if(!(this._element!==ke.target||this._element!==Be.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(E),this._resetAdjustments(),this._scrollBar.reset(),o.trigger(this._element,T)})}_isAnimated(){return this._element.classList.contains(O)}_triggerBackdropTransition(){if(o.trigger(this._element,_).defaultPrevented)return;const ke=this._element.scrollHeight>document.documentElement.clientHeight,Be=this._element.style.overflowY;Be==="hidden"||this._element.classList.contains(z)||(ke||(this._element.style.overflowY="hidden"),this._element.classList.add(z),this._queueCallback(()=>{this._element.classList.remove(z),this._queueCallback(()=>{this._element.style.overflowY=Be},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const ke=this._element.scrollHeight>document.documentElement.clientHeight,Be=this._scrollBar.getWidth(),nt=Be>0;if(nt&&!ke){const Pe=c.isRTL()?"paddingLeft":"paddingRight";this._element.style[Pe]=`${Be}px`}if(!nt&&ke){const Pe=c.isRTL()?"paddingRight":"paddingLeft";this._element.style[Pe]=`${Be}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(ke,Be){return this.each(function(){const nt=he.getOrCreateInstance(this,ke);if(typeof ke=="string"){if(typeof nt[ke]>"u")throw new TypeError(`No method named "${ke}"`);nt[ke](Be)}})}}return o.on(document,S,ie,function(Ye){const ke=r.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&Ye.preventDefault(),o.one(ke,b,nt=>{nt.defaultPrevented||o.one(ke,T,()=>{c.isVisible(this)&&this.focus()})});const Be=r.findOne(x);Be&&he.getInstance(Be).hide(),he.getOrCreateInstance(ke).toggle(this)}),s.enableDismissTrigger(he),c.defineJQueryPlugin(he),he})})(vC);var Jx=vC.exports;const Xx=mC(Jx),Zx=["id"],eP={class:"modal-dialog modal-dialog-centered"},tP={style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"},class:"modal-content"},Ni=vt({__name:"Modal",props:{visible:Boolean,modalId:String},emits:["onCancel"],setup(t,{emit:e}){let n=null;const o=t,r=e;return Ln(()=>{const i=document.getElementById(o.modalId);i&&(n=new Xx(i),i.addEventListener("hide.bs.modal",()=>{r("onCancel")}))}),Pt(()=>o.visible,i=>{n&&(i?n.show():n.hide())}),(i,s)=>(Z(),oe("div",{class:"modal fade",tabindex:"-1",id:o.modalId},[M("div",eP,[M("div",tP,[mr(i.$slots,"default")])])],8,Zx))}}),HC=t=>new Intl.DateTimeFormat("fi-FI",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Europe/Helsinki"}).format(new Date(t)),nP=t=>new Intl.DateTimeFormat("fi-FI",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"Europe/Helsinki"}).format(new Date(t)),Ap=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${o}`},oP=async t=>{try{return(await At.post("/catshows",t)).data}catch(e){console.log(e)}},rP=async()=>{try{return(await At.get("/catshows")).data}catch(t){console.log(t)}},iP=async t=>{try{return(await At.get(`/catshows/${t}`)).data}catch(e){console.log(e)}},sP=async(t,e)=>{try{return(await At.post(`/catshows/${t}/join`,{catIds:e})).data}catch(n){console.log(n)}},aP=async t=>{try{return(await At.delete(`/catshows/${t}/leave`)).data}catch(e){console.log(e)}},cP=async(t,e)=>(await At.post(`/catshows/${t}/place`,e)).data,lP=async(t,e)=>{if(e)try{const n=new FormData;return n.append("file",e),(await At.post(`/catshows/${t}/photos`,n)).data}catch(n){console.log(n)}},xi={addCatShowPhoto:lP,createCatShowEvent:oP,getEvents:rP,getEventById:iP,joinEvent:sP,leaveEvent:aP,assignCatPlacing:cP},uP={class:"w-100 h-100 d-flex flex-column"},hP={class:"d-flex gap-3 py-3 sticky-top bg-white align-items-center"},dP={class:"col-12 col-sm-4"},pP=["placeholder"],fP={class:"p-1"},gP={class:"d-flex m-2 mt-auto"},mP={"aria-label":"Page navigation",class:"me-auto mt-auto"},vP={class:"d-flex gap-1"},yP=["onKeyup","onClick"],ru=vt({__name:"List",props:{items:{type:Array,required:!0},itemsPerPage:{type:Number,default:8},searchQueryPlaceholder:{type:String,default:"List.Search"}},setup(t){const e=t,{t:n}=Jn(),o=ye(""),r=ye(1),i=Re(()=>Math.ceil(s.value.length/e.itemsPerPage)),s=ye([]),a=Re(()=>{const u=(r.value-1)*e.itemsPerPage;return s.value.slice(u,u+e.itemsPerPage)}),c=u=>{u>=1&&u<=i.value&&(r.value=u)},l=u=>u?(console.log(u),u.toString().toLowerCase().includes(o.value.toLowerCase())):!1;return lo(()=>{o.value?(r.value=1,s.value=e.items.filter(u=>Object.values(u).some(h=>l(h)))):s.value=e.items}),(u,h)=>(Z(),oe("div",uP,[M("div",hP,[M("div",dP,[wn(M("input",{"data-testid":"cat-search-input",class:"form-control",type:"text","onUpdate:modelValue":h[0]||(h[0]=d=>o.value=d),placeholder:X(n)(t.searchQueryPlaceholder)},null,8,pP),[[An,o.value]])])]),M("div",fP,[(Z(!0),oe(ze,null,sn(a.value,d=>(Z(),oe("div",{key:d.id},[mr(u.$slots,"default",{item:d})]))),128))]),M("div",gP,[M("nav",mP,[M("div",vP,[(Z(!0),oe(ze,null,sn(i.value,d=>(Z(),oe("li",{tabindex:"0",onKeyup:Kt(p=>c(d),["enter"]),onClick:p=>c(d),class:ao(["btn border focus-ring hover-bg",{"bg-primary":r.value===d,"text-white":r.value===d}]),key:d},Se(d),43,yP))),128))])]),mr(u.$slots,"action")])]))}}),_P={class:"w-100 h-100 p-0 p-sm-5 d-flex flex-column align-items-center"},bP={class:"p-2 p-sm-5 rounded col-12 col-lg-8 h-100 d-flex flex-column"},CP=["onKeyup","onClick"],wP={class:"text-body-secondary"},EP={style:{"font-size":"12px","font-weight":"bold","margin-top":"auto"}},TP={class:"d-flex flex-column w-100 p-4 gap-4"},SP={for:"event-name",class:"form-label cursor-pointer"},kP={for:"event-description",class:"form-label cursor-pointer"},AP={for:"event-location",class:"form-label cursor-pointer"},IP=M("label",{for:"start-date",class:"form-label cursor-pointer"},"Start Date",-1),RP=M("label",{for:"end-date",class:"form-label cursor-pointer"},"End Date",-1),OP=vt({__name:"CatShowList",setup(t){const e=Va(),{t:n}=Jn(),o=ye({name:"",description:"",location:"",startDate:Ap(),endDate:Ap()}),r=ye(!1),{data:i,refetch:s}=mo({queryKey:["catshows"],queryFn:()=>xi.getEvents()}),a=Lr({mutationFn:()=>xi.createCatShowEvent(o.value),onSuccess:()=>{jr.info("Tapahtuma luotu"),s()}}),c=l=>e.push(`/catshows/${l}`);return(l,u)=>(Z(),oe(ze,null,[M("div",_P,[M("div",bP,[M("h3",null,Se(X(n)("CatShowList.catShows")),1),X(i)?(Z(),Ut(ru,{key:0,searchQueryPlaceholder:X(n)("CatShowList.searchInput"),items:X(i),itemsPerPage:7},{default:wt(({item:h})=>[M("div",{tabindex:"0",onKeyup:Kt(()=>c(h.id),["enter"]),onClick:()=>c(h.id),class:"d-flex gap-4 border-bottom px-3 py-2 align-items-center pointer hover-bg justify-content-between focus-ring"},[M("div",null,[M("div",null,Se(h.name),1),M("span",wP,Se(h.location),1)]),M("div",EP,Se(`${X(HC)(h.startDate)} -  ${X(HC)(h.endDate)}`),1)],40,CP)]),action:wt(()=>[X(qd)("CreateEvent")?(Z(),oe("button",{key:0,onClick:u[0]||(u[0]=h=>r.value=!0),type:"button",class:"btn btn-primary ms-auto px-5 mt-2"},Se(X(n)("CatShowList.addCatShow"))+" + ",1)):Ge("",!0)]),_:1},8,["searchQueryPlaceholder","items"])):Ge("",!0)])]),Oe(Ni,{modalId:"event-modal",onOnCancel:u[7]||(u[7]=h=>r.value=!1),visible:r.value},{default:wt(()=>[M("div",TP,[M("div",null,[M("label",SP,Se(X(n)("CatShowList.eventNameInput")),1),wn(M("input",{id:"event-name",type:"text",class:"form-control","onUpdate:modelValue":u[1]||(u[1]=h=>o.value.name=h)},null,512),[[An,o.value.name]])]),M("div",null,[M("label",kP,Se(X(n)("CatShowList.eventDescriptionInput")),1),wn(M("input",{id:"event-description",type:"text",class:"form-control","onUpdate:modelValue":u[2]||(u[2]=h=>o.value.description=h)},null,512),[[An,o.value.description]])]),M("div",null,[M("label",AP,Se(X(n)("CatShowList.eventLocationInput")),1),wn(M("input",{id:"event-location",type:"text",class:"form-control","onUpdate:modelValue":u[3]||(u[3]=h=>o.value.location=h)},null,512),[[An,o.value.location]])]),M("div",null,[IP,wn(M("input",{id:"start-date",type:"date",class:"form-control","onUpdate:modelValue":u[4]||(u[4]=h=>o.value.startDate=h)},null,512),[[An,o.value.startDate]])]),M("div",null,[RP,wn(M("input",{id:"end-date",type:"date",class:"form-control","onUpdate:modelValue":u[5]||(u[5]=h=>o.value.endDate=h)},null,512),[[An,o.value.endDate]])]),M("button",{onClick:u[6]||(u[6]=()=>{X(a).mutate(),r.value=!1}),type:"button",class:"btn btn-primary ms-auto px-5"}," Luo tapahtuma + ")])]),_:1},8,["visible"])],64))}}),NP={class:"d-flex w-100 align-items-center justify-content-start gap-3"},xP=["src"],PP={class:"w-100"},MP={class:"w-100 d-flex"},LP={class:"gap-2 align-items-center d-flex"},nc=vt({__name:"CatListItem",props:{cat:{type:Object,required:!0}},setup(t){const e=Va(),n=r=>e.push(`/cats/${r}`),o=r=>r==="Male"?"#60a5fa":"#fb7185";return(r,i)=>(Z(),oe("div",{tabindex:"0",onKeyup:i[0]||(i[0]=Kt(s=>n(t.cat.id),["enter"])),onClick:i[1]||(i[1]=s=>n(t.cat.id)),class:"hover-bg focus-ring border-bottom gap-3 p-3 d-flex justify-content-between align-items-center w-100"},[M("div",NP,[mr(r.$slots,"medal"),M("img",{src:t.cat.imageUrl,class:"rounded-circle",height:"30",width:"30",style:so([{"object-fit":"fill",border:"2px solid"},{borderColor:o(t.cat.sex)}])},null,12,xP),M("span",null,Se(t.cat.name),1)]),M("div",PP,Se(t.cat.breed),1),M("div",MP,Se(X(nP)(t.cat.birthDate)),1),M("div",LP,[mr(r.$slots,"actions")])],32))}}),qC=t=>{if(t===1)return"#fee101";if(t===2)return"#d7d7d7";if(t===3)return"#cd7f32"};var BC={exports:{}};const DP=$x(qT);(function(){var t={744:function(r,i){i.Z=(s,a)=>{const c=s.__vccOpts||s;for(const[l,u]of a)c[l]=u;return c}}},e={};function n(r){var i=e[r];if(i!==void 0)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.d=function(r,i){for(var s in i)n.o(i,s)&&!n.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:i[s]})},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var o={};(function(){n.r(o),n.d(o,{default:function(){return bU}});var r=DP,i={key:0,ref:"container",class:"fslightbox-container fslightbox-full-dimension fslightbox-fade-in-strong"},s=".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0, 0, 0.7, 1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightboxfis{animation:fslightboxfis .3s cubic-bezier(0, 0, 0.7, 1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightboxfis{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0 !important}.fslightbox-opacity-1{opacity:1 !important}.fslightbox-scrollbarfix{padding-right:17px}.fslightboxtt{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30, 30, 30, 0.9), black 1810%);z-index:9999999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media(min-width: 476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media(min-width: 768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media(min-width: 768px){.fslightbox-slide-btn{padding:10px}}@media(min-width: 1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-previous-container{left:0}@media(max-width: 475.99px){.fslightbox-slide-btn-previous-container{padding-left:3px}}.fslightbox-slide-btn-next-container{right:0;padding-left:12px;padding-right:3px}@media(min-width: 476px){.fslightbox-slide-btn-next-container{padding-left:22px}}@media(min-width: 768px){.fslightbox-slide-btn-next-container{padding-left:30px}}@media(min-width: 476px){.fslightbox-slide-btn-next-container{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightboxin{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightboxl{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:67px;height:67px}.fslightboxl div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightboxl 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite}.fslightboxl div:nth-child(1){animation-delay:-0.45s}.fslightboxl div:nth-child(2){animation-delay:-0.3s}.fslightboxl div:nth-child(3){animation-delay:-0.15s}@keyframes fslightboxl{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0;transform:translateZ(0);margin:auto;backface-visibility:hidden}",a="fslightbox-",c="".concat(a,"styles"),l="".concat(a,"cursor-grabbing"),u="".concat(a,"open"),h="".concat(a,"fade-in"),d="".concat(a,"fade-out"),p=d+"-strong",m="".concat(a,"opacity-"),_="".concat(m,"1"),T="".concat(a,"source");function b(){var N=document.createElement("style");N.className=c,N.appendChild(document.createTextNode(s)),document.head.appendChild(N)}function C(N){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},C(N)}(typeof document>"u"?"undefined":C(document))==="object"&&b();var y=[],v="fslightbox-types";function w(N){var D,B=N.props,V=0,W={};this.getSourceTypeFromLocalStorageByUrl=function(ue){return D[ue]?D[ue]:ee(ue)},this.handleReceivedSourceTypeForUrl=function(ue,me){if(W[me]===!1&&(V--,ue!=="invalid"?W[me]=ue:delete W[me],V===0)){(function(Ae,je){for(var Dt in je)Ae[Dt]=je[Dt]})(D,W);try{localStorage.setItem(v,JSON.stringify(D))}catch{}}};var ee=function(ue){V++,W[ue]=!1};if(B.disableLocalStorage)this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){};else{try{D=JSON.parse(localStorage.getItem(v))}catch{}D||(D={},this.getSourceTypeFromLocalStorageByUrl=ee)}}var A="image",S="video",E="youtube",O="custom",L="invalid";function z(N){var D=N.componentsServices.isLightboxOpenManager,B=N.elements.sourcesComponents,V=N.sawu;this.runActionsForSourceTypeAndIndex=function(W,ee){var ue;switch(W){case A:ue="I";break;case S:ue="V";break;case E:ue="Y";break;case O:ue="C";break;default:ue="In"}B[ee]=ue,D.get()&&V[ee]()}}function x(N,D,B){var V=N.props,W=V.types,ee=V.type,ue=V.sources;this.getTypeSetByClientForIndex=function(me){var Ae;return W&&W[me]?Ae=W[me]:ee&&(Ae=ee),Ae},this.retrieveTypeWithXhrForIndex=function(me){(function(Ae,je){var Dt=document.createElement("a");Dt.href=Ae;var wo=Dt.hostname;if(wo==="www.youtube.com"||wo==="youtu.be")return je(E);var bt=new XMLHttpRequest;bt.onreadystatechange=function(){if(bt.readyState!==4){if(bt.readyState===2){var qn,ar=bt.getResponseHeader("content-type");switch(ar.slice(0,ar.indexOf("/"))){case"image":qn=A;break;case"video":qn=S;break;default:qn=L}bt.onreadystatechange=null,bt.abort(),je(qn)}}else je(L)},bt.open("GET",Ae),bt.send()})(ue[me],function(Ae){D.handleReceivedSourceTypeForUrl(Ae,ue[me]),B.runActionsForSourceTypeAndIndex(Ae,me)})}}var j=300;function ae(N){var D=this,B=N.componentsServices,V=B.isFullscreenOpenManager,W=B.isLightboxOpenManager,ee=N.core,ue=ee.eventsDispatcher,me=ee.globalEventsController,Ae=ee.scrollbarRecompensor,je=N.elements,Dt=N.fs,wo=N.props,bt=N.sourcePointerProps,qn=N.timeout;this.isLightboxFadingOut=!1,this.runActions=function(){D.isLightboxFadingOut=!0,je.container.classList.add(p),me.removeListeners(),wo.exitFullscreenOnClose&&V.get()&&Dt.exitFullscreen(),qn(function(){D.isLightboxFadingOut=!1,bt.isPointering=!1,je.container.classList.remove(p),document.documentElement.classList.remove(u),Ae.removeRecompense(),W.set(!1),ue.dispatch("onClose")},j-30)}}function ie(N){var D=N.core,B=D.lightboxCloser,V=D.slideChangeFacade,W=N.fs;this.listener=function(ee){switch(ee.key){case"Escape":B.closeLightbox();break;case"ArrowLeft":V.changeToPrevious();break;case"ArrowRight":V.changeToNext();break;case"F11":ee.preventDefault(),W.toggleFullscreen()}}}function G(N){var D=N.componentsServices,B=N.elements,V=N.smw,W=N.sourcePointerProps,ee=N.stageIndexes;function ue(me,Ae){V[me].v(W.swipedX)[Ae]()}this.runActionsForEvent=function(me){D.showSlideSwipingHoverer(),B.container.classList.add(l),W.swipedX=me.screenX-W.downScreenX,ue(ee.current,"z"),ee.previous!==void 0&&W.swipedX>0?ue(ee.previous,"ne"):ee.next!==void 0&&W.swipedX<0&&ue(ee.next,"p")}}function fe(N){var D=N.props.sources,B=N.resolve,V=N.sourcePointerProps,W=B(G);D.length===1?this.listener=function(){V.swipedX=1}:this.listener=function(ee){V.isPointering&&W.runActionsForEvent(ee)}}function he(N){var D=N.core.slideIndexChanger,B=N.smw,V=N.stageIndexes,W=N.sws;function ee(me){var Ae=B[V.current];Ae.a(),Ae[me]()}function ue(me,Ae){me!==void 0&&(B[me].s(),B[me][Ae]())}this.p=function(){var me=V.previous;if(me===void 0)ee("z");else{ee("p");var Ae=V.next;D.changeTo(me);var je=V.previous;W.d(je),W.b(Ae),ee("z"),ue(je,"ne")}},this.n=function(){var me=V.next;if(me===void 0)ee("z");else{ee("ne");var Ae=V.previous;D.changeTo(me);var je=V.next;W.d(je),W.b(Ae),ee("z"),ue(je,"p")}}}function Ye(N){var D=N.componentsServices,B=N.core.lightboxCloser,V=N.elements,W=N.resolve,ee=N.sourcePointerProps,ue=W(he);this.runNoSwipeActions=function(){D.hideSlideSwipingHoverer(),ee.isSourceDownEventTarget||B.closeLightbox(),ee.isPointering=!1},this.runActions=function(){ee.swipedX>0?ue.p():ue.n(),D.hideSlideSwipingHoverer(),V.container.classList.remove(l),ee.isPointering=!1}}function ke(N){var D=N.resolve,B=N.sourcePointerProps,V=D(Ye);this.listener=function(){B.isPointering&&(B.swipedX?V.runActions():V.runNoSwipeActions())}}function Be(N,D){var B=N.classList;B.contains(D)&&B.remove(D)}function nt(N,D,B){for(var V=0;V<N.props.sources.length;V++)N.collections[D][V]=N.resolve(B,[V])}function Pe(N,D,B,V){var W=N.data,ee=N.elements.sources,ue=B/V,me=0;this.adjustSize=function(){if((me=W.maxSourceWidth/ue)<W.maxSourceHeight)return B<W.maxSourceWidth&&(me=V),Ae();me=V>W.maxSourceHeight?W.maxSourceHeight:V,Ae()};var Ae=function(){var je=ee[D].style;je.width=me*ue+"px",je.height=me+"px"}}function He(N,D){var B=this,V=N.collections.sourceSizers,W=N.elements.sources,ee=N.isl,ue=N.resolve,me=N.saw,Ae=N.sawu;function je(Dt,wo){V[D]=ue(Pe,[D,Dt,wo]),V[D].adjustSize()}this.runActions=function(Dt,wo){ee[D]=!0,Ae[D](),W[D].classList.add(_),me[D].classList.add("fslightboxfis"),je(Dt,wo),B.runActions=je}}function it(N,D){var B,V=this,W=N.elements.sources,ee=N.props,ue=(0,N.resolve)(He,[D]);this.handleImageLoad=function(me){var Ae=me.target,je=Ae.naturalWidth,Dt=Ae.naturalHeight;ue.runActions(je,Dt)},this.handleVideoLoad=function(me){var Ae=me.target,je=Ae.videoWidth,Dt=Ae.videoHeight;B=!0,ue.runActions(je,Dt)},this.handleNotMetaDatedVideoLoad=function(){B||V.handleYoutubeLoad()},this.handleYoutubeLoad=function(){var me=1920,Ae=1080;ee.maxYoutubeVideoDimensions&&(me=ee.maxYoutubeVideoDimensions.width,Ae=ee.maxYoutubeVideoDimensions.height),ue.runActions(me,Ae)},this.handleCustomLoad=function(){var me=W[D];if(me){var Ae=me.offsetWidth,je=me.offsetHeight;Ae&&je?ue.runActions(Ae,je):setTimeout(V.handleCustomLoad)}}}function ct(N){var D=N.componentsServices.isLightboxOpenManager,B=N.core,V=B.eventsDispatcher,W=B.globalEventsController,ee=B.scrollbarRecompensor,ue=B.sourceDisplayFacade,me=B.windowResizeActioner,Ae=(N.elements,N.st),je=N.stageIndexes,Dt=N.sws;function wo(){ue.displaySourcesWhichShouldBeDisplayed(),document.documentElement.classList.add("fslightbox-open"),ee.addRecompense(),W.attachListeners(),me.runActions(),V.dispatch("onOpen")}N.o=function(){nt(N,"sourceLoadHandlers",it),D.set(!0,function(){Dt.b(je.previous),Dt.b(je.current),Dt.b(je.next),Ae.u(),Dt.c(),Dt.a(),wo(),V.dispatch("onShow")})},N.i=function(){N.ii=!0,nt(N,"sourceLoadHandlers",it),function(bt){var qn,ar,ea;ar=(qn=bt).core.eventsDispatcher,ea=qn.props,ar.dispatch=function(Te){ea[Te]&&ea[Te]()},function(Te){var dt=Te.componentsServices.isFullscreenOpenManager,Ie=Te.fs,qe=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];function Xe(Ze){for(var $e=0;$e<qe.length;$e++)document[Ze](qe[$e],Ct)}function Ct(){dt.set(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)}Ie.enterFullscreen=function(){dt.set(!0);var Ze=document.documentElement;Ze.requestFullscreen?Ze.requestFullscreen():Ze.mozRequestFullScreen?Ze.mozRequestFullScreen():Ze.webkitRequestFullscreen?Ze.webkitRequestFullscreen():Ze.msRequestFullscreen&&Ze.msRequestFullscreen()},Ie.exitFullscreen=function(){dt.set(!1),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},Ie.toggleFullscreen=function(){dt.get()?Ie.exitFullscreen():Ie.enterFullscreen()},Ie.listen=function(){Xe("addEventListener")},Ie.unlisten=function(){Xe("removeEventListener")}}(bt),function(Te){var dt=Te.core,Ie=dt.globalEventsController,qe=dt.windowResizeActioner,Xe=Te.fs,Ct=Te.resolve,Ze=Ct(ie),$e=Ct(fe),dn=Ct(ke);Ie.attachListeners=function(){document.addEventListener("pointermove",$e.listener),document.addEventListener("pointerup",dn.listener),addEventListener("resize",qe.runActions),document.addEventListener("keydown",Ze.listener),Xe.listen()},Ie.removeListeners=function(){document.removeEventListener("pointermove",$e.listener),document.removeEventListener("pointerup",dn.listener),removeEventListener("resize",qe.runActions),document.removeEventListener("keydown",Ze.listener),Xe.unlisten()}}(bt),function(Te){var dt=Te.core.lightboxCloser,Ie=(0,Te.resolve)(ae);dt.closeLightbox=function(){Ie.isLightboxFadingOut||Ie.runActions()}}(bt),function(Te){var dt=Te.data,Ie=Te.core.scrollbarRecompensor;Ie.addRecompense=function(){document.readyState==="complete"?qe():window.addEventListener("load",function(){qe(),Ie.addRecompense=qe})};var qe=function(){document.body.offsetHeight>window.innerHeight&&(document.body.style.marginRight=dt.scrollbarWidth+"px")};Ie.removeRecompense=function(){document.body.style.removeProperty("margin-right")}}(bt),function(Te){var dt=Te.core,Ie=dt.slideChangeFacade,qe=dt.slideIndexChanger,Xe=Te.props.sources,Ct=Te.st;Xe.length>1?(Ie.changeToPrevious=function(){qe.jumpTo(Ct.getPreviousSlideIndex())},Ie.changeToNext=function(){qe.jumpTo(Ct.getNextSlideIndex())}):(Ie.changeToPrevious=function(){},Ie.changeToNext=function(){})}(bt),function(Te){var dt=Te.componentsServices,Ie=Te.core,qe=Ie.slideIndexChanger,Xe=Ie.sourceDisplayFacade,Ct=Te.isl,Ze=Te.saw,$e=Te.smw,dn=Te.st,io=Te.stageIndexes,wc=Te.sws;qe.changeTo=function(Ec){io.current=Ec,dn.u(),dt.setSlideNumber(Ec+1),Xe.displaySourcesWhichShouldBeDisplayed()},qe.jumpTo=function(Ec){var CU=io.previous,Bn=io.current,wU=io.next,EU=Ct[Bn],TU=Ct[Ec];qe.changeTo(Ec);for(var Wp=0;Wp<$e.length;Wp++)$e[Wp].d();wc.d(Bn),wc.c(),requestAnimationFrame(function(){requestAnimationFrame(function(){var Gp=io.previous,xw=io.current,Vp=io.next;function Pw(){dn.i(Bn)?Bn===io.previous?$e[Bn].ne():Bn===io.next&&$e[Bn].p():($e[Bn].h(),$e[Bn].n())}EU&&Ze[Bn].classList.add(d),TU&&Ze[xw].classList.add(h),wc.a(),Gp!==void 0&&Gp!==Bn&&$e[Gp].ne(),$e[xw].n(),Vp!==void 0&&Vp!==Bn&&$e[Vp].p(),wc.b(CU),wc.b(wU),Ct[Bn]?setTimeout(Pw,j-40):Pw()})})}}(bt),function(Te){var dt=Te.core.sourcesPointerDown,Ie=Te.elements.sources,qe=Te.smw,Xe=Te.sourcePointerProps,Ct=Te.stageIndexes;dt.listener=function(Ze){Ze.target.tagName!=="VIDEO"&&Ze.preventDefault(),Xe.isPointering=!0,Xe.downScreenX=Ze.screenX,Xe.swipedX=0;var $e=Ie[Ct.current];$e&&$e.contains(Ze.target)?Xe.isSourceDownEventTarget=!0:Xe.isSourceDownEventTarget=!1;for(var dn=0;dn<qe.length;dn++)qe[dn].d()}}(bt),function(Te){var dt=Te.core.sourceDisplayFacade,Ie=Te.props.loadOnlyCurrentSource,qe=Te.sawu,Xe=Te.stageIndexes;dt.displaySourcesWhichShouldBeDisplayed=function(){if(Ie)qe[Xe.current]();else for(var Ct in Xe){var Ze=Xe[Ct];Ze!==void 0&&qe[Ze]()}}}(bt),function(Te){var dt=Te.props.sources,Ie=Te.st,qe=Te.stageIndexes,Xe=dt.length-1;Ie.getPreviousSlideIndex=function(){return qe.current===0?Xe:qe.current-1},Ie.getNextSlideIndex=function(){return qe.current===Xe?0:qe.current+1},Ie.u=Xe===0?function(){}:Xe===1?function(){qe.current===0?(qe.next=1,delete qe.previous):(qe.previous=0,delete qe.next)}:function(){qe.previous=Ie.getPreviousSlideIndex(),qe.next=Ie.getNextSlideIndex()},Ie.i=Xe<=2?function(){return!0}:function(Ct){var Ze=qe.current;if(Ze===0&&Ct===Xe||Ze===Xe&&Ct===0)return!0;var $e=Ze-Ct;return $e===-1||$e===0||$e===1}}(bt),function(Te){var dt=Te.collections.sourceSizers,Ie=Te.core.windowResizeActioner,qe=Te.data,Xe=Te.elements.sources,Ct=Te.smw,Ze=Te.stageIndexes;Ie.runActions=function(){innerWidth<992?qe.maxSourceWidth=innerWidth:qe.maxSourceWidth=.9*innerWidth,qe.maxSourceHeight=.9*innerHeight;for(var $e=0;$e<Xe.length;$e++)Ct[$e].d(),dt[$e]&&Xe[$e]&&dt[$e].adjustSize();var dn=Ze.previous,io=Ze.next;dn!==void 0&&Ct[dn].ne(),io!==void 0&&Ct[io].p()}}(bt),function(Te){var dt=Te.isl,Ie=Te.stageIndexes,qe=Te.saw,Xe=Te.smw,Ct=Te.st,Ze=Te.sws;Ze.a=function(){for(var $e in Ie)Xe[Ie[$e]].s()},Ze.b=function($e){$e===void 0||Ct.i($e)||(Xe[$e].h(),Xe[$e].n())},Ze.c=function(){for(var $e in Ie)Ze.d(Ie[$e])},Ze.d=function($e){if(dt[$e]){var dn=qe[$e];Be(dn,"fslightboxfis"),Be(dn,h),Be(dn,d)}}}(bt)}(N),Ae.u(),D.set(!0,function(){wo(),function(bt){for(var qn=bt.props.sources,ar=bt.resolve,ea=ar(w),Te=ar(z),dt=ar(x,[ea,Te]),Ie=0;Ie<qn.length;Ie++)if(typeof qn[Ie]=="string"){var qe=dt.getTypeSetByClientForIndex(Ie);if(qe)Te.runActionsForSourceTypeAndIndex(qe,Ie);else{var Xe=ea.getSourceTypeFromLocalStorageByUrl(qn[Ie]);Xe?Te.runActionsForSourceTypeAndIndex(Xe,Ie):dt.retrieveTypeWithXhrForIndex(Ie)}}else Te.runActionsForSourceTypeAndIndex(O,Ie)}(N),V.dispatch("onInit")})}}function $(N){var D=N.componentsServices.isLightboxOpenManager,B=N.core.slideIndexChanger,V=N.stageIndexes;this.runCurrentStageIndexUpdateActionsFor=function(W){W!==V.current&&(D.get()?B.jumpTo(W):V.current=W)}}function le(N,D,B){return le=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(V,W,ee){var ue=[null];ue.push.apply(ue,W);var me=new(Function.bind.apply(V,ue));return ee&&se(me,ee.prototype),me},le.apply(null,arguments)}function se(N,D){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,V){return B.__proto__=V,B},se(N,D)}function _e(N,D){(D==null||D>N.length)&&(D=N.length);for(var B=0,V=new Array(D);B<D;B++)V[B]=N[B];return V}function We(N){var D=this;this.props=N,this.data={isFullyRendered:!1,maxSourceWidth:0,maxSourceHeight:0,scrollbarWidth:0},this.isl=[],this.sourcePointerProps={isPointering:!1,downScreenX:null,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={current:0},this.componentsServices={isLightboxOpenManager:{},setSlideNumber:null,isFullscreenOpenManager:{},showSlideSwipingHoverer:null,hideSlideSwipingHoverer:null},this.sawu=[],this.elements={sources:[],sourcesComponents:[]},this.saw=[],this.smw=[],this.collections={sourceLoadHandlers:[],sourceSizers:[],xhrs:[]},this.core={eventsDispatcher:{},globalEventsController:{},lightboxCloser:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},windowResizeActioner:{}},this.fs={},this.st={},this.sws={},this.getQueuedAction=function(B,V){var W=[];return function(){W.push(!0),D.timeout(function(){W.pop(),W.length||B()},V)}},this.resolve=function(B){var V,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return W.unshift(D),le(B,function(ee){if(Array.isArray(ee))return _e(ee)}(V=W)||function(ee){if(typeof Symbol<"u"&&ee[Symbol.iterator]!=null||ee["@@iterator"]!=null)return Array.from(ee)}(V)||function(ee,ue){if(ee){if(typeof ee=="string")return _e(ee,ue);var me=Object.prototype.toString.call(ee).slice(8,-1);return me==="Object"&&ee.constructor&&(me=ee.constructor.name),me==="Map"||me==="Set"?Array.from(ee):me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(me)?_e(ee,ue):void 0}}(V)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())},this.timeout=function(B,V){setTimeout(function(){D.elements.container&&B()},V)},function(B){var V=B.componentsServices.isLightboxOpenManager,W=B.core,ee=W.lightboxCloser,ue=W.lightboxUpdater,me=B.data,Ae=(0,B.resolve)($);ue.handleSlideProp=function(){var je=B.props;typeof je.sourceIndex=="number"?Ae.runCurrentStageIndexUpdateActionsFor(je.sourceIndex):typeof je.source=="string"?Ae.runCurrentStageIndexUpdateActionsFor(je.sources.indexOf(je.source)):typeof je.slide=="number"&&Ae.runCurrentStageIndexUpdateActionsFor(je.slide-1)},ue.handleTogglerUpdate=function(){V.get()?ee.closeLightbox():me.isInitialized?B.o():B.i()}}(this),ct(this)}var I={ref:"nav",class:"fslightbox-nav"},f={class:"fslightbox-toolbar"},g=["title"],k=["width","height","viewBox"],U=["d"],H={props:{size:String,viewBox:String,d:String}},Y=n(744),ne=(0,Y.Z)(H,[["render",function(N,D,B,V,W,ee){return(0,r.openBlock)(),(0,r.createElementBlock)("svg",{width:B.size,height:B.size,viewBox:B.viewBox,xmlns:"http://www.w3.org/2000/svg"},[(0,r.createElementVNode)("path",{class:"fslightbox-svg-path",d:B.d},null,8,U)],8,k)}]]),re={components:{Svger:ne},props:{onClick:Function,size:String,viewBox:String,d:String,title:String}},Q=(0,Y.Z)(re,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("Svger");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{onClick:D[0]||(D[0]=function(){return B.onClick&&B.onClick.apply(B,arguments)}),title:B.title,class:"fslightbox-toolbar-button fslightbox-flex-centered"},[(0,r.createVNode)(ue,{size:B.size,"view-box":B.viewBox,d:B.d},null,8,["size","view-box","d"])],8,g)}]]),P={components:{ToolbarButton:Q},props:{i:Number},data:function(){return{onClick:y[this.i].core.lightboxCloser.closeLightbox}}},q=(0,Y.Z)(P,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("ToolbarButton");return(0,r.openBlock)(),(0,r.createBlock)(ue,{"on-click":W.onClick,"view-box":"0 0 24 24",size:"20px",d:"M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z",title:"Close"},null,8,["on-click"])}]]),ce={components:{ToolbarButton:Q},props:{i:Number},data:function(){return{isFullscreenOpen:!1}},methods:{getButtonData:function(N){var D=y[this.i].fs,B=D.exitFullscreen,V=D.enterFullscreen;return(this.isFullscreenOpen?{onClick:B,viewBox:"0 0 950 1024",size:"24px",d:"M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z",title:"Exit fullscreen"}:{onClick:V,viewBox:"0 0 18 18",size:"20px",d:"M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",title:"Enter fullscreen"})[N]}},created:function(){var N=this,D=y[this.i].componentsServices.isFullscreenOpenManager;D.get=function(){return N.isFullscreenOpen},D.set=function(B){return N.isFullscreenOpen=B}}},be={components:{FullscreenButton:(0,Y.Z)(ce,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("ToolbarButton");return(0,r.openBlock)(),(0,r.createBlock)(ue,{"on-click":ee.getButtonData("onClick"),"view-box":ee.getButtonData("viewBox"),size:ee.getButtonData("size"),d:ee.getButtonData("d"),title:ee.getButtonData("title")},null,8,["on-click","view-box","size","d","title"])}]]),CloseButton:q},props:{i:Number}},Ue=(0,Y.Z)(be,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("FullscreenButton"),me=(0,r.resolveComponent)("CloseButton");return(0,r.openBlock)(),(0,r.createElementBlock)("div",f,[(0,r.createVNode)(ue,{i:B.i},null,8,["i"]),(0,r.createVNode)(me,{i:B.i},null,8,["i"])])}]]),ht={ref:"source-outer",class:"fslightbox-slide-number-container"},Je={ref:"source-inner",class:"fslightbox-flex-centered"},Nt=(0,r.createElementVNode)("span",{class:"fslightbox-slash"},null,-1),xn={props:{i:Number},data:function(){return{slide:y[this.i].stageIndexes.current+1,sourcesCount:y[this.i].props.sources.length}},created:function(){var N=this;y[this.i].componentsServices.setSlideNumber=function(D){return N.slide=D}},mounted:function(){this.$refs["source-inner"].offsetWidth>55&&(this.$refs["source-outer"].style.justifyContent="flex-start")}},ni={components:{SlideNumber:(0,Y.Z)(xn,[["render",function(N,D,B,V,W,ee){return(0,r.openBlock)(),(0,r.createElementBlock)("div",ht,[(0,r.createElementVNode)("div",Je,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(W.slide),1),Nt,(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(W.sourcesCount),1)],512)],512)}]]),Toolbar:Ue},props:{i:Number},data:function(){return{hasMoreThanSource:y[this.i].props.sources.length>1}}},hu=(0,Y.Z)(ni,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("Toolbar"),me=(0,r.resolveComponent)("SlideNumber");return(0,r.openBlock)(),(0,r.createElementBlock)("div",I,[(0,r.createVNode)(ue,{i:B.i},null,8,["i"]),W.hasMoreThanSource?((0,r.openBlock)(),(0,r.createBlock)(me,{key:0,i:B.i},null,8,["i"])):(0,r.createCommentVNode)("v-if",!0)],512)}]]),zi={ref:"a"},du={key:0,class:"fslightboxl"},_n=[(0,r.createElementVNode)("div",null,null,-1),(0,r.createElementVNode)("div",null,null,-1),(0,r.createElementVNode)("div",null,null,-1),(0,r.createElementVNode)("div",null,null,-1)],ro=["src"],pu={props:{i:Number,j:Number},data:function(){var N=this,D=y[this.i],B=D.collections.sourceLoadHandlers,V=D.props,W=V.customAttributes;return{onLoad:function(ee){B[N.j].handleImageLoad(ee)},src:V.sources[this.j],customAttributes:W&&W[this.j]}},mounted:function(){y[this.i].elements.sources[this.j]=this.$refs.ref}},XD=(0,Y.Z)(pu,[["render",function(N,D,B,V,W,ee){return(0,r.openBlock)(),(0,r.createElementBlock)("img",(0,r.mergeProps)({class:"fslightbox-source",onLoad:D[0]||(D[0]=function(){return W.onLoad&&W.onLoad.apply(W,arguments)}),ref:"ref",src:W.src},W.customAttributes),null,16,ro)}]]),ZD=["src"],eU={props:{i:Number,j:Number},data:function(){var N=y[this.i],D=N.collections.sourceLoadHandlers,B=N.props,V=B.customAttributes,W=B.sources;return{onLoad:D[this.j].handleVideoLoad,src:W[this.j],customAttributes:V&&V[this.j]}},mounted:function(){y[this.i].elements.sources[this.j]=this.$refs.ref}};const tU=(0,Y.Z)(eU,[["render",function(N,D,B,V,W,ee){return(0,r.openBlock)(),(0,r.createElementBlock)("video",(0,r.mergeProps)({class:"fslightbox-source fslightbox-video",onLoadedmetadata:D[0]||(D[0]=function(){return W.onLoad&&W.onLoad.apply(W,arguments)}),ref:"ref",controls:""},W.customAttributes),[(0,r.createElementVNode)("source",{src:W.src},null,8,ZD)],16)}]]);var nU=["src"],oU={props:{i:Number,j:Number},created:function(){var N=y[this.i].props,D=N.customAttributes,B=N.sources,V=this.j,W=B[V],ee=W.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],ue=W.split("?")[1];ue=ue||"",this.src="https://www.youtube.com/embed/".concat(ee,"?").concat(ue),this.customAttributes=D&&D[V]},mounted:function(){var N=y[this.i],D=this.j;N.elements.sources[D]=this.$refs.a,N.collections.sourceLoadHandlers[D].handleYoutubeLoad()}},rU={props:{i:Number,j:Number},created:function(){var N=y[this.i].props.sources[this.j];this.c=N.component?N.component:N,this.p=N.props?N.props:{}},mounted:function(){var N=y[this.i],D=N.collections.sourceLoadHandlers,B=N.elements.sources;B[this.j]=this.$refs.a.$el,B[this.j].classList.add(T),D[this.j].handleCustomLoad()}},iU={class:"fslightboxin fslightbox-flex-centered"},sU={props:{i:Number,j:Number},mounted:function(){var N=y[this.i],D=N.isl,B=N.saw,V=N.sawu,W=this.j;D[W]=!0,V[W](),B[W].classList.add("fslightboxfis")}},aU={props:{i:Number,j:Number},components:{I:XD,V:tU,Y:(0,Y.Z)(oU,[["render",function(N,D,B,V,W,ee){return(0,r.openBlock)(),(0,r.createElementBlock)("iframe",(0,r.mergeProps)({class:"fslightbox-source fslightbox-youtube-iframe",ref:"a",src:N.src,allowfullscreen:""},N.customAttributes),null,16,nU)}]]),C:(0,Y.Z)(rU,[["render",function(N,D,B,V,W,ee){return(0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(N.c),(0,r.mergeProps)(N.p,{ref:"a"}),null,16)}]]),In:(0,Y.Z)(sU,[["render",function(N,D,B,V,W,ee){return(0,r.openBlock)(),(0,r.createElementBlock)("div",iU,"Invalid source")}]])},data:function(){var N={};return this.attachComponentDataToObject(N),N},created:function(){var N=this;y[this.i].sawu[this.j]=function(){N.attachComponentDataToObject(N)}},mounted:function(){y[this.i].saw[this.j]=this.$refs.a},methods:{attachComponentDataToObject:function(N){var D=y[this.i],B=D.elements.sourcesComponents,V=D.isl,W=D.props.loadOnlyCurrentSource,ee=D.st,ue=D.stageIndexes.current;N.sourceComponent=B[this.j],N.isl=V[this.j],N.ist=ee.i(this.j),N.current=ue,N.loadOnlyCurrentSource=W}}},cU={props:{i:Number,j:Number},components:{Saw:(0,Y.Z)(aU,[["render",function(N,D,B,V,W,ee){return(0,r.openBlock)(),(0,r.createElementBlock)("div",zi,[N.isl?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",du,_n)),N.current===B.j||!N.loadOnlyCurrentSource&&N.ist?((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(N.sourceComponent),{key:1,i:B.i,j:B.j},null,8,["i","j"])):(0,r.createCommentVNode)("v-if",!0)],512)}]])},created:function(){this.css=y[this.i].st.i(this.j)?{}:{display:"none"}},mounted:function(){var N=y[this.i],D=this.$refs.a,B=0;function V(ee){D.style.transform="translateX(".concat(ee+B,"px)"),B=0}function W(){return(1+N.props.slideDistance)*innerWidth}D.s=function(){D.style.display="flex"},D.h=function(){D.style.display="none"},D.a=function(){D.classList.add("fslightboxtt")},D.d=function(){D.classList.remove("fslightboxtt")},D.n=function(){D.style.removeProperty("transform")},D.v=function(ee){return B=ee,D},D.ne=function(){V(-W())},D.z=function(){V(0)},D.p=function(){V(W())},N.smw[this.j]=D}},lU={props:{i:Number},components:{Smw:(0,Y.Z)(cU,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("Saw");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{ref:"a",class:"fslightbox-absoluted fslightbox-full-dimension fslightbox-flex-centered",style:(0,r.normalizeStyle)(N.css)},[(0,r.createVNode)(ue,{i:B.i,j:B.j},null,8,["i","j"])],4)}]])},data:function(){var N=y[this.i],D=N.core.sourcesPointerDown.listener;return{sources:N.props.sources,listener:D}}},uU=(0,Y.Z)(lU,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("Smw");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"fslightbox-absoluted fslightbox-full-dimension",onPointerdown:D[0]||(D[0]=function(){return W.listener&&W.listener.apply(W,arguments)})},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(W.sources.length,function(me,Ae){return(0,r.openBlock)(),(0,r.createBlock)(ue,{i:B.i,j:Ae,key:Ae},null,8,["i","j"])}),128))],32)}]]),hU={key:0},dU=["title"],pU={class:"fslightbox-slide-btn fslightbox-flex-centered"},fU={components:{Svger:ne},props:{onClick:Function,name:String,d:String},data:function(){var N=this.name.charAt(0).toUpperCase()+this.name.slice(1);return{title:"".concat(N," slide")}}};const gU=(0,Y.Z)(fU,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("Svger");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)("fslightbox-slide-btn-container fslightbox-slide-btn-".concat(B.name,"-container")),title:W.title,onClick:D[0]||(D[0]=function(){return B.onClick&&B.onClick.apply(B,arguments)})},[(0,r.createElementVNode)("div",pU,[(0,r.createVNode)(ue,{"view-box":"0 0 20 20",size:"20px",d:B.d},null,8,["d"])])],10,dU)}]]);var fu,mU={props:{i:Number},components:{SlideButton:gU},data:function(){var N=y[this.i],D=N.core.slideChangeFacade,B=D.changeToPrevious,V=D.changeToNext;return{sourcesCount:N.props.sources.length,changeToPrevious:B,changeToNext:V}}},vU={key:0,class:"fslightbox-slide-swiping-hoverer fslightbox-full-dimension fslightbox-absoluted"},yU={props:{i:Number},data:function(){return{isSlideSwipingHovererShown:!1}},created:function(){var N=this,D=y[this.i].componentsServices;D.showSlideSwipingHoverer=function(){N.isSlideSwipingHovererShown||(N.isSlideSwipingHovererShown=!0)},D.hideSlideSwipingHoverer=function(){N.isSlideSwipingHovererShown&&(N.isSlideSwipingHovererShown=!1)}}},_U={props:{toggler:Boolean,sources:Array,slide:Number,source:String,sourceIndex:Number,onOpen:Function,onClose:Function,onInit:Function,onShow:Function,disableLocalStorage:Boolean,types:Array,type:String,customAttributes:Array,maxYoutubeVideoDimensions:Object,loadOnlyCurrentSource:Boolean,slideDistance:{type:Number,default:.3},openOnMount:Boolean,exitFullscreenOnClose:Boolean},components:{Swc:uU,SlideButtons:(0,Y.Z)(mU,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("SlideButton");return W.sourcesCount>1?((0,r.openBlock)(),(0,r.createElementBlock)("div",hU,[(0,r.createVNode)(ue,{"on-click":W.changeToPrevious,name:"previous",d:"M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"},null,8,["on-click"]),(0,r.createVNode)(ue,{"on-click":W.changeToNext,name:"next",d:"M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z"},null,8,["on-click"])])):(0,r.createCommentVNode)("v-if",!0)}]]),Naver:hu,SlideSwipingHoverer:(0,Y.Z)(yU,[["render",function(N,D,B,V,W,ee){return W.isSlideSwipingHovererShown?((0,r.openBlock)(),(0,r.createElementBlock)("div",vU)):(0,r.createCommentVNode)("v-if",!0)}]])},data:function(){return{isOpen:!1}},watch:{slide:function(){y[this.i].core.lightboxUpdater.handleSlideProp()},sourceIndex:function(){y[this.i].core.lightboxUpdater.handleSlideProp()},source:function(){y[this.i].core.lightboxUpdater.handleSlideProp()},toggler:function(){y[this.i].core.lightboxUpdater.handleSlideProp(),y[this.i].core.lightboxUpdater.handleTogglerUpdate()}},created:function(){var N=this;this.i=y.push(new We(this))-1;var D=y[this.i].componentsServices.isLightboxOpenManager;D.get=function(){return N.isOpen},D.set=function(B,V){N.isOpen=B,V&&(fu=V)}},mounted:function(){y[this.i].elements.container=this.$refs.container,function(N){var D=N.data,B=N.props.openOnMount;document.getElementsByClassName(c).length||b(),D.scrollbarWidth=function(){var V=document.createElement("div"),W=V.style,ee=document.createElement("div");W.visibility="hidden",W.width="100px",W.msOverflowStyle="scrollbar",W.overflow="scroll",ee.style.width="100%",document.body.appendChild(V);var ue=V.offsetWidth;V.appendChild(ee);var me=ee.offsetWidth;return document.body.removeChild(V),ue-me}(),B&&N.i()}(y[this.i])},updated:function(){y[this.i].elements.container=this.$refs.container,fu&&fu(),fu=null}},bU=(0,Y.Z)(_U,[["render",function(N,D,B,V,W,ee){var ue=(0,r.resolveComponent)("Naver"),me=(0,r.resolveComponent)("Swc"),Ae=(0,r.resolveComponent)("SlideButtons"),je=(0,r.resolveComponent)("SlideSwipingHoverer");return W.isOpen?((0,r.openBlock)(),(0,r.createElementBlock)("div",i,[(0,r.createVNode)(ue,{i:N.i},null,8,["i"]),(0,r.createVNode)(me,{i:N.i},null,8,["i"]),(0,r.createVNode)(Ae,{i:N.i},null,8,["i"]),(0,r.createVNode)(je,{i:N.i},null,8,["i"])],512)):(0,r.createCommentVNode)("v-if",!0)}]])})(),BC.exports=o})();var UP=BC.exports;const FP=mC(UP),HP={key:0,class:"w-100 m-auto d-flex flex-column gap-2"},qP={class:"image-gallery gap-2"},BP=["onKeyup","onClick"],KP=M("div",{style:{width:"100%","padding-top":"100%",position:"relative"}},null,-1),jP=["src"],KC=vt({__name:"ImageGallery",props:{photos:{type:Array,required:!0}},setup(t){const e=ye(0),n=ye(!1);return(o,r)=>(Z(),oe(ze,null,[t.photos.length>0?(Z(),oe("div",HP,[mr(o.$slots,"upload"),M("div",qP,[(Z(!0),oe(ze,null,sn(t.photos,(i,s)=>(Z(),oe("div",{tabindex:"0",key:i,class:"border image-container rounded-4 d-flex focus-ring",style:{position:"relative",width:"100%",overflow:"hidden"},onKeyup:Kt(a=>(e.value=s,n.value=!n.value),["enter"]),onClick:a=>(e.value=s,n.value=!n.value)},[KP,M("img",{src:i,alt:"Cat image",class:"image thumbnail",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","object-fit":"cover"}},null,8,jP),mr(o.$slots,"custom-content-"+s,{photo:i})],40,BP))),128))])])):Ge("",!0),(Z(),Ut(X(FP),{key:t.photos.length,toggler:n.value,sources:t.photos,slide:e.value+1},null,8,["toggler","sources","slide"]))],64))}}),$P={key:0,class:"m-5 fw-bold"},zP={key:1,class:"spinner-border text-primary m-auto",role:"status"},WP=M("span",{class:"visually-hidden"},"Loading...",-1),GP=[WP],VP={key:2,class:"p-2 w-100 h-100 d-flex flex-column align-items-center p-sm-5"},YP={class:"col-12 col-sm-8 p-sm-5 d-flex flex-column gap-5"},QP={class:"d-flex gap-4",style:{height:"300px"}},JP=M("div",{class:"border image-container rounded-4",style:{position:"relative","min-width":"400px",overflow:"hidden"}},[M("img",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","object-fit":"cover"},src:"https://kissarekisteritf.blob.core.windows.net/images/a2174d16-0f1e-452f-b1a8-2c2d58600d05.jpg"})],-1),XP={class:"d-flex flex-column p-2",style:{width:"100%"}},ZP={class:"mt-auto ms-auto"},eM={class:"attendees-list mt-3 d-flex flex-column gap-5"},tM={key:0,class:"d-flex flex-column align-items-center"},nM=["id"],oM=M("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 128 512"},[M("path",{d:"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"})],-1),rM=[oM],iM={tabindex:"0",class:"dropdown-menu focus-ring"},sM=["onKeyup","onClick"],aM=["onKeyup","onClick"],cM=["onKeyup","onClick"],lM={class:"d-flex flex-column bg-white w-100 p-4 gap-4 rounded"},uM={key:0},hM=M("h5",null,"Osallistuvat kissat:",-1),dM=["onKeyup","value"],pM={key:1},fM={class:"w-100 p-4 d-flex flex-column"},gM=M("p",null,"Perutaanko osallistuminen?",-1),mM={class:"d-flex gap-2 justify-content-end"},vM=vt({__name:"CatShowDetails",setup(t){const e=Xl(),{t:n}=Jn(),o=ye([]),r=+e.params.eventId,{data:i,refetch:s,isLoading:a,isError:c}=mo({queryKey:["catshow"],queryFn:()=>xi.getEventById(r)}),l=Lr({mutationFn:()=>xi.joinEvent(r,o.value),onSuccess:()=>{jr.info("Osallistuminen rekister\xF6ity"),s()}}),u=Lr({mutationFn:x=>xi.assignCatPlacing(r,x),onSuccess:()=>{jr.info("N\xE4yttelytulos tallennettu"),s()},onError:()=>jr.error("Toiminto ep\xE4onnistui")}),h=Lr({mutationFn:x=>xi.addCatShowPhoto(r,x),onSuccess:()=>s()}),d=Lr({mutationFn:()=>xi.leaveEvent(r),onSuccess:()=>{jr.info("Osallistuminen peruttu"),s()}}),{data:p,refetch:m}=mo({queryKey:["userCats"],queryFn:()=>{var x;return ws.getCatsByUserId((x=Vn.value)==null?void 0:x.id)},enabled:!!Vn.value});Pt(Vn,()=>m());const _=ye(!1),T=ye(!1),b=Re(()=>{var x;return i.value&&((x=i.value.attendees)==null?void 0:x.some(j=>{var ae;return j.userId===((ae=Vn.value)==null?void 0:ae.id)}))}),C=async x=>{const j=x.target;!j||!j.files||h.mutate(j.files[0])},y=Re(()=>{var x;return(x=i.value)!=null&&x.photos?["https://kissarekisteritf.blob.core.windows.net/images/a2174d16-0f1e-452f-b1a8-2c2d58600d05.jpg",...i.value.photos.map(j=>j.url)]:[]}),v=Re(()=>{var x;return(x=i.value)!=null&&x.attendees?i.value.attendees.flatMap(j=>j.catAttendees.map(ae=>ae.cat)).reduce((j,ae)=>(j[ae.breed]||(j[ae.breed]=[]),j[ae.breed].push(ae),j),{}):{}}),w=ye(),A=()=>{var x;return(x=w.value)==null?void 0:x.click()},S=()=>{l.mutate(),_.value=!1},E=()=>{d.mutate(),T.value=!1},O=x=>{o.value.includes(x)?o.value=o.value.filter(j=>j!==x):o.value=[...o.value,x]},L=x=>{var j;return(j=bootstrap.Dropdown.getInstance(document.getElementById(x)||""))==null?void 0:j.hide()},z=x=>{u.mutate(x),L(x.catId.toString())};return(x,j)=>(Z(),oe(ze,null,[X(c)?(Z(),oe("h3",$P,Se(X(n)("CatShowDetails.404")),1)):Ge("",!0),X(a)?(Z(),oe("div",zP,GP)):Ge("",!0),X(i)?(Z(),oe("div",VP,[M("div",YP,[M("div",QP,[JP,M("div",XP,[M("h3",null,Se(X(i).name),1),M("p",null,Se(X(i).description),1),M("span",null,Se(X(i).location),1),M("div",ZP,[b.value?(Z(),oe("button",{key:1,onClick:j[1]||(j[1]=ae=>T.value=!0),type:"button",class:"btn btn-danger rounded-3 py-2 px-5"},Se(X(n)("CatShowDetails.leaveEvent")),1)):(Z(),oe("button",{key:0,type:"button",class:"btn btn-primary px-5",onClick:j[0]||(j[0]=ae=>_.value=!0)},Se(X(n)("CatShowDetails.joinEvent")),1))])])]),M("div",eM,[(Z(!0),oe(ze,null,sn(v.value,(ae,ie)=>(Z(),oe("div",{key:ie},[M("h4",null,Se(ie),1),ae?(Z(),oe("div",tM,[(Z(!0),oe(ze,null,sn(ae,G=>(Z(),Ut(nc,{cat:G},Xc({medal:wt(()=>{var fe,he;return[G.results?(Z(),oe("div",{key:0,style:so({backgroundColor:X(qC)(((fe=G.results.find(Ye=>Ye.catShowId===r))==null?void 0:fe.place)||0)}),class:"badge rounded-pill fw-bold text-black"}," #"+Se((he=G.results.find(Ye=>Ye.catShowId===r))==null?void 0:he.place),5)):Ge("",!0)]}),_:2},[X(qd)("CreateCatShowResult")?{name:"actions",fn:wt(()=>[M("div",null,[M("div",{onClick:j[2]||(j[2]=Yo(()=>console.log("test"),["stop"])),onKeyup:j[3]||(j[3]=Kt(Yo(()=>{},["stop"]),["enter"])),class:"d-flex dropstart"},[M("button",{id:G.id.toString(),tabindex:"0",class:"btn py-1 px-2 accordion d-flex focus-ring rounded-1",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},rM,8,nM),M("ul",iM,[M("li",{tabindex:"0",onKeyup:Kt(fe=>z({catId:G.id,place:1,breed:G.breed}),["enter"]),onClick:fe=>z({catId:G.id,place:1,breed:G.breed}),class:"dropdown-item focus-ring"}," Ensimm\xE4inen ",40,sM),M("li",{tabindex:"0",onKeyup:Kt(fe=>z({catId:G.id,place:2,breed:G.breed}),["enter"]),onClick:fe=>z({catId:G.id,place:2,breed:G.breed}),class:"dropdown-item focus-ring"}," Toinen ",40,aM),M("li",{tabindex:"0",onKeyup:Kt(fe=>z({catId:G.id,place:3,breed:G.breed}),["enter"]),onClick:fe=>z({catId:G.id,place:3,breed:G.breed}),class:"dropdown-item focus-ring"}," Kolmas ",40,cM)])],32)])]),key:"0"}:void 0]),1032,["cat"]))),256))])):Ge("",!0)]))),128))]),X(i)?(Z(),Ut(KC,{key:0,photos:y.value},Xc({_:2},[X(qd)("CreateCatShowResult")?{name:"upload",fn:wt(()=>[M("button",{onClick:A,class:"btn border rounded-3 px-5 py-2 btn-border me-auto focus-ring"},[M("input",{class:"d-none",ref_key:"inputRef",ref:w,type:"file",onChange:C,id:"catImageInput"},null,544),$n(" Lis\xE4\xE4 kuva + ")])]),key:"0"}:void 0]),1032,["photos"])):Ge("",!0)]),Oe(Ni,{modalId:"join-event-modal",visible:_.value,onOnCancel:j[5]||(j[5]=ae=>_.value=!1)},{default:wt(()=>[M("div",lM,[X(Vn)&&X(p)&&X(p).length>0?(Z(),oe("div",uM,[hM,(Z(!0),oe(ze,null,sn(X(p),(ae,ie)=>(Z(),oe("div",{key:ie},[M("label",null,[wn(M("input",{onKeyup:Kt(G=>O(ae.id),["enter"]),type:"checkbox","onUpdate:modelValue":j[4]||(j[4]=G=>o.value=G),value:ae.id},null,40,dM),[[ul,o.value]]),$n(" "+Se(ae.name),1)])]))),128))])):(Z(),oe("div",pM,"No cats available.")),M("button",{onClick:S,type:"button",class:"btn btn-primary"},"Osallistu")])]),_:1},8,["visible"]),Oe(Ni,{modalId:"leave-event-modal",visible:T.value,onOnCancel:j[7]||(j[7]=ae=>T.value=!1)},{default:wt(()=>[M("div",fM,[gM,M("div",mM,[M("button",{onClick:j[6]||(j[6]=ae=>T.value=!1),type:"button",class:"btn btn-secondary"},"Peruuta"),M("button",{"data-testid":"confirm-cat-delete",onClick:E,type:"button",class:"btn btn-danger"},"Peru osallistuminen")])])]),_:1},8,["visible"])])):Ge("",!0)],64))}}),yM=async t=>{try{return(await At.post("/cats",t)).data}catch(e){console.log(e)}},_M=async t=>{try{return await At.delete(`$/cats/${t}`),!0}catch(e){console.log(e)}},bM=async t=>{console.log("REQUESTING CATS FROM",At.defaults.baseURL);try{return(await At.get(`/cats?${t||""}`)).data.data}catch(e){console.log(e)}},CM=async t=>{try{return(await At.get(`/users/${t}/cats`)).data}catch(e){console.log(e)}},wM=async t=>{try{const e=await At.get(`/cats/${t}`);return e.data.errors=["test","test2"],e.data}catch(e){console.log(e)}},EM=async t=>{try{return(await At.put(`/cats/${t.id}`,t)).data}catch(e){console.log(e)}},TM=async(t,e)=>{if(e)try{const n=new FormData;return n.append("file",e),(await At.post(`/cats/${t}/photo`,n)).data}catch(n){console.log(n)}},SM=async()=>{try{return(await At.get("/cats/breeds")).data.data}catch(t){console.log(t)}},Do={addCat:yM,getCatById:wM,deleteCatById:_M,getCats:bM,getCatsByUserId:CM,editCat:EM,uploadCatImage:TM,getCatBreeds:SM},kM={class:"w-100 h-100 p-0 p-sm-5 d-flex flex-column align-items-center"},AM={class:"p-2 p-sm-5 rounded col-12 col-lg-8 h-100 d-flex flex-column"},IM=vt({__name:"Cats",setup(t){const{t:e}=Jn(),{data:n}=mo({queryKey:["cats"],queryFn:()=>Do.getCats()});return(o,r)=>(Z(),oe("div",kM,[M("div",AM,[M("h3",null,Se(X(e)("Cats.cats")),1),X(n)?(Z(),Ut(ru,{key:0,searchQueryPlaceholder:X(e)("Cats.searchInput"),items:X(n),itemsPerPage:8},{default:wt(({item:i})=>[Oe(nc,{cat:i},null,8,["cat"])]),_:1},8,["searchQueryPlaceholder","items"])):Ge("",!0)])]))}}),RM={class:"col d-flex align-items-center gap-2 col-8"},OM=["src","onerror"],NM={key:1,style:{width:"32px",height:"32px","font-size":"14px"},class:"rounded-circle d-flex align-items-center justify-content-center bg-primary fw-bold"},xM=M("div",{class:"col"},null,-1),PM={class:"badge rounded-pill text-bg-primary"},Ip=vt({__name:"UserListItem",props:{user:{type:Object,required:!0}},setup(t){const e=Va(),{t:n}=Jn(),o=ye(!1),r=i=>e.push(`/users/${i}`);return(i,s)=>(Z(),oe("div",{tabindex:"0",onKeyup:s[0]||(s[0]=Kt(()=>r(t.user.id),["enter"])),onClick:s[1]||(s[1]=()=>r(t.user.id)),class:"hover-bg p-3 d-flex border-bottom p-2 flex align-items-center focus-ring"},[M("div",RM,[t.user.avatarUrl&&!o.value?(Z(),oe("img",{key:0,class:"rounded-circle",height:"32",width:"32",style:{"object-fit":"fill"},src:t.user.avatarUrl,alt:"User avatar",onerror:o.value=!0},null,8,OM)):(Z(),oe("div",NM,Se(t.user.givenName[0]+t.user.surname[0]),1)),M("div",null,Se(`${t.user.givenName}  ${t.user.surname}`),1)]),xM,M("span",PM,Se((t.user.isBreeder,X(n)("Users.breeder"))),1)],32))}}),MM={class:"w-100 h-100 p-0 p-sm-5 d-flex flex-column align-items-center"},LM={class:"p-2 p-sm-5 rounded col-12 col-lg-8 h-100 d-flex flex-column"},DM=vt({__name:"Users",setup(t){const{t:e}=Jn(),{data:n}=mo({queryKey:["users"],queryFn:ws.getUsers});return(o,r)=>(Z(),oe("div",MM,[M("div",LM,[M("h3",null,Se(X(e)("Users.members")),1),X(n)?(Z(),Ut(ru,{key:0,searchQueryPlaceholder:X(e)("Users.searchInput"),items:X(n),itemsPerPage:7},{default:wt(({item:i})=>[Oe(Ip,{user:i},null,8,["user"])]),_:1},8,["searchQueryPlaceholder","items"])):Ge("",!0)])]))}}),UM={key:0,class:"m-5 fw-bold"},FM={key:1,class:"w-100 h-100 d-flex flex-column align-items-center gap-4 p-5"},HM={class:"p-4 p-sm-5 rounded overflow-auto col-12 col-lg-8 gap-5 d-flex flex-column"},qM={class:"d-flex flex-column flex-sm-row gap-4",style:{"min-height":"300px"}},BM=["src"],KM={class:"d-flex flex-column p-2",style:{width:"100%"}},jM={key:0},$M=["onKeyup","onClick"],zM={class:"d-flex align-items-center gap-2"},WM={class:"mb-1"},GM={key:1},VM={key:2},YM={class:"d-flex flex-column gap-2"},QM=["onKeyup","onClick"],JM=vt({__name:"CatDetails",setup(t){const{t:e}=Jn(),n=Va(),o=Xl(),{data:r,refetch:i,isError:s}=mo({queryKey:[o.params.catId],queryFn:()=>Do.getCatById(+o.params.catId)}),a=Re(()=>{var _;return(_=r.value)==null?void 0:_.data}),c=Lr({mutationFn:_=>Do.uploadCatImage(a.value.id,_),onSuccess:()=>i()}),l=Lr({mutationFn:_=>Do.editCat({...a.value,imageUrl:_}),onSuccess:()=>i()}),u=_=>n.push(`/catshows/${_}`),h=async _=>{const T=_.target;!T||!T.files||c.mutate(T.files[0])},d=ye(),p=()=>{var _;return(_=d.value)==null?void 0:_.click()},m=Re(()=>a.value?a.value.photos.map(_=>_.url):[]);return Pt(o,()=>i()),(_,T)=>(Z(),oe(ze,null,[X(s)?(Z(),oe("h3",UM,Se(X(e)("CatDetails.404")),1)):Ge("",!0),a.value?(Z(),oe("div",FM,[M("div",HM,[M("div",qM,[M("div",{onClick:T[0]||(T[0]=b=>X(jr).error("test")),class:"border image-container rounded-4",style:{position:"relative","min-width":"400px",overflow:"hidden"}},[M("img",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","object-fit":"cover"},src:a.value.imageUrl},null,8,BM)]),M("div",KM,[M("h3",null,Se(a.value.name),1),M("p",null,Se(a.value.breed),1),M("p",null,Se(a.value.birthDate),1)])]),a.value.results&&a.value.results.length>0?(Z(),oe("div",jM,[M("h5",null,Se(X(e)("CatDetails.placings")),1),(Z(!0),oe(ze,null,sn(a.value.results,b=>(Z(),oe("div",{tabindex:"0",onKeyup:Kt(()=>u(b.catShowId),["enter"]),onClick:()=>u(b.catShowId),class:"hover-bg p-3 d-flex border-bottom p-2 flex align-items-center focus-ring"},[M("div",zM,[M("span",{style:so({backgroundColor:X(qC)(b.place)}),class:"badge rounded-pill text-black"},"#"+Se(b.place),5),M("span",WM,Se(b.catShow.name),1)])],40,$M))),256))])):Ge("",!0),a.value.parents&&a.value.parents.length>0?(Z(),oe("div",GM,[M("h5",null,Se(X(e)("CatDetails.parents")),1),a.value.parents?(Z(!0),oe(ze,{key:0},sn(a.value.parents,b=>(Z(),Ut(nc,{cat:b.parentCat},null,8,["cat"]))),256)):Ge("",!0)])):Ge("",!0),a.value.kittens&&a.value.kittens.length>0?(Z(),oe("div",VM,[M("h5",null,Se(X(e)("CatDetails.kittens")),1),a.value.kittens?(Z(!0),oe(ze,{key:0},sn(a.value.kittens,b=>(Z(),Ut(nc,{cat:b.childCat},null,8,["cat"]))),256)):Ge("",!0)])):Ge("",!0),M("div",null,[M("h5",null,Se(X(e)("CatDetails.owner")),1),Oe(Ip,{user:a.value.owner},null,8,["user"])]),M("div",null,[M("h5",null,Se(X(e)("CatDetails.breeder")),1),Oe(Ip,{user:a.value.breeder},null,8,["user"])]),M("div",YM,[M("button",{onClick:p,class:"border rounded-3 px-5 py-2 btn-border me-auto focus-ring"},[M("input",{class:"d-none",ref_key:"inputRef",ref:d,type:"file",onChange:h,id:"catImageInput"},null,544),$n(" "+Se(X(e)("CatDetails.uploadImage"))+" + ",1)]),Oe(KC,{photos:m.value},Xc({_:2},[sn(a.value.photos,(b,C)=>({name:`custom-content-${C}`,fn:wt(({photo:y})=>[M("button",{style:{width:"93%"},onKeyup:Kt(Yo(v=>X(l).mutate(y),["stop"]),["enter"]),onClick:Yo(v=>X(l).mutate(y),["stop"]),class:"rounded-3 border btn-border focus-ring py-2 position-absolute z-2 bottom-0 m-2"},Se(X(e)("CatDetails.setAsProfilePicture")),41,QM)])}))]),1032,["photos"])])])])):Ge("",!0)],64))}});function jC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,o)}return n}function $C(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jC(Object(n),!0).forEach(function(o){eL(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jC(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function XM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zC(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,GC(o.key),o)}}function ZM(t,e,n){return e&&zC(t.prototype,e),n&&zC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eL(t,e,n){return e=GC(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WC(t){return tL(t)||nL(t)||oL(t)||rL()}function tL(t){if(Array.isArray(t))return Op(t)}function nL(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oL(t,e){if(t){if(typeof t=="string")return Op(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Op(t,e)}}function Op(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function rL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iL(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GC(t){var e=iL(t,"string");return typeof e=="symbol"?e:String(e)}var iu=typeof window<"u"&&typeof window.document<"u",Uo=iu?window:{},Np=iu&&Uo.document.documentElement?"ontouchstart"in Uo.document.documentElement:!1,xp=iu?"PointerEvent"in Uo:!1,Rt="cropper",Pp="all",VC="crop",YC="move",QC="zoom",Pi="e",Mi="w",Ps="s",zr="n",oc="ne",rc="nw",ic="se",sc="sw",Mp="".concat(Rt,"-crop"),JC="".concat(Rt,"-disabled"),Rn="".concat(Rt,"-hidden"),XC="".concat(Rt,"-hide"),sL="".concat(Rt,"-invisible"),su="".concat(Rt,"-modal"),Lp="".concat(Rt,"-move"),ac="".concat(Rt,"Action"),au="".concat(Rt,"Preview"),Dp="crop",ZC="move",ew="none",Up="crop",Fp="cropend",Hp="cropmove",qp="cropstart",tw="dblclick",aL=Np?"touchstart":"mousedown",cL=Np?"touchmove":"mousemove",lL=Np?"touchend touchcancel":"mouseup",nw=xp?"pointerdown":aL,ow=xp?"pointermove":cL,rw=xp?"pointerup pointercancel":lL,iw="ready",sw="resize",aw="wheel",Bp="zoom",cw="image/jpeg",uL=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,hL=/^data:/,dL=/^data:image\/jpeg;base64,/,pL=/^img|canvas$/i,lw=200,uw=100,hw={viewMode:0,dragMode:Dp,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:lw,minContainerHeight:uw,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},fL='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',gL=Number.isNaN||Uo.isNaN;function tt(t){return typeof t=="number"&&!gL(t)}var dw=function(t){return t>0&&t<1/0};function Kp(t){return typeof t>"u"}function Li(t){return Rp(t)==="object"&&t!==null}var mL=Object.prototype.hasOwnProperty;function Ms(t){if(!Li(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&mL.call(n,"isPrototypeOf")}catch{return!1}}function On(t){return typeof t=="function"}var vL=Array.prototype.slice;function pw(t){return Array.from?Array.from(t):vL.call(t)}function Bt(t,e){return t&&On(e)&&(Array.isArray(t)||tt(t.length)?pw(t).forEach(function(n,o){e.call(t,n,o,t)}):Li(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var Ot=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return Li(t)&&n.length>0&&n.forEach(function(r){Li(r)&&Object.keys(r).forEach(function(i){t[i]=r[i]})}),t},yL=/\.\d*(?:0|9){12}\d*$/;function Ls(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return yL.test(t)?Math.round(t*e)/e:t}var _L=/^width|height|left|top|marginLeft|marginTop$/;function Wr(t,e){var n=t.style;Bt(e,function(o,r){_L.test(r)&&tt(o)&&(o="".concat(o,"px")),n[r]=o})}function bL(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Jt(t,e){if(e){if(tt(t.length)){Bt(t,function(o){Jt(o,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function Fo(t,e){if(e){if(tt(t.length)){Bt(t,function(n){Fo(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function Ds(t,e,n){if(e){if(tt(t.length)){Bt(t,function(o){Ds(o,e,n)});return}n?Jt(t,e):Fo(t,e)}}var CL=/([a-z\d])([A-Z])/g;function jp(t){return t.replace(CL,"$1-$2").toLowerCase()}function $p(t,e){return Li(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(jp(e)))}function cc(t,e,n){Li(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(jp(e)),n)}function wL(t,e){if(Li(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(jp(e)))}var fw=/\s\s*/,gw=function(){var t=!1;if(iu){var e=!1,n=function(){},o=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(r){e=r}});Uo.addEventListener("test",n,o),Uo.removeEventListener("test",n,o)}return t}();function bo(t,e,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(fw).forEach(function(i){if(!gw){var s=t.listeners;s&&s[i]&&s[i][n]&&(r=s[i][n],delete s[i][n],Object.keys(s[i]).length===0&&delete s[i],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(i,r,o)})}function Zn(t,e,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(fw).forEach(function(i){if(o.once&&!gw){var s=t.listeners,a=s===void 0?{}:s;r=function(){delete a[i][n],t.removeEventListener(i,r,o);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];n.apply(t,l)},a[i]||(a[i]={}),a[i][n]&&t.removeEventListener(i,a[i][n],o),a[i][n]=r,t.listeners=a}t.addEventListener(i,r,o)})}function Us(t,e,n){var o;return On(Event)&&On(CustomEvent)?o=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(o)}function mw(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var zp=Uo.location,EL=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function vw(t){var e=t.match(EL);return e!==null&&(e[1]!==zp.protocol||e[2]!==zp.hostname||e[3]!==zp.port)}function yw(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function lc(t){var e=t.rotate,n=t.scaleX,o=t.scaleY,r=t.translateX,i=t.translateY,s=[];tt(r)&&r!==0&&s.push("translateX(".concat(r,"px)")),tt(i)&&i!==0&&s.push("translateY(".concat(i,"px)")),tt(e)&&e!==0&&s.push("rotate(".concat(e,"deg)")),tt(n)&&n!==1&&s.push("scaleX(".concat(n,")")),tt(o)&&o!==1&&s.push("scaleY(".concat(o,")"));var a=s.length?s.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function TL(t){var e=$C({},t),n=0;return Bt(t,function(o,r){delete e[r],Bt(e,function(i){var s=Math.abs(o.startX-i.startX),a=Math.abs(o.startY-i.startY),c=Math.abs(o.endX-i.endX),l=Math.abs(o.endY-i.endY),u=Math.sqrt(s*s+a*a),h=Math.sqrt(c*c+l*l),d=(h-u)/u;Math.abs(d)>Math.abs(n)&&(n=d)})}),n}function cu(t,e){var n=t.pageX,o=t.pageY,r={endX:n,endY:o};return e?r:$C({startX:n,startY:o},r)}function SL(t){var e=0,n=0,o=0;return Bt(t,function(r){var i=r.startX,s=r.startY;e+=i,n+=s,o+=1}),e/=o,n/=o,{pageX:e,pageY:n}}function Gr(t){var e=t.aspectRatio,n=t.height,o=t.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",i=dw(o),s=dw(n);if(i&&s){var a=n*e;r==="contain"&&a>o||r==="cover"&&a<o?n=o/e:o=n*e}else i?n=o/e:s&&(o=n*e);return{width:o,height:n}}function kL(t){var e=t.width,n=t.height,o=t.degree;if(o=Math.abs(o)%180,o===90)return{width:n,height:e};var r=o%90*Math.PI/180,i=Math.sin(r),s=Math.cos(r),a=e*s+n*i,c=e*i+n*s;return o>90?{width:c,height:a}:{width:a,height:c}}function AL(t,e,n,o){var r=e.aspectRatio,i=e.naturalWidth,s=e.naturalHeight,a=e.rotate,c=a===void 0?0:a,l=e.scaleX,u=l===void 0?1:l,h=e.scaleY,d=h===void 0?1:h,p=n.aspectRatio,m=n.naturalWidth,_=n.naturalHeight,T=o.fillColor,b=T===void 0?"transparent":T,C=o.imageSmoothingEnabled,y=C===void 0?!0:C,v=o.imageSmoothingQuality,w=v===void 0?"low":v,A=o.maxWidth,S=A===void 0?1/0:A,E=o.maxHeight,O=E===void 0?1/0:E,L=o.minWidth,z=L===void 0?0:L,x=o.minHeight,j=x===void 0?0:x,ae=document.createElement("canvas"),ie=ae.getContext("2d"),G=Gr({aspectRatio:p,width:S,height:O}),fe=Gr({aspectRatio:p,width:z,height:j},"cover"),he=Math.min(G.width,Math.max(fe.width,m)),Ye=Math.min(G.height,Math.max(fe.height,_)),ke=Gr({aspectRatio:r,width:S,height:O}),Be=Gr({aspectRatio:r,width:z,height:j},"cover"),nt=Math.min(ke.width,Math.max(Be.width,i)),Pe=Math.min(ke.height,Math.max(Be.height,s)),He=[-nt/2,-Pe/2,nt,Pe];return ae.width=Ls(he),ae.height=Ls(Ye),ie.fillStyle=b,ie.fillRect(0,0,he,Ye),ie.save(),ie.translate(he/2,Ye/2),ie.rotate(c*Math.PI/180),ie.scale(u,d),ie.imageSmoothingEnabled=y,ie.imageSmoothingQuality=w,ie.drawImage.apply(ie,[t].concat(WC(He.map(function(it){return Math.floor(Ls(it))})))),ie.restore(),ae}var _w=String.fromCharCode;function IL(t,e,n){var o="";n+=e;for(var r=e;r<n;r+=1)o+=_w(t.getUint8(r));return o}var RL=/^data:.*,/;function OL(t){var e=t.replace(RL,""),n=atob(e),o=new ArrayBuffer(n.length),r=new Uint8Array(o);return Bt(r,function(i,s){r[s]=n.charCodeAt(s)}),o}function NL(t,e){for(var n=[],o=8192,r=new Uint8Array(t);r.length>0;)n.push(_w.apply(null,pw(r.subarray(0,o)))),r=r.subarray(o);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function xL(t){var e=new DataView(t),n;try{var o,r,i;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,a=2;a+1<s;){if(e.getUint8(a)===255&&e.getUint8(a+1)===225){r=a;break}a+=1}if(r){var c=r+4,l=r+10;if(IL(e,c,4)==="Exif"){var u=e.getUint16(l);if(o=u===18761,(o||u===19789)&&e.getUint16(l+2,o)===42){var h=e.getUint32(l+4,o);h>=8&&(i=l+h)}}}if(i){var d=e.getUint16(i,o),p,m;for(m=0;m<d;m+=1)if(p=i+m*12+2,e.getUint16(p,o)===274){p+=8,n=e.getUint16(p,o),e.setUint16(p,1,o);break}}}catch{n=1}return n}function PL(t){var e=0,n=1,o=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:o=-1;break;case 5:e=90,o=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:o}}var ML={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,n=this.container,o=this.cropper,r=Number(e.minContainerWidth),i=Number(e.minContainerHeight);Jt(o,Rn),Fo(t,Rn);var s={width:Math.max(n.offsetWidth,r>=0?r:lw),height:Math.max(n.offsetHeight,i>=0?i:uw)};this.containerData=s,Wr(o,{width:s.width,height:s.height}),Jt(t,Rn),Fo(o,Rn)},initCanvas:function(){var t=this.containerData,e=this.imageData,n=this.options.viewMode,o=Math.abs(e.rotate)%180===90,r=o?e.naturalHeight:e.naturalWidth,i=o?e.naturalWidth:e.naturalHeight,s=r/i,a=t.width,c=t.height;t.height*s>t.width?n===3?a=t.height*s:c=t.width/s:n===3?c=t.width/s:a=t.height*s;var l={aspectRatio:s,naturalWidth:r,naturalHeight:i,width:a,height:c};this.canvasData=l,this.limited=n===1||n===2,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=Ot({},l)},limitCanvas:function(t,e){var n=this.options,o=this.containerData,r=this.canvasData,i=this.cropBoxData,s=n.viewMode,a=r.aspectRatio,c=this.cropped&&i;if(t){var l=Number(n.minCanvasWidth)||0,u=Number(n.minCanvasHeight)||0;s>1?(l=Math.max(l,o.width),u=Math.max(u,o.height),s===3&&(u*a>l?l=u*a:u=l/a)):s>0&&(l?l=Math.max(l,c?i.width:0):u?u=Math.max(u,c?i.height:0):c&&(l=i.width,u=i.height,u*a>l?l=u*a:u=l/a));var h=Gr({aspectRatio:a,width:l,height:u});l=h.width,u=h.height,r.minWidth=l,r.minHeight=u,r.maxWidth=1/0,r.maxHeight=1/0}if(e)if(s>(c?0:1)){var d=o.width-r.width,p=o.height-r.height;r.minLeft=Math.min(0,d),r.minTop=Math.min(0,p),r.maxLeft=Math.max(0,d),r.maxTop=Math.max(0,p),c&&this.limited&&(r.minLeft=Math.min(i.left,i.left+(i.width-r.width)),r.minTop=Math.min(i.top,i.top+(i.height-r.height)),r.maxLeft=i.left,r.maxTop=i.top,s===2&&(r.width>=o.width&&(r.minLeft=Math.min(0,d),r.maxLeft=Math.max(0,d)),r.height>=o.height&&(r.minTop=Math.min(0,p),r.maxTop=Math.max(0,p))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=o.width,r.maxTop=o.height},renderCanvas:function(t,e){var n=this.canvasData,o=this.imageData;if(e){var r=kL({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),i=r.width,s=r.height,a=n.width*(i/n.naturalWidth),c=n.height*(s/n.naturalHeight);n.left-=(a-n.width)/2,n.top-=(c-n.height)/2,n.width=a,n.height=c,n.aspectRatio=i/s,n.naturalWidth=i,n.naturalHeight=s,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Wr(this.canvas,Ot({width:n.width,height:n.height},lc({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,n=this.imageData,o=n.naturalWidth*(e.width/e.naturalWidth),r=n.naturalHeight*(e.height/e.naturalHeight);Ot(n,{width:o,height:r,left:(e.width-o)/2,top:(e.height-r)/2}),Wr(this.image,Ot({width:n.width,height:n.height},lc(Ot({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,o=Number(t.autoCropArea)||.8,r={width:e.width,height:e.height};n&&(e.height*n>e.width?r.height=r.width/n:r.width=r.height*n),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*o),r.height=Math.max(r.minHeight,r.height*o),r.left=e.left+(e.width-r.width)/2,r.top=e.top+(e.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=Ot({},r)},limitCropBox:function(t,e){var n=this.options,o=this.containerData,r=this.canvasData,i=this.cropBoxData,s=this.limited,a=n.aspectRatio;if(t){var c=Number(n.minCropBoxWidth)||0,l=Number(n.minCropBoxHeight)||0,u=s?Math.min(o.width,r.width,r.width+r.left,o.width-r.left):o.width,h=s?Math.min(o.height,r.height,r.height+r.top,o.height-r.top):o.height;c=Math.min(c,o.width),l=Math.min(l,o.height),a&&(c&&l?l*a>c?l=c/a:c=l*a:c?l=c/a:l&&(c=l*a),h*a>u?h=u/a:u=h*a),i.minWidth=Math.min(c,u),i.minHeight=Math.min(l,h),i.maxWidth=u,i.maxHeight=h}e&&(s?(i.minLeft=Math.max(0,r.left),i.minTop=Math.max(0,r.top),i.maxLeft=Math.min(o.width,r.left+r.width)-i.width,i.maxTop=Math.min(o.height,r.top+r.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=o.width-i.width,i.maxTop=o.height-i.height))},renderCropBox:function(){var t=this.options,e=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&cc(this.face,ac,n.width>=e.width&&n.height>=e.height?YC:Pp),Wr(this.cropBox,Ot({width:n.width,height:n.height},lc({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Us(this.element,Up,this.getData())}},LL={initPreview:function(){var t=this.element,e=this.crossOrigin,n=this.options.preview,o=e?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",i=document.createElement("img");if(e&&(i.crossOrigin=e),i.src=o,i.alt=r,this.viewBox.appendChild(i),this.viewBoxImage=i,!!n){var s=n;typeof n=="string"?s=t.ownerDocument.querySelectorAll(n):n.querySelector&&(s=[n]),this.previews=s,Bt(s,function(a){var c=document.createElement("img");cc(a,au,{width:a.offsetWidth,height:a.offsetHeight,html:a.innerHTML}),e&&(c.crossOrigin=e),c.src=o,c.alt=r,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',a.innerHTML="",a.appendChild(c)})}},resetPreview:function(){Bt(this.previews,function(t){var e=$p(t,au);Wr(t,{width:e.width,height:e.height}),t.innerHTML=e.html,wL(t,au)})},preview:function(){var t=this.imageData,e=this.canvasData,n=this.cropBoxData,o=n.width,r=n.height,i=t.width,s=t.height,a=n.left-e.left-t.left,c=n.top-e.top-t.top;!this.cropped||this.disabled||(Wr(this.viewBoxImage,Ot({width:i,height:s},lc(Ot({translateX:-a,translateY:-c},t)))),Bt(this.previews,function(l){var u=$p(l,au),h=u.width,d=u.height,p=h,m=d,_=1;o&&(_=h/o,m=r*_),r&&m>d&&(_=d/r,p=o*_,m=d),Wr(l,{width:p,height:m}),Wr(l.getElementsByTagName("img")[0],Ot({width:i*_,height:s*_},lc(Ot({translateX:-a*_,translateY:-c*_},t))))}))}},DL={bind:function(){var t=this.element,e=this.options,n=this.cropper;On(e.cropstart)&&Zn(t,qp,e.cropstart),On(e.cropmove)&&Zn(t,Hp,e.cropmove),On(e.cropend)&&Zn(t,Fp,e.cropend),On(e.crop)&&Zn(t,Up,e.crop),On(e.zoom)&&Zn(t,Bp,e.zoom),Zn(n,nw,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Zn(n,aw,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Zn(n,tw,this.onDblclick=this.dblclick.bind(this)),Zn(t.ownerDocument,ow,this.onCropMove=this.cropMove.bind(this)),Zn(t.ownerDocument,rw,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Zn(window,sw,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,n=this.cropper;On(e.cropstart)&&bo(t,qp,e.cropstart),On(e.cropmove)&&bo(t,Hp,e.cropmove),On(e.cropend)&&bo(t,Fp,e.cropend),On(e.crop)&&bo(t,Up,e.crop),On(e.zoom)&&bo(t,Bp,e.zoom),bo(n,nw,this.onCropStart),e.zoomable&&e.zoomOnWheel&&bo(n,aw,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&bo(n,tw,this.onDblclick),bo(t.ownerDocument,ow,this.onCropMove),bo(t.ownerDocument,rw,this.onCropEnd),e.responsive&&bo(window,sw,this.onResize)}},UL={resize:function(){if(!this.disabled){var t=this.options,e=this.container,n=this.containerData,o=e.offsetWidth/n.width,r=e.offsetHeight/n.height,i=Math.abs(o-1)>Math.abs(r-1)?o:r;if(i!==1){var s,a;t.restore&&(s=this.getCanvasData(),a=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(Bt(s,function(c,l){s[l]=c*i})),this.setCropBoxData(Bt(a,function(c,l){a[l]=c*i})))}}},dblclick:function(){this.disabled||this.options.dragMode===ew||this.setDragMode(bL(this.dragBox,Mp)?ZC:Dp)},wheel:function(t){var e=this,n=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?o=t.deltaY>0?1:-1:t.wheelDelta?o=-t.wheelDelta/120:t.detail&&(o=t.detail>0?1:-1),this.zoom(-o*n,t)))},cropStart:function(t){var e=t.buttons,n=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(tt(e)&&e!==1||tt(n)&&n!==0||t.ctrlKey))){var o=this.options,r=this.pointers,i;t.changedTouches?Bt(t.changedTouches,function(s){r[s.identifier]=cu(s)}):r[t.pointerId||0]=cu(t),Object.keys(r).length>1&&o.zoomable&&o.zoomOnTouch?i=QC:i=$p(t.target,ac),uL.test(i)&&Us(this.element,qp,{originalEvent:t,action:i})!==!1&&(t.preventDefault(),this.action=i,this.cropping=!1,i===VC&&(this.cropping=!0,Jt(this.dragBox,su)))}},cropMove:function(t){var e=this.action;if(!(this.disabled||!e)){var n=this.pointers;t.preventDefault(),Us(this.element,Hp,{originalEvent:t,action:e})!==!1&&(t.changedTouches?Bt(t.changedTouches,function(o){Ot(n[o.identifier]||{},cu(o,!0))}):Ot(n[t.pointerId||0]||{},cu(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,n=this.pointers;t.changedTouches?Bt(t.changedTouches,function(o){delete n[o.identifier]}):delete n[t.pointerId||0],e&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Ds(this.dragBox,su,this.cropped&&this.options.modal)),Us(this.element,Fp,{originalEvent:t,action:e}))}}},FL={change:function(t){var e=this.options,n=this.canvasData,o=this.containerData,r=this.cropBoxData,i=this.pointers,s=this.action,a=e.aspectRatio,c=r.left,l=r.top,u=r.width,h=r.height,d=c+u,p=l+h,m=0,_=0,T=o.width,b=o.height,C=!0,y;!a&&t.shiftKey&&(a=u&&h?u/h:1),this.limited&&(m=r.minLeft,_=r.minTop,T=m+Math.min(o.width,n.width,n.left+n.width),b=_+Math.min(o.height,n.height,n.top+n.height));var v=i[Object.keys(i)[0]],w={x:v.endX-v.startX,y:v.endY-v.startY},A=function(S){switch(S){case Pi:d+w.x>T&&(w.x=T-d);break;case Mi:c+w.x<m&&(w.x=m-c);break;case zr:l+w.y<_&&(w.y=_-l);break;case Ps:p+w.y>b&&(w.y=b-p);break}};switch(s){case Pp:c+=w.x,l+=w.y;break;case Pi:if(w.x>=0&&(d>=T||a&&(l<=_||p>=b))){C=!1;break}A(Pi),u+=w.x,u<0&&(s=Mi,u=-u,c-=u),a&&(h=u/a,l+=(r.height-h)/2);break;case zr:if(w.y<=0&&(l<=_||a&&(c<=m||d>=T))){C=!1;break}A(zr),h-=w.y,l+=w.y,h<0&&(s=Ps,h=-h,l-=h),a&&(u=h*a,c+=(r.width-u)/2);break;case Mi:if(w.x<=0&&(c<=m||a&&(l<=_||p>=b))){C=!1;break}A(Mi),u-=w.x,c+=w.x,u<0&&(s=Pi,u=-u,c-=u),a&&(h=u/a,l+=(r.height-h)/2);break;case Ps:if(w.y>=0&&(p>=b||a&&(c<=m||d>=T))){C=!1;break}A(Ps),h+=w.y,h<0&&(s=zr,h=-h,l-=h),a&&(u=h*a,c+=(r.width-u)/2);break;case oc:if(a){if(w.y<=0&&(l<=_||d>=T)){C=!1;break}A(zr),h-=w.y,l+=w.y,u=h*a}else A(zr),A(Pi),w.x>=0?d<T?u+=w.x:w.y<=0&&l<=_&&(C=!1):u+=w.x,w.y<=0?l>_&&(h-=w.y,l+=w.y):(h-=w.y,l+=w.y);u<0&&h<0?(s=sc,h=-h,u=-u,l-=h,c-=u):u<0?(s=rc,u=-u,c-=u):h<0&&(s=ic,h=-h,l-=h);break;case rc:if(a){if(w.y<=0&&(l<=_||c<=m)){C=!1;break}A(zr),h-=w.y,l+=w.y,u=h*a,c+=r.width-u}else A(zr),A(Mi),w.x<=0?c>m?(u-=w.x,c+=w.x):w.y<=0&&l<=_&&(C=!1):(u-=w.x,c+=w.x),w.y<=0?l>_&&(h-=w.y,l+=w.y):(h-=w.y,l+=w.y);u<0&&h<0?(s=ic,h=-h,u=-u,l-=h,c-=u):u<0?(s=oc,u=-u,c-=u):h<0&&(s=sc,h=-h,l-=h);break;case sc:if(a){if(w.x<=0&&(c<=m||p>=b)){C=!1;break}A(Mi),u-=w.x,c+=w.x,h=u/a}else A(Ps),A(Mi),w.x<=0?c>m?(u-=w.x,c+=w.x):w.y>=0&&p>=b&&(C=!1):(u-=w.x,c+=w.x),w.y>=0?p<b&&(h+=w.y):h+=w.y;u<0&&h<0?(s=oc,h=-h,u=-u,l-=h,c-=u):u<0?(s=ic,u=-u,c-=u):h<0&&(s=rc,h=-h,l-=h);break;case ic:if(a){if(w.x>=0&&(d>=T||p>=b)){C=!1;break}A(Pi),u+=w.x,h=u/a}else A(Ps),A(Pi),w.x>=0?d<T?u+=w.x:w.y>=0&&p>=b&&(C=!1):u+=w.x,w.y>=0?p<b&&(h+=w.y):h+=w.y;u<0&&h<0?(s=rc,h=-h,u=-u,l-=h,c-=u):u<0?(s=sc,u=-u,c-=u):h<0&&(s=oc,h=-h,l-=h);break;case YC:this.move(w.x,w.y),C=!1;break;case QC:this.zoom(TL(i),t),C=!1;break;case VC:if(!w.x||!w.y){C=!1;break}y=mw(this.cropper),c=v.startX-y.left,l=v.startY-y.top,u=r.minWidth,h=r.minHeight,w.x>0?s=w.y>0?ic:oc:w.x<0&&(c-=u,s=w.y>0?sc:rc),w.y<0&&(l-=h),this.cropped||(Fo(this.cropBox,Rn),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}C&&(r.width=u,r.height=h,r.left=c,r.top=l,this.action=s,this.renderCropBox()),Bt(i,function(S){S.startX=S.endX,S.startY=S.endY})}},HL={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Jt(this.dragBox,su),Fo(this.cropBox,Rn),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Ot({},this.initialImageData),this.canvasData=Ot({},this.initialCanvasData),this.cropBoxData=Ot({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Ot(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Fo(this.dragBox,su),Jt(this.cropBox,Rn)),this},replace:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Bt(this.previews,function(n){n.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Fo(this.cropper,JC)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Jt(this.cropper,JC)),this},destroy:function(){var t=this.element;return t[Rt]?(t[Rt]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=this.canvasData,o=n.left,r=n.top;return this.moveTo(Kp(t)?t:o+Number(t),Kp(e)?e:r+Number(e))},moveTo:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=this.canvasData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(tt(t)&&(n.left=t,o=!0),tt(e)&&(n.top=e,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(t,e){var n=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(n.width*t/n.naturalWidth,null,e)},zoomTo:function(t,e,n){var o=this.options,r=this.canvasData,i=r.width,s=r.height,a=r.naturalWidth,c=r.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&o.zoomable){var l=a*t,u=c*t;if(Us(this.element,Bp,{ratio:t,oldRatio:i/a,originalEvent:n})===!1)return this;if(n){var h=this.pointers,d=mw(this.cropper),p=h&&Object.keys(h).length?SL(h):{pageX:n.pageX,pageY:n.pageY};r.left-=(l-i)*((p.pageX-d.left-r.left)/i),r.top-=(u-s)*((p.pageY-d.top-r.top)/s)}else Ms(e)&&tt(e.x)&&tt(e.y)?(r.left-=(l-i)*((e.x-r.left)/i),r.top-=(u-s)*((e.y-r.top)/s)):(r.left-=(l-i)/2,r.top-=(u-s)/2);r.width=l,r.height=u,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),tt(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,tt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(tt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=this.imageData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(tt(t)&&(n.scaleX=t,o=!0),tt(e)&&(n.scaleY=e,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.options,n=this.imageData,o=this.canvasData,r=this.cropBoxData,i;if(this.ready&&this.cropped){i={x:r.left-o.left,y:r.top-o.top,width:r.width,height:r.height};var s=n.width/n.naturalWidth;if(Bt(i,function(l,u){i[u]=l/s}),t){var a=Math.round(i.y+i.height),c=Math.round(i.x+i.width);i.x=Math.round(i.x),i.y=Math.round(i.y),i.width=c-i.x,i.height=a-i.y}}else i={x:0,y:0,width:0,height:0};return e.rotatable&&(i.rotate=n.rotate||0),e.scalable&&(i.scaleX=n.scaleX||1,i.scaleY=n.scaleY||1),i},setData:function(t){var e=this.options,n=this.imageData,o=this.canvasData,r={};if(this.ready&&!this.disabled&&Ms(t)){var i=!1;e.rotatable&&tt(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,i=!0),e.scalable&&(tt(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,i=!0),tt(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,i=!0)),i&&this.renderCanvas(!0,!0);var s=n.width/n.naturalWidth;tt(t.x)&&(r.left=t.x*s+o.left),tt(t.y)&&(r.top=t.y*s+o.top),tt(t.width)&&(r.width=t.width*s),tt(t.height)&&(r.height=t.height*s),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?Ot({},this.containerData):{}},getImageData:function(){return this.sized?Ot({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&Bt(["left","top","width","height","naturalWidth","naturalHeight"],function(n){e[n]=t[n]}),e},setCanvasData:function(t){var e=this.canvasData,n=e.aspectRatio;return this.ready&&!this.disabled&&Ms(t)&&(tt(t.left)&&(e.left=t.left),tt(t.top)&&(e.top=t.top),tt(t.width)?(e.width=t.width,e.height=t.width/n):tt(t.height)&&(e.height=t.height,e.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,e;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(t){var e=this.cropBoxData,n=this.options.aspectRatio,o,r;return this.ready&&this.cropped&&!this.disabled&&Ms(t)&&(tt(t.left)&&(e.left=t.left),tt(t.top)&&(e.top=t.top),tt(t.width)&&t.width!==e.width&&(o=!0,e.width=t.width),tt(t.height)&&t.height!==e.height&&(r=!0,e.height=t.height),n&&(o?e.height=e.width/n:r&&(e.width=e.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,n=AL(this.image,this.imageData,e,t);if(!this.cropped)return n;var o=this.getData(t.rounded),r=o.x,i=o.y,s=o.width,a=o.height,c=n.width/Math.floor(e.naturalWidth);c!==1&&(r*=c,i*=c,s*=c,a*=c);var l=s/a,u=Gr({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),h=Gr({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),d=Gr({aspectRatio:l,width:t.width||(c!==1?n.width:s),height:t.height||(c!==1?n.height:a)}),p=d.width,m=d.height;p=Math.min(u.width,Math.max(h.width,p)),m=Math.min(u.height,Math.max(h.height,m));var _=document.createElement("canvas"),T=_.getContext("2d");_.width=Ls(p),_.height=Ls(m),T.fillStyle=t.fillColor||"transparent",T.fillRect(0,0,p,m);var b=t.imageSmoothingEnabled,C=b===void 0?!0:b,y=t.imageSmoothingQuality;T.imageSmoothingEnabled=C,y&&(T.imageSmoothingQuality=y);var v=n.width,w=n.height,A=r,S=i,E,O,L,z,x,j;A<=-s||A>v?(A=0,E=0,L=0,x=0):A<=0?(L=-A,A=0,E=Math.min(v,s+A),x=E):A<=v&&(L=0,E=Math.min(s,v-A),x=E),E<=0||S<=-a||S>w?(S=0,O=0,z=0,j=0):S<=0?(z=-S,S=0,O=Math.min(w,a+S),j=O):S<=w&&(z=0,O=Math.min(a,w-S),j=O);var ae=[A,S,E,O];if(x>0&&j>0){var ie=p/s;ae.push(L*ie,z*ie,x*ie,j*ie)}return T.drawImage.apply(T,[n].concat(WC(ae.map(function(G){return Math.floor(Ls(G))})))),_},setAspectRatio:function(t){var e=this.options;return!this.disabled&&!Kp(t)&&(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,n=this.dragBox,o=this.face;if(this.ready&&!this.disabled){var r=t===Dp,i=e.movable&&t===ZC;t=r||i?t:ew,e.dragMode=t,cc(n,ac,t),Ds(n,Mp,r),Ds(n,Lp,i),e.cropBoxMovable||(cc(o,ac,t),Ds(o,Mp,r),Ds(o,Lp,i))}return this}},qL=Uo.Cropper,bw=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(XM(this,t),!e||!pL.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Ot({},hw,Ms(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return ZM(t,[{key:"init",value:function(){var e=this.element,n=e.tagName.toLowerCase(),o;if(!e[Rt]){if(e[Rt]=this,n==="img"){if(this.isImg=!0,o=e.getAttribute("src")||"",this.originalUrl=o,!o)return;o=e.src}else n==="canvas"&&window.HTMLCanvasElement&&(o=e.toDataURL());this.load(o)}}},{key:"load",value:function(e){var n=this;if(e){this.url=e,this.imageData={};var o=this.element,r=this.options;if(!r.rotatable&&!r.scalable&&(r.checkOrientation=!1),!r.checkOrientation||!window.ArrayBuffer){this.clone();return}if(hL.test(e)){dL.test(e)?this.read(OL(e)):this.clone();return}var i=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=i,i.onabort=s,i.onerror=s,i.ontimeout=s,i.onprogress=function(){i.getResponseHeader("content-type")!==cw&&i.abort()},i.onload=function(){n.read(i.response)},i.onloadend=function(){n.reloading=!1,n.xhr=null},r.checkCrossOrigin&&vw(e)&&o.crossOrigin&&(e=yw(e)),i.open("GET",e,!0),i.responseType="arraybuffer",i.withCredentials=o.crossOrigin==="use-credentials",i.send()}}},{key:"read",value:function(e){var n=this.options,o=this.imageData,r=xL(e),i=0,s=1,a=1;if(r>1){this.url=NL(e,cw);var c=PL(r);i=c.rotate,s=c.scaleX,a=c.scaleY}n.rotatable&&(o.rotate=i),n.scalable&&(o.scaleX=s,o.scaleY=a),this.clone()}},{key:"clone",value:function(){var e=this.element,n=this.url,o=e.crossOrigin,r=n;this.options.checkCrossOrigin&&vw(n)&&(o||(o="anonymous"),r=yw(n)),this.crossOrigin=o,this.crossOriginUrl=r;var i=document.createElement("img");o&&(i.crossOrigin=o),i.src=r||n,i.alt=e.alt||"The image to crop",this.image=i,i.onload=this.start.bind(this),i.onerror=this.stop.bind(this),Jt(i,XC),e.parentNode.insertBefore(i,e.nextSibling)}},{key:"start",value:function(){var e=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var o=Uo.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Uo.navigator.userAgent),r=function(a,c){Ot(e.imageData,{naturalWidth:a,naturalHeight:c,aspectRatio:a/c}),e.initialImageData=Ot({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(n.naturalWidth&&!o){r(n.naturalWidth,n.naturalHeight);return}var i=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=i,i.onload=function(){r(i.width,i.height),o||s.removeChild(i)},i.src=n.src,o||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(i))}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var e=this.element,n=this.options,o=this.image,r=e.parentNode,i=document.createElement("div");i.innerHTML=fL;var s=i.querySelector(".".concat(Rt,"-container")),a=s.querySelector(".".concat(Rt,"-canvas")),c=s.querySelector(".".concat(Rt,"-drag-box")),l=s.querySelector(".".concat(Rt,"-crop-box")),u=l.querySelector(".".concat(Rt,"-face"));this.container=r,this.cropper=s,this.canvas=a,this.dragBox=c,this.cropBox=l,this.viewBox=s.querySelector(".".concat(Rt,"-view-box")),this.face=u,a.appendChild(o),Jt(e,Rn),r.insertBefore(s,e.nextSibling),Fo(o,XC),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,Jt(l,Rn),n.guides||Jt(l.getElementsByClassName("".concat(Rt,"-dashed")),Rn),n.center||Jt(l.getElementsByClassName("".concat(Rt,"-center")),Rn),n.background&&Jt(s,"".concat(Rt,"-bg")),n.highlight||Jt(u,sL),n.cropBoxMovable&&(Jt(u,Lp),cc(u,ac,Pp)),n.cropBoxResizable||(Jt(l.getElementsByClassName("".concat(Rt,"-line")),Rn),Jt(l.getElementsByClassName("".concat(Rt,"-point")),Rn)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),On(n.ready)&&Zn(e,iw,n.ready,{once:!0}),Us(e,iw)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),Fo(this.element,Rn)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=qL,t}},{key:"setDefaults",value:function(e){Ot(hw,Ms(e)&&e)}}]),t}();Ot(bw.prototype,ML,LL,DL,UL,FL,HL);const BL={class:"d-flex flex-column gap-2"},KL="https://kissarekisteri.blob.core.windows.net/images/dcebd246-fd93-46d6-a6f4-a426f1182e50.png",jL=vt({__name:"Cropper",emits:["onCrop"],setup(t,{emit:e}){const n=e,o=ye(null),r=ye(!1),i=ye(null),s=c=>{const l=document.createElement("canvas"),u=l.getContext("2d"),h=c.width,d=c.height;return l.width=h,l.height=d,u.imageSmoothingEnabled=!0,u.drawImage(c,0,0,h,d),u.globalCompositeOperation="destination-in",u.beginPath(),u.arc(h/2,d/2,Math.min(h,d)/2,0,2*Math.PI,!0),u.fill(),l},a=()=>{var u;if(!r.value)return;const c=(u=o.value)==null?void 0:u.getCroppedCanvas();if(!c)return;const l=s(c).toDataURL();n("onCrop",l)};return Ln(()=>{i.value&&(o.value=new bw(i.value,{aspectRatio:1,viewMode:1,ready:()=>{r.value=!0}}))}),ma(()=>{o.value&&o.value.destroy()}),(c,l)=>(Z(),oe("div",BL,[M("img",{style:{width:"100%",visibility:"hidden"},ref_key:"imageRef",ref:i,src:KL,alt:"Picture"},null,512),M("button",{class:"ms-auto btn btn-primary",type:"button",onClick:a},"Tallenna")]))}}),$L={class:"w-100 p-4 d-flex flex-column"},zL={class:"mb-3"},WL=M("label",{for:"catName",class:"form-label w-100"},"Nimi",-1),GL={class:"mb-3"},VL=M("label",{for:"breed",class:"form-label w-100"},"Rotu",-1),YL=["value"],QL={class:"mb-3"},JL=M("label",{for:"catBirthDate",class:"form-label w-100"},"Syntym\xE4aika",-1),XL={class:"mb-3"},ZL=M("label",{for:"catSex",class:"form-label w-100"},"Sukupuoli",-1),eD=M("option",{value:"Female"},"Naaras",-1),tD=M("option",{value:"Male"},"Uros",-1),nD=[eD,tD],oD={class:"mb-3 position-relative"},rD=M("label",{for:"mother-cat",class:"form-label w-100"},"Kissan \xE4iti",-1),iD={key:0,class:"z-2 bg-white p-2 gap-2 d-flex flex-column border rounded-2 border-top-0 position-absolute w-100"},sD=["onClick"],aD={class:"mb-3 position-relative"},cD=M("label",{for:"father-cat",class:"form-label w-100"},"Kissan is\xE4",-1),lD={key:0,class:"z-2 bg-white p-2 gap-2 d-flex flex-column border rounded-2 border-top-0 position-absolute w-100"},uD=["onClick"],hD=["disabled"],Cw=vt({__name:"CatForm",props:{cat:{type:Object}},setup(t){const e=ye(""),n=ye(""),o=t,r=ye(!1),i=ye(!1),{data:s,refetch:a}=mo({queryKey:["motherCats"+e.value],queryFn:()=>Do.getCats(`name=${e.value}&breed=${h.value.breed}&limit=3&sex=female`)}),{data:c,refetch:l}=mo({queryKey:["fatherCats"+n.value],queryFn:()=>Do.getCats(`name=${n.value}&breed=${h.value.breed}&limit=3&sex=male`)}),{data:u}=mo({queryKey:["catBreeds"],queryFn:()=>Do.getCatBreeds()}),h=ye({name:"",birthDate:Ap(),breed:"",sex:"Female",fatherId:void 0,motherId:void 0});let d,p;lo(()=>{if(e.value.length<2){r.value=!1;return}r.value=!0,clearTimeout(d),d=setTimeout(()=>a(),300)}),lo(()=>{if(n.value.length<2){i.value=!1;return}i.value=!0,clearTimeout(p),p=setTimeout(()=>l(),300)}),lo(()=>{u.value&&u.value.length>0&&(h.value.breed=u.value[0].name)}),Pt(()=>h.value.breed,()=>{h.value.motherId=void 0,e.value="",h.value.fatherId=void 0,n.value=""}),lo(()=>{o.cat&&(h.value={...h.value,...o.cat})});const m=b=>{h.value.fatherId=b.id,n.value=b.name,ui(()=>i.value=!1)},_=b=>{h.value.motherId=b.id,e.value=b.name,ui(()=>r.value=!1)},T=Re(()=>h.value.name.trim()!==""&&h.value.breed.trim()!==""&&h.value.birthDate.trim()!==""&&(h.value.sex==="Female"||h.value.sex==="Male"));return(b,C)=>(Z(),oe("div",$L,[M("div",zL,[WL,wn(M("input",{"data-testid":"new-cat-name-input",type:"text",class:"form-control",id:"catName","onUpdate:modelValue":C[0]||(C[0]=y=>h.value.name=y)},null,512),[[An,h.value.name]])]),M("div",GL,[VL,wn(M("select",{"onUpdate:modelValue":C[1]||(C[1]=y=>h.value.breed=y),class:"form-select",id:"breed","aria-label":"breed"},[(Z(!0),oe(ze,null,sn(X(u),y=>(Z(),oe("option",{key:y.id,value:y.name},Se(y.name),9,YL))),128))],512),[[hl,h.value.breed]])]),M("div",QL,[JL,wn(M("input",{"data-testid":"new-cat-birthdate-input",type:"date",class:"form-control",id:"catBirthDate","onUpdate:modelValue":C[2]||(C[2]=y=>h.value.birthDate=y)},null,512),[[An,h.value.birthDate]])]),M("div",XL,[ZL,wn(M("select",{"data-testid":"new-cat-sex-select",class:"form-select",id:"catSex","onUpdate:modelValue":C[3]||(C[3]=y=>h.value.sex=y),"aria-label":"Cat sex"},nD,512),[[hl,h.value.sex]])]),M("div",oD,[rD,wn(M("input",{"onUpdate:modelValue":C[4]||(C[4]=y=>e.value=y),class:"form-control",id:"mother-cat",placeholder:"Type to search..."},null,512),[[An,e.value]]),r.value&&X(s)&&X(s).length>0?(Z(),oe("div",iD,[(Z(!0),oe(ze,null,sn(X(s),y=>(Z(),oe("div",{key:y.id,class:"p-2 rounded-3 hover-bg",onClick:()=>_(y)},Se(y.name),9,sD))),128))])):Ge("",!0)]),M("div",aD,[cD,wn(M("input",{"onUpdate:modelValue":C[5]||(C[5]=y=>n.value=y),class:"form-control",id:"father-cat",placeholder:"Type to search..."},null,512),[[An,n.value]]),i.value&&X(c)&&X(c).length>0?(Z(),oe("div",lD,[(Z(!0),oe(ze,null,sn(X(c),y=>(Z(),oe("div",{key:y.id,class:"p-2 rounded-3 hover-bg",onClick:()=>m(y)},Se(y.name),9,uD))),128))])):Ge("",!0)]),M("button",{disabled:!T.value,"data-testid":"add-new-cat-btn-save",onClick:C[6]||(C[6]=y=>b.$emit("onSave",h.value)),class:"btn btn-primary ms-auto px-5"}," Lis\xE4\xE4 kissa + ",8,hD)]))}}),dD={key:0,class:"m-5 fw-bold"},pD={key:1,class:"w-100 h-100 d-flex justify-content-center p-5"},fD={class:"p-4 p-sm-5 rounded col-12 col-lg-8"},gD={key:0,class:"d-flex flex-column"},mD={class:"d-flex align-items-center gap-2 mb-4"},vD=["src","onerror"],yD={key:1,style:{width:"32px",height:"32px","font-size":"14px"},class:"rounded-circle d-flex align-items-center justify-content-center bg-primary fw-bold"},_D={key:1,class:"d-flex flex-column rounded h-100 pb-5"},bD={key:0},CD=M("button",{tabindex:"0",class:"btn py-1 px-2 accordion d-flex focus-ring rounded-1",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[M("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 128 512"},[M("path",{d:"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"})])],-1),wD={class:"dropdown-menu"},ED=["onKeyup","onClick"],TD=["onKeyup","onClick"],SD={class:"p-5"},kD={class:"w-100 p-4 d-flex flex-column"},AD=M("p",null,"Poistetaanko kissan tiedot?",-1),ID={class:"d-flex gap-2 justify-content-end"},RD=M("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Peruuta",-1),OD=vt({__name:"UserDetails",setup(t){var A;const{t:e}=Jn(),n=Xl(),o=ye(!1),r=ye(!1),i=ye(!1),s=ye(),a=ye(!1),c=ye(!1),l=ye(),u=Re(()=>Pr.user),{data:h,isError:d,refetch:p}=mo({queryKey:["user"+n.params.userId],queryFn:()=>ws.getUserById(n.params.userId)}),m=Re(()=>h.value&&u.value?h.value.id===u.value.id:!1),{data:_,refetch:T}=mo({queryKey:["userCats"],queryFn:()=>{var S;return ws.getCatsByUserId((S=h.value)==null?void 0:S.id)},enabled:!!((A=h.value)!=null&&A.id)}),{mutate:b}=Lr({mutationFn:S=>Do.addCat(S),onSuccess:()=>{jr.success("Kissan tiedot lis\xE4tty"),T()},onError:()=>jr.error("Jokin meni vikaan.")});Pt([n,h],()=>{T(),p()});const C=S=>{b(S),a.value=!1},y=async S=>{var E;await Do.deleteCatById(S)&&(_.value=(E=_.value)==null?void 0:E.filter(O=>O.id!==S),i.value=!1)},v=async S=>{await Do.editCat(S)},w=S=>{l.value=S,o.value=!0};return(S,E)=>(Z(),oe(ze,null,[X(d)?(Z(),oe("h3",dD,Se(X(e)("Profile.404")),1)):Ge("",!0),X(h)?(Z(),oe("div",pD,[M("div",fD,[X(h)?(Z(),oe("div",gD,[M("div",mD,[M("div",{class:"d-flex align-items-center",onClick:E[0]||(E[0]=O=>r.value=!1)},[X(h).avatarUrl&&!c.value?(Z(),oe("img",{key:0,class:"rounded-circle",height:"32",width:"32",style:{"object-fit":"fill"},src:X(h).avatarUrl,alt:"User avatar",onerror:c.value=!0},null,8,vD)):(Z(),oe("div",yD,Se(X(h).givenName[0]+X(h).surname[0]),1))]),M("h3",null,Se(`${X(h).givenName}  ${X(h).surname}`),1)])])):Ge("",!0),X(_)?(Z(),oe("div",_D,[X(_).length>0?(Z(),oe("h3",bD,Se(X(e)("Profile.cats")),1)):Ge("",!0),X(_)&&X(_).length>0?(Z(),Ut(ru,{key:1,searchQueryPlaceholder:X(e)("Cats.searchInput"),items:X(_),itemsPerPage:7},{default:wt(({item:O})=>[(Z(),Ut(nc,{key:O.id,cat:O},{actions:wt(()=>[m.value?(Z(),oe("div",{key:0,onKeyup:E[1]||(E[1]=Kt(Yo(()=>{},["stop"]),["enter"])),"data-testid":"cat-options",onClick:E[2]||(E[2]=Yo(()=>{},["stop"])),class:"dropdown d-flex dropstart"},[CD,M("ul",wD,[M("li",{onKeyup:Kt(L=>w(O),["enter"]),tabIndex:"0",class:"dropdown-item",onClick:Yo(L=>w(O),["stop"])},"Muokkaa",40,ED),M("li",{tabIndex:"0","data-testid":"start-cat-delete",class:"dropdown-item",onKeyup:Kt(L=>(s.value=O.id,i.value=!0),["enter"]),onClick:Yo(L=>(s.value=O.id,i.value=!0),["stop"])}," Poista ",40,TD)])],32)):Ge("",!0)]),_:2},1032,["cat"]))]),action:wt(()=>[m.value?(Z(),oe("button",{key:0,onClick:E[3]||(E[3]=O=>a.value=!0),"data-testid":"add-new-cat-btn",type:"button",class:"btn btn-primary ms-auto px-5"},Se(X(e)("Profile.addCat"))+" + ",1)):Ge("",!0)]),_:1},8,["searchQueryPlaceholder","items"])):Ge("",!0)])):Ge("",!0)])])):Ge("",!0),Oe(Ni,{modalId:"add-cat-modal",visible:a.value,onOnCancel:E[4]||(E[4]=O=>a.value=!1)},{default:wt(()=>[Oe(Cw,{onOnSave:C})]),_:1},8,["visible"]),Oe(Ni,{modalId:"edit-avatar-modal",onOnCancel:E[6]||(E[6]=O=>r.value=!1),visible:r.value},{default:wt(()=>[M("div",SD,[Oe(jL,{onOnCrop:E[5]||(E[5]=O=>console.log(O))})])]),_:1},8,["visible"]),Oe(Ni,{modalId:"edit-modal",onOnCancel:E[7]||(E[7]=O=>o.value=!1),visible:o.value},{default:wt(()=>[Oe(Cw,{cat:l.value,onOnSave:v},null,8,["cat"])]),_:1},8,["visible"]),Oe(Ni,{modalId:"delete-modal",onOnCancel:E[9]||(E[9]=O=>i.value=!1),visible:i.value},{default:wt(()=>[M("div",kD,[AD,M("div",ID,[RD,M("button",{"data-testid":"confirm-cat-delete",onClick:E[8]||(E[8]=()=>y(s.value)),type:"button",class:"btn btn-danger"}," Poista ")])])]),_:1},8,["visible"])],64))}}),ND=[{path:"/catshows",component:OP},{path:"/catshows/:eventId",component:vM},{path:"/cats",component:IM},{path:"/cats/:catId",component:JM},{path:"/users",component:DM},{path:"/users/:userId",component:OD},{path:"/:pathMatch(.*)*",name:"not-found",redirect:"/cats"}],xD=D1({history:XR(),routes:ND}),PD={profile:"Profile",login:"Login",logout:"Logout",cats:"Cats",catShows:"Cat shows",members:"Members"},MD={404:"404 User not found",addCat:"Add cat",cats:"Cats"},LD={members:"Members",searchInput:"Search members...",breeder:"Breeder"},DD={cats:"Cats",searchInput:"Search cats...",breed:"Breed",birthDate:"Birth date"},UD={404:"404 Cat not found",parents:"Parents",placings:"Placings",kittens:"Kittens",birthDate:"Birth date",owner:"Owner",breeder:"Breeder",editCat:"Edit cat",deleteCat:"Delete cat",setAsProfilePicture:"Set as profile picture",uploadImage:"Upload image"},FD={catShows:"Cat shows",searchInput:"Search cat shows...",addCatShow:"Add cat show",eventNameInput:"Event name",eventDescriptionInput:"Event description",eventLocationInput:"Event location"},HD={404:"404 Cat show not found",joinEvent:"Join event",leaveEvent:"Leave event"},qD={Search:"Search..."},BD={Navigation:PD,Profile:MD,Users:LD,Cats:DD,CatDetails:UD,CatShowList:FD,CatShowDetails:HD,List:qD},KD={profile:"Profiili",login:"Kirjaudu sis\xE4\xE4n",logout:"Kirjaudu ulos",cats:"Kissat",catShows:"N\xE4yttelyt",members:"J\xE4senet"},jD={404:"404 K\xE4ytt\xE4j\xE4\xE4 ei l\xF6ytynyt",addCat:"Lis\xE4\xE4 kissa",cats:"Kissat"},$D={members:"J\xE4senet",searchInput:"Etsi j\xE4senist\xE4...",breeder:"Kasvattaja"},zD={cats:"Kissat",searchInput:"Etsi kissoista...",breed:"Rotu",birthDate:"Syntym\xE4aika"},WD={404:"404 Kissaa ei l\xF6ytynyt",parents:"Vanhemmat",placings:"Sijoitukset",kittens:"Pennut",birthDate:"Birth date",owner:"Omistaja",breeder:"Kasvattaja",editCat:"Edit cat",deleteCat:"Delete cat",setAsProfilePicture:"Aseta profiilikuvaksi",uploadImage:"Lis\xE4\xE4 kuva"},GD={catShows:"N\xE4yttelyt",searchInput:"Etsi n\xE4yttelyist\xE4...",addCatShow:"Lis\xE4\xE4 n\xE4yttely",eventNameInput:"Tapahtuman nimi",eventDescriptionInput:"Tapahtuman kuvaus",eventLocationInput:"Tapahtuman sijainti"},VD={404:"404 N\xE4yttely\xE4 ei l\xF6ytynyt",joinEvent:"Liity tapahtumaan",leaveEvent:"Poistu tapahtumasta"},YD={Search:"Hae.."},QD={Navigation:KD,Profile:jD,Users:$D,Cats:zD,CatDetails:WD,CatShowList:GD,CatShowDetails:VD,List:YD},JD=CN({legacy:!1,locale:"fi",messages:{en:BD,fi:QD}});await uR();const lu=Sm(jx);lu.use(JD),lu.use(PR),lu.use(xD),lu.mount("#app")})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}